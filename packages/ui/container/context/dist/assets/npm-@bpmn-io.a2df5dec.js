import{i as e,d as t,a as i,b as r,s,f as n,g as o,c as a,e as l,r as p}from"./npm-min-dash.ee8df4a0.js";import{c as h}from"./npm-classnames.4404c06a.js";import{q as c}from"./npm-min-dom.8fd3350a.js";var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function f(e){var t=e.default;if("function"==typeof t){var i=function(){return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),i}var m,g,y,O,b,v={},w=[],P=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function k(e,t){for(var i in t)e[i]=t[i];return e}function x(e){var t=e.parentNode;t&&t.removeChild(e)}function S(e,t,i){var r,s,n,o=arguments,a={};for(n in t)"key"==n?r=t[n]:"ref"==n?s=t[n]:a[n]=t[n];if(arguments.length>3)for(i=[i],n=3;n<arguments.length;n++)i.push(o[n]);if(null!=i&&(a.children=i),"function"==typeof e&&null!=e.defaultProps)for(n in e.defaultProps)void 0===a[n]&&(a[n]=e.defaultProps[n]);return _(e,a,r,s,null)}function _(e,t,i,r,s){var n={type:e,props:t,key:i,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==s?++m.__v:s};return null!=m.vnode&&m.vnode(n),n}function A(e){return e.children}function q(e,t){this.props=e,this.context=t}function $(e,t){if(null==t)return e.__?$(e.__,e.__.__k.indexOf(e)+1):null;for(var i;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e)return i.__e;return"function"==typeof e.type?$(e):null}function T(e){var t,i;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e){e.__e=e.__c.base=i.__e;break}return T(e)}}function M(e){(!e.__d&&(e.__d=!0)&&g.push(e)&&!C.__r++||O!==m.debounceRendering)&&((O=m.debounceRendering)||y)(C)}function C(){for(var e;C.__r=g.length;)e=g.sort((function(e,t){return e.__v.__b-t.__v.__b})),g=[],e.some((function(e){var t,i,r,s,n,o;e.__d&&(n=(s=(t=e).__v).__e,(o=t.__P)&&(i=[],(r=k({},s)).__v=s.__v+1,L(o,s,r,t.__n,void 0!==o.ownerSVGElement,null!=s.__h?[n]:null,i,null==n?$(s):n,s.__h),B(i,s),s.__e!=n&&T(s)))}))}function E(e,t,i,r,s,n,o,a,l,p){var h,c,d,u,f,m,g,y=r&&r.__k||w,O=y.length;for(i.__k=[],h=0;h<t.length;h++)if(null!=(u=i.__k[h]=null==(u=t[h])||"boolean"==typeof u?null:"string"==typeof u||"number"==typeof u||"bigint"==typeof u?_(null,u,null,null,u):Array.isArray(u)?_(A,{children:u},null,null,null):u.__b>0?_(u.type,u.props,u.key,null,u.__v):u)){if(u.__=i,u.__b=i.__b+1,null===(d=y[h])||d&&u.key==d.key&&u.type===d.type)y[h]=void 0;else for(c=0;c<O;c++){if((d=y[c])&&u.key==d.key&&u.type===d.type){y[c]=void 0;break}d=null}L(e,u,d=d||v,s,n,o,a,l,p),f=u.__e,(c=u.ref)&&d.ref!=c&&(g||(g=[]),d.ref&&g.push(d.ref,null,u),g.push(c,u.__c||f,u)),null!=f?(null==m&&(m=f),"function"==typeof u.type&&null!=u.__k&&u.__k===d.__k?u.__d=l=R(u,l,e):l=Q(e,u,d,y,f,l),p||"option"!==i.type?"function"==typeof i.type&&(i.__d=l):e.value=""):l&&d.__e==l&&l.parentNode!=e&&(l=$(d))}for(i.__e=m,h=O;h--;)null!=y[h]&&("function"==typeof i.type&&null!=y[h].__e&&y[h].__e==i.__d&&(i.__d=$(r,h+1)),U(y[h],y[h]));if(g)for(h=0;h<g.length;h++)V(g[h],g[++h],g[++h])}function R(e,t,i){var r,s;for(r=0;r<e.__k.length;r++)(s=e.__k[r])&&(s.__=e,t="function"==typeof s.type?R(s,t,i):Q(i,s,s,e.__k,s.__e,t));return t}function D(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){D(e,t)})):t.push(e)),t}function Q(e,t,i,r,s,n){var o,a,l;if(void 0!==t.__d)o=t.__d,t.__d=void 0;else if(null==i||s!=n||null==s.parentNode)e:if(null==n||n.parentNode!==e)e.appendChild(s),o=null;else{for(a=n,l=0;(a=a.nextSibling)&&l<r.length;l+=2)if(a==s)break e;e.insertBefore(s,n),o=n}return void 0!==o?o:s.nextSibling}function j(e,t,i){"-"===t[0]?e.setProperty(t,i):e[t]=null==i?"":"number"!=typeof i||P.test(t)?i:i+"px"}function X(e,t,i,r,s){var n;e:if("style"===t)if("string"==typeof i)e.style.cssText=i;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)i&&t in i||j(e.style,t,"");if(i)for(t in i)r&&i[t]===r[t]||j(e.style,t,i[t])}else if("o"===t[0]&&"n"===t[1])n=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+n]=i,i?r||e.addEventListener(t,n?I:N,n):e.removeEventListener(t,n?I:N,n);else if("dangerouslySetInnerHTML"!==t){if(s)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==i?"":i;break e}catch(o){}"function"==typeof i||(null!=i&&(!1!==i||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,i):e.removeAttribute(t))}}function N(e){this.l[e.type+!1](m.event?m.event(e):e)}function I(e){this.l[e.type+!0](m.event?m.event(e):e)}function L(e,t,i,r,s,n,o,a,l){var p,h,c,d,u,f,g,y,O,b,P,S=t.type;if(void 0!==t.constructor)return null;null!=i.__h&&(l=i.__h,a=t.__e=i.__e,t.__h=null,n=[a]),(p=m.__b)&&p(t);try{e:if("function"==typeof S){if(y=t.props,O=(p=S.contextType)&&r[p.__c],b=p?O?O.props.value:p.__:r,i.__c?g=(h=t.__c=i.__c).__=h.__E:("prototype"in S&&S.prototype.render?t.__c=h=new S(y,b):(t.__c=h=new q(y,b),h.constructor=S,h.render=z),O&&O.sub(h),h.props=y,h.state||(h.state={}),h.context=b,h.__n=r,c=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=S.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=k({},h.__s)),k(h.__s,S.getDerivedStateFromProps(y,h.__s))),d=h.props,u=h.state,c)null==S.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==S.getDerivedStateFromProps&&y!==d&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(y,b),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(y,h.__s,b)||t.__v===i.__v){h.props=y,h.state=h.__s,t.__v!==i.__v&&(h.__d=!1),h.__v=t,t.__e=i.__e,t.__k=i.__k,t.__k.forEach((function(e){e&&(e.__=t)})),h.__h.length&&o.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(y,h.__s,b),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(d,u,f)}))}h.context=b,h.props=y,h.state=h.__s,(p=m.__r)&&p(t),h.__d=!1,h.__v=t,h.__P=e,p=h.render(h.props,h.state,h.context),h.state=h.__s,null!=h.getChildContext&&(r=k(k({},r),h.getChildContext())),c||null==h.getSnapshotBeforeUpdate||(f=h.getSnapshotBeforeUpdate(d,u)),P=null!=p&&p.type===A&&null==p.key?p.props.children:p,E(e,Array.isArray(P)?P:[P],t,i,r,s,n,o,a,l),h.base=t.__e,t.__h=null,h.__h.length&&o.push(h),g&&(h.__E=h.__=null),h.__e=!1}else null==n&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=function(e,t,i,r,s,n,o,a){var l,p,h,c,d=i.props,u=t.props,f=t.type,m=0;if("svg"===f&&(s=!0),null!=n)for(;m<n.length;m++)if((l=n[m])&&(l===e||(f?l.localName==f:3==l.nodeType))){e=l,n[m]=null;break}if(null==e){if(null===f)return document.createTextNode(u);e=s?document.createElementNS("http://www.w3.org/2000/svg",f):document.createElement(f,u.is&&u),n=null,a=!1}if(null===f)d===u||a&&e.data===u||(e.data=u);else{if(n=n&&w.slice.call(e.childNodes),p=(d=i.props||v).dangerouslySetInnerHTML,h=u.dangerouslySetInnerHTML,!a){if(null!=n)for(d={},c=0;c<e.attributes.length;c++)d[e.attributes[c].name]=e.attributes[c].value;(h||p)&&(h&&(p&&h.__html==p.__html||h.__html===e.innerHTML)||(e.innerHTML=h&&h.__html||""))}if(function(e,t,i,r,s){var n;for(n in i)"children"===n||"key"===n||n in t||X(e,n,null,i[n],r);for(n in t)s&&"function"!=typeof t[n]||"children"===n||"key"===n||"value"===n||"checked"===n||i[n]===t[n]||X(e,n,t[n],i[n],r)}(e,u,d,s,a),h)t.__k=[];else if(m=t.props.children,E(e,Array.isArray(m)?m:[m],t,i,r,s&&"foreignObject"!==f,n,o,e.firstChild,a),null!=n)for(m=n.length;m--;)null!=n[m]&&x(n[m]);a||("value"in u&&void 0!==(m=u.value)&&(m!==e.value||"progress"===f&&!m)&&X(e,"value",m,d.value,!1),"checked"in u&&void 0!==(m=u.checked)&&m!==e.checked&&X(e,"checked",m,d.checked,!1))}return e}(i.__e,t,i,r,s,n,o,l);(p=m.diffed)&&p(t)}catch(_){t.__v=null,(l||null!=n)&&(t.__e=a,t.__h=!!l,n[n.indexOf(a)]=null),m.__e(_,t,i)}}function B(e,t){m.__c&&m.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(i){m.__e(i,t.__v)}}))}function V(e,t,i){try{"function"==typeof e?e(t):e.current=t}catch(r){m.__e(r,i)}}function U(e,t,i){var r,s,n;if(m.unmount&&m.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||V(r,null,t)),i||"function"==typeof e.type||(i=null!=(s=e.__e)),e.__e=e.__d=void 0,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){m.__e(o,t)}r.base=r.__P=null}if(r=e.__k)for(n=0;n<r.length;n++)r[n]&&U(r[n],t,i);null!=s&&x(s)}function z(e,t,i){return this.constructor(e,i)}function W(e,t,i){var r,s,n;m.__&&m.__(e,t),s=(r="function"==typeof i)?null:i&&i.__k||t.__k,n=[],L(t,e=(!r&&i||t).__k=S(A,null,[e]),s||v,v,void 0!==t.ownerSVGElement,!r&&i?[i]:s?null:t.firstChild?w.slice.call(t.childNodes):null,n,!r&&i?i:s?s.__e:t.firstChild,r),B(n,e)}function H(e,t){W(e,t,H)}function F(e,t,i){var r,s,n,o=arguments,a=k({},e.props);for(n in t)"key"==n?r=t[n]:"ref"==n?s=t[n]:a[n]=t[n];if(arguments.length>3)for(i=[i],n=3;n<arguments.length;n++)i.push(o[n]);return null!=i&&(a.children=i),_(e.type,a,r||e.key,s||e.ref,null)}function G(e,t){var i={__c:t="__cC"+b++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var i,r;return this.getChildContext||(i=[],(r={})[t]=this,this.getChildContext=function(){return r},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&i.some(M)},this.sub=function(e){i.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){i.splice(i.indexOf(e),1),t&&t.call(e)}}),e.children}};return i.Provider.__=i.Consumer.contextType=i}m={__e:function(e,t){for(var i,r,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&null!=r.getDerivedStateFromError&&(i.setState(r.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e),s=i.__d),s)return i.__E=i}catch(n){e=n}throw e},__v:0},q.prototype.setState=function(e,t){var i;i=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=k({},this.state),"function"==typeof e&&(e=e(k({},i),this.props)),e&&k(i,e),null!=e&&this.__v&&(t&&this.__h.push(t),M(this))},q.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),M(this))},q.prototype.render=A,g=[],y="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,C.__r=0,b=0;var K,Z,Y,J=0,ee=[],te=m.__b,ie=m.__r,re=m.diffed,se=m.__c,ne=m.unmount;function oe(e,t){m.__h&&m.__h(Z,e,J||t),J=0;var i=Z.__H||(Z.__H={__:[],__h:[]});return e>=i.__.length&&i.__.push({}),i.__[e]}function ae(e){return J=1,le(ve,e)}function le(e,t,i){var r=oe(K++,2);return r.t=e,r.__c||(r.__=[i?i(t):ve(void 0,t),function(e){var t=r.t(r.__[0],e);r.__[0]!==t&&(r.__=[t,r.__[1]],r.__c.setState({}))}],r.__c=Z),r.__}function pe(e,t){var i=oe(K++,3);!m.__s&&be(i.__H,t)&&(i.__=e,i.__H=t,Z.__H.__h.push(i))}function he(e,t){var i=oe(K++,4);!m.__s&&be(i.__H,t)&&(i.__=e,i.__H=t,Z.__h.push(i))}function ce(e){return J=5,de((function(){return{current:e}}),[])}function de(e,t){var i=oe(K++,7);return be(i.__H,t)&&(i.__=e(),i.__H=t,i.__h=e),i.__}function ue(e,t){return J=8,de((function(){return e}),t)}function fe(e){var t=Z.context[e.__c],i=oe(K++,9);return i.__c=e,t?(null==i.__&&(i.__=!0,t.sub(Z)),t.props.value):e.__}function me(){ee.forEach((function(e){if(e.__P)try{e.__H.__h.forEach(ye),e.__H.__h.forEach(Oe),e.__H.__h=[]}catch(t){e.__H.__h=[],m.__e(t,e.__v)}})),ee=[]}m.__b=function(e){Z=null,te&&te(e)},m.__r=function(e){ie&&ie(e),K=0;var t=(Z=e.__c).__H;t&&(t.__h.forEach(ye),t.__h.forEach(Oe),t.__h=[])},m.diffed=function(e){re&&re(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(1!==ee.push(t)&&Y===m.requestAnimationFrame||((Y=m.requestAnimationFrame)||function(e){var t,i=function(){clearTimeout(r),ge&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(i,100);ge&&(t=requestAnimationFrame(i))})(me)),Z=void 0},m.__c=function(e,t){t.some((function(e){try{e.__h.forEach(ye),e.__h=e.__h.filter((function(e){return!e.__||Oe(e)}))}catch(i){t.some((function(e){e.__h&&(e.__h=[])})),t=[],m.__e(i,e.__v)}})),se&&se(e,t)},m.unmount=function(e){ne&&ne(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(ye)}catch(i){m.__e(i,t.__v)}};var ge="function"==typeof requestAnimationFrame;function ye(e){var t=Z;"function"==typeof e.__c&&e.__c(),Z=t}function Oe(e){var t=Z;e.__c=e.__(),Z=t}function be(e,t){return!e||e.length!==t.length||t.some((function(t,i){return t!==e[i]}))}function ve(e,t){return"function"==typeof t?t(e):t}function we(e,t){for(var i in t)e[i]=t[i];return e}function Pe(e,t){for(var i in e)if("__source"!==i&&!(i in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function ke(e){this.props=e}(ke.prototype=new q).isPureReactComponent=!0,ke.prototype.shouldComponentUpdate=function(e,t){return Pe(this.props,e)||Pe(this.state,t)};var xe=m.__b;m.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),xe&&xe(e)};var Se="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function _e(e){function t(t,i){var r=we({},t);return delete r.ref,e(r,(i=t.ref||i)&&("object"!=typeof i||"current"in i)?i:null)}return t.$$typeof=Se,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Ae=function(e,t){return null==e?null:D(D(e).map(t))},qe={map:Ae,forEach:Ae,count:function(e){return e?D(e).length:0},only:function(e){var t=D(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:D},$e=m.__e;m.__e=function(e,t,i){if(e.then)for(var r,s=t;s=s.__;)if((r=s.__c)&&r.__c)return null==t.__e&&(t.__e=i.__e,t.__k=i.__k),r.__c(e,t);$e(e,t,i)};var Te=m.unmount;function Me(){this.__u=0,this.t=null,this.__b=null}function Ce(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function Ee(){this.u=null,this.o=null}m.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&!0===e.__h&&(e.type=null),Te&&Te(e)},(Me.prototype=new q).__c=function(e,t){var i=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(i);var s=Ce(r.__v),n=!1,o=function(){n||(n=!0,i.__R=null,s?s(a):a())};i.__R=o;var a=function(){if(!--r.__u){if(r.state.__e){var e=r.state.__e;r.__v.__k[0]=function e(t,i,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map((function(t){return e(t,i,r)})),t.__c&&t.__c.__P===i&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},l=!0===t.__h;r.__u++||l||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(o,o)},Me.prototype.componentWillUnmount=function(){this.t=[]},Me.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var i=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=function e(t,i,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),t.__c.__H=null),null!=(t=we({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=i),t.__c=null),t.__k=t.__k&&t.__k.map((function(t){return e(t,i,r)}))),t}(this.__b,i,r.__O=r.__P)}this.__b=null}var s=t.__e&&S(A,null,e.fallback);return s&&(s.__h=null),[S(A,null,t.__e?null:e.children),s]};var Re=function(e,t,i){if(++i[1]===i[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(i=e.u;i;){for(;i.length>3;)i.pop()();if(i[1]<i[0])break;e.u=i=i[2]}};function De(e){return this.getChildContext=function(){return e.context},e.children}function Qe(e){var t=this,i=e.i;t.componentWillUnmount=function(){W(null,t.l),t.l=null,t.i=null},t.i&&t.i!==i&&t.componentWillUnmount(),e.__v?(t.l||(t.i=i,t.l={nodeType:1,parentNode:i,childNodes:[],appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,i){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),W(S(De,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}(Ee.prototype=new q).__e=function(e){var t=this,i=Ce(t.__v),r=t.o.get(e);return r[0]++,function(s){var n=function(){t.props.revealOrder?(r.push(s),Re(t,e,r)):s()};i?i(n):n()}},Ee.prototype.render=function(e){this.u=null,this.o=new Map;var t=D(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var i=t.length;i--;)this.o.set(t[i],this.u=[1,0,this.u]);return e.children},Ee.prototype.componentDidUpdate=Ee.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,i){Re(e,i,t)}))};var je="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Xe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ne=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(e)};q.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(q.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var Ie=m.event;function Le(){}function Be(){return this.cancelBubble}function Ve(){return this.defaultPrevented}m.event=function(e){return Ie&&(e=Ie(e)),e.persist=Le,e.isPropagationStopped=Be,e.isDefaultPrevented=Ve,e.nativeEvent=e};var Ue,ze={configurable:!0,get:function(){return this.class}},We=m.vnode;m.vnode=function(e){var t=e.type,i=e.props,r=i;if("string"==typeof t){for(var s in r={},i){var n=i[s];"value"===s&&"defaultValue"in i&&null==n||("defaultValue"===s&&"value"in i&&null==i.value?s="value":"download"===s&&!0===n?n="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+t)&&!Ne(i.type)?s="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(s)?s=s.toLowerCase():Xe.test(s)?s=s.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===n&&(n=void 0),r[s]=n)}"select"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=D(i.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==t&&null!=r.defaultValue&&(r.value=D(i.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),e.props=r}t&&i.class!=i.className&&(ze.enumerable="className"in i,null!=i.className&&(r.class=i.className),Object.defineProperty(r,"className",ze)),e.$$typeof=je,We&&We(e)};var He=m.__r;m.__r=function(e){He&&He(e),Ue=e.__c};var Fe={ReactCurrentDispatcher:{current:{readContext:function(e){return Ue.__n[e.__c].props.value}}}};function Ge(e){return!!e&&e.$$typeof===je}"object"==typeof performance&&"function"==typeof performance.now&&performance.now.bind(performance);const Ke={useState:ae,useReducer:le,useEffect:pe,useLayoutEffect:he,useRef:ce,useImperativeHandle:function(e,t,i){J=6,he((function(){"function"==typeof e?e(t()):e&&(e.current=t())}),null==i?i:i.concat(e))},useMemo:de,useCallback:ue,useContext:fe,useDebugValue:function(e,t){m.useDebugValue&&m.useDebugValue(t?t(e):e)},version:"16.8.0",Children:qe,render:function(e,t,i){return null==t.__k&&(t.textContent=""),W(e,t),"function"==typeof i&&i(),e?e.__c:null},hydrate:function(e,t,i){return H(e,t),"function"==typeof i&&i(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(W(null,e),!0)},createPortal:function(e,t){return S(Qe,{__v:e,i:t})},createElement:S,createContext:G,createFactory:function(e){return S.bind(null,e)},cloneElement:function(e){return Ge(e)?F.apply(null,arguments):e},createRef:function(){return{current:null}},Fragment:A,isValidElement:Ge,findDOMNode:function(e){return e&&(e.base||1===e.nodeType&&e)||null},Component:q,PureComponent:ke,memo:function(e,t){function i(e){var i=this.props.ref,r=i==e.ref;return!r&&i&&(i.call?i(null):i.current=null),t?!t(this.props,e)||!r:Pe(this.props,e)}function r(t){return this.shouldComponentUpdate=i,S(e,t)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r},forwardRef:_e,unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:A,Suspense:Me,SuspenseList:Ee,lazy:function(e){var t,i,r;function s(s){if(t||(t=e()).then((function(e){i=e.default||e}),(function(e){r=e})),r)throw r;if(!i)throw t;return S(i,s)}return s.displayName="Lazy",s.__f=!0,s},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Fe};function Ze(e,t,i,r,s){var n={};for(var o in t)"ref"!=o&&(n[o]=t[o]);var a,l,p={type:e,props:n,key:i,ref:t&&t.ref,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:++m.__v,__source:r,__self:s};if("function"==typeof e&&(a=e.defaultProps))for(l in a)void 0===n[l]&&(n[l]=a[l]);return m.vnode&&m.vnode(p),p}var Ye=function(e){return Ze("svg",{...e,children:Ze("path",{fillRule:"evenodd",d:"m11.657 8-4.95 4.95a1 1 0 0 1-1.414-1.414L8.828 8 5.293 4.464A1 1 0 1 1 6.707 3.05L11.657 8Z"})})};Ye.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var Je=function(e){return Ze("svg",{...e,children:Ze("path",{fillRule:"evenodd",d:"M9 13V9h4a1 1 0 0 0 0-2H9V3a1 1 0 1 0-2 0v4H3a1 1 0 1 0 0 2h4v4a1 1 0 0 0 2 0Z"})})};Je.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var et=function(e){return Ze("svg",{...e,children:Ze("path",{fillRule:"evenodd",d:"M12 6v7c0 1.1-.4 1.55-1.5 1.55h-5C4.4 14.55 4 14.1 4 13V6h8Zm-1.5 1.5h-5v4.3c0 .66.5 1.2 1.111 1.2H9.39c.611 0 1.111-.54 1.111-1.2V7.5ZM13 3h-2l-1-1H6L5 3H3v1.5h10V3Z"})})};et.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var tt=function(e){return Ze("svg",{...e,children:Ze("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.637 12.637v-4.72h1.362v4.721c0 .36-.137.676-.411.95-.275.275-.591.412-.95.412H3.362c-.38 0-.703-.132-.967-.396A1.315 1.315 0 0 1 2 12.638V3.362c0-.38.132-.703.396-.967S2.982 2 3.363 2h4.553v1.363H3.363v9.274h9.274ZM14 2H9.28l-.001 1.362h2.408L5.065 9.984l.95.95 6.622-6.622v2.409H14V2Z",fill:"#818798"})})};function it(e){const{element:t,headerProvider:i}=e,{getElementIcon:r,getDocumentationRef:s,getElementLabel:n,getTypeLabel:o}=i,a=n(t),l=o(t),p=s&&s(t),h=r(t);return Ze("div",{class:"bio-properties-panel-header",children:[Ze("div",{class:"bio-properties-panel-header-icon",children:h&&Ze(h,{width:"32",height:"32",viewBox:"0 0 32 32"})}),Ze("div",{class:"bio-properties-panel-header-labels",children:[Ze("div",{title:l,class:"bio-properties-panel-header-type",children:l}),a?Ze("div",{title:a,class:"bio-properties-panel-header-label",children:a}):null]}),Ze("div",{class:"bio-properties-panel-header-actions",children:p?Ze("a",{rel:"noopener",class:"bio-properties-panel-header-link",href:p,title:"Open documentation",target:"_blank",children:Ze(tt,{})}):null})]})}tt.defaultProps={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};const rt=G({description:{},getDescriptionForId:()=>{}}),st=G({errors:{}}),nt=G({eventBus:null}),ot=G({layout:{},setLayout:()=>{},getLayoutForKey:()=>{},setLayoutForKey:()=>{}});function at(e){const{errors:t}=fe(st);return t[e]}function lt(e,t,i){const r=fe(nt);i||({eventBus:i}=r);const s=ce(!1);i&&!s.current&&i.on(e,t),pe((()=>(i&&s.current&&i.on(e,t),s.current=!0,()=>{i&&i.off(e,t)})),[t,e,i])}function pt(e,t){const{getLayoutForKey:i,setLayoutForKey:r}=fe(ot),s=i(e,t),[n,o]=ae(s);return[n,t=>{o(t),r(e,t)}]}function ht(e){const t=ce();return pe((()=>{t.current=e})),t.current}function ct(e){const{onShow:t}=fe(ot),r=ce(),s=ce(!1),n=ue((i=>{i.id===e&&(t(),s.current||(s.current=!0))}),[e]);return pe((()=>{s.current&&r.current&&(i(r.current.focus)&&r.current.focus(),i(r.current.select)&&r.current.select(),s.current=!1)})),lt("propertiesPanel.showEntry",n),r}function dt(e,t,i){pe((()=>{const r=IntersectionObserver;if(!r)return;let s;if(e.current){const n=c(t);s=new r((e=>{e.forEach((e=>{e.intersectionRatio<1?i(!0):1===e.intersectionRatio&&i(!1)}))}),{root:n,rootMargin:"0px 0px 999999% 0px",threshold:[1]}),s.observe(e.current)}return()=>{e.current&&s&&s.unobserve(e.current)}}),[e,t,i])}function ut(e){const{element:t,entries:r=[],id:s,label:n,shouldOpen:o=!1}=e,a=ce(null),[l,p]=pt(["groups",s,"open"],o),d=ue((()=>p(!0)),[p]),[u,f]=ae(!1),[m,g]=ae(!1);pe((()=>{const e=r.find((e=>{const{id:t,isEdited:r}=e,s=c(`[data-entry-id="${t}"]`);if(!i(r)||!s)return!1;return r(c(".bio-properties-panel-input",s))}));f(e)}),[r]),dt(a,"div.bio-properties-panel-scroll-container",g);const y={...fe(ot),onShow:d};return Ze("div",{class:"bio-properties-panel-group","data-group-id":"group-"+s,ref:a,children:[Ze("div",{class:h("bio-properties-panel-group-header",u?"":"empty",l?"open":"",m&&l?"sticky":""),onClick:()=>p(!l),children:[Ze("div",{title:n,class:"bio-properties-panel-group-header-title",children:n}),Ze("div",{class:"bio-properties-panel-group-header-buttons",children:[u&&Ze(ft,{}),Ze("button",{title:"Toggle section",class:"bio-properties-panel-group-header-button bio-properties-panel-arrow",children:Ze(Ye,{class:l?"bio-properties-panel-arrow-down":"bio-properties-panel-arrow-right"})})]})]}),Ze("div",{class:h("bio-properties-panel-group-entries",l?"open":""),children:Ze(ot.Provider,{value:y,children:r.map((e=>{const{component:i,id:r}=e;return S(i,{...e,element:t,key:r})}))})})]})}function ft(){return Ze("div",{title:"Section contains data",class:"bio-properties-panel-dot"})}function mt(e){const{text:t,icon:i}=e;return Ze("div",{class:"bio-properties-panel open",children:Ze("section",{class:"bio-properties-panel-placeholder",children:[i&&Ze(i,{class:"bio-properties-panel-placeholder-icon"}),Ze("p",{class:"bio-properties-panel-placeholder-text",children:t})]})})}const gt={open:!0},yt={};function Ot(e){const{element:t,headerProvider:i,placeholderProvider:s,groups:n,layoutConfig:p={},layoutChanged:c,descriptionConfig:d={},descriptionLoaded:u,eventBus:f}=e,[m,g]=ae((y=p,{...gt,...y}));var y;pe((()=>{"function"==typeof c&&c(m)}),[m,c]);const O={layout:m,setLayout:g,getLayoutForKey:(e,t)=>o(m,e,t),setLayoutForKey:(e,t)=>{const i=a({},m);l(i,e,t),g(i)}},b=function(e){return{...yt,...e}}(d);"function"==typeof u&&u(b);const v={description:b,getDescriptionForId:(e,t)=>b[e]&&b[e](t)},[w,P]=ae({});lt("propertiesPanel.setErrors",(({errors:e})=>P(e)),f);const k={errors:w},x={eventBus:f},_={element:t};return s&&!t?Ze(mt,{...s.getEmpty()}):s&&r(t)?Ze(mt,{...s.getMultiple()}):Ze(ot.Provider,{value:_,children:Ze(st.Provider,{value:k,children:Ze(rt.Provider,{value:v,children:Ze(ot.Provider,{value:O,children:Ze(nt.Provider,{value:x,children:Ze("div",{class:h("bio-properties-panel",m.open?"open":""),children:[Ze(it,{element:t,headerProvider:i}),Ze("div",{class:"bio-properties-panel-scroll-container",children:n.map((e=>{const{component:i=ut,id:r}=e;return S(i,{...e,key:r,element:t})}))})]})})})})})})}function bt(e){const{element:t,entries:r=[],id:s,label:n,open:o,remove:a}=e,[l,p]=ae(o),{onShow:c}=fe(ot),d={...fe(ot),onShow:ue((()=>{p(!0),i(c)&&c()}),[c,p])},u="<empty>";return Ze("div",{"data-entry-id":s,class:h("bio-properties-panel-collapsible-entry",l?"open":""),children:[Ze("div",{class:"bio-properties-panel-collapsible-entry-header",onClick:()=>p(!l),children:[Ze("div",{title:n||u,class:h("bio-properties-panel-collapsible-entry-header-title",!n&&"empty"),children:n||u}),Ze("button",{title:"Toggle list item",class:"bio-properties-panel-arrow  bio-properties-panel-collapsible-entry-arrow",children:Ze(Ye,{class:l?"bio-properties-panel-arrow-down":"bio-properties-panel-arrow-right"})}),a?Ze("button",{title:"Delete item",class:"bio-properties-panel-remove-entry",onClick:a,children:Ze(et,{})}):null]}),Ze("div",{class:h("bio-properties-panel-collapsible-entry-entries",l?"open":""),children:Ze(ot.Provider,{value:d,children:r.map((e=>{const{component:i,id:r}=e;return S(i,{...e,element:t,key:r})}))})})]})}function vt(e){const{autoFocusEntry:t,autoOpen:r}=e;return pe((()=>{if(r&&t){const e=c(`[data-entry-id="${t}"]`),r=c(".bio-properties-panel-input",e);r&&(i(r.select)?r.select():i(r.focus)&&r.focus())}}),[r,t]),Ze("div",{class:"bio-properties-panel-list-item",children:Ze(bt,{...e,open:r})})}const wt=()=>{};function Pt(e){const{add:t,element:i,id:r,items:s,label:n,shouldOpen:o=!0,shouldSort:a=!0}=e,l=ce(null),[p,c]=pt(["groups",r,"open"],!1),[d,u]=ae(!1),f=ue((()=>c(!0)),[c]),[m,g]=ae([]),[y,O]=ae(!1),b=ht(s),v=ht(i),w=i!==v,P=!w&&(a||o);w&&g(St(a?kt(s):s)),pe((()=>{b&&a||g(St(s))}),[s,i]),pe((()=>{if(P&&b&&s.length>b.length){let e=[];s.forEach((t=>{m.includes(t.id)||e.push(t.id)}));let t=m;!p&&o&&(k(),a&&(t=St(kt(s)))),t=t.filter((t=>!e.includes(t))),a?t.unshift(...e):t.push(...e),g(t),O(!0)}else O(!1)}),[s,p,P]),pe((()=>{a&&p&&!y&&g(St(kt(s)))}),[p,a]),pe((()=>{if(P&&b&&s.length<b.length){let e=[];m.forEach((t=>{xt(s,t)&&e.push(t)})),g(e)}}),[s,P]),dt(l,"div.bio-properties-panel-scroll-container",u);const k=()=>c(!p),x=!!s.length,_={...fe(ot),onShow:f};return Ze("div",{class:"bio-properties-panel-group","data-group-id":"group-"+r,ref:l,children:[Ze("div",{class:h("bio-properties-panel-group-header",x?"":"empty",x&&p?"open":"",d&&p?"sticky":""),onClick:x?k:wt,children:[Ze("div",{title:n,class:"bio-properties-panel-group-header-title",children:n}),Ze("div",{class:"bio-properties-panel-group-header-buttons",children:[t?Ze("button",{title:"Create new list item",class:"bio-properties-panel-group-header-button bio-properties-panel-add-entry",onClick:t,children:[Ze(Je,{}),x?null:Ze("span",{class:"bio-properties-panel-add-entry-label",children:"Create"})]}):null,x?Ze("div",{title:`List contains ${s.length} item${1!=s.length?"s":""}`,class:"bio-properties-panel-list-badge",children:s.length}):null,x?Ze("button",{title:"Toggle section",class:"bio-properties-panel-group-header-button bio-properties-panel-arrow",children:Ze(Ye,{class:p?"bio-properties-panel-arrow-down":"bio-properties-panel-arrow-right"})}):null]})]}),Ze("div",{class:h("bio-properties-panel-list",p&&x?"open":""),children:Ze(ot.Provider,{value:_,children:m.map(((e,t)=>{const r=xt(s,e);if(!r)return;const{id:n}=r,o=y&&(a?0===t:t===m.length-1);return S(vt,{...r,autoOpen:o,element:i,index:t,key:n})}))})})]})}function kt(e){return s(e,(e=>e.label.toLowerCase()))}function xt(e,t){return n(e,(e=>e.id===t))}function St(e){return e.map((e=>e.id))}function _t(e){const{element:t,forId:i,value:r}=e,s=function(e,t){const{getDescriptionForId:i}=fe(rt);return i(e,t)}(i,t),n=r||s;if(n)return Ze("div",{class:"bio-properties-panel-description",children:n})}function At(e){const{id:t,label:i,onChange:r,disabled:s,value:n=!1}=e,[o,a]=ae(n);pe((()=>{n!==o&&a(n)}),[n]);return Ze("div",{class:"bio-properties-panel-checkbox",children:[Ze("input",{ref:ct(t),id:Tt(t),name:t,type:"checkbox",class:"bio-properties-panel-input",onChange:e=>{(({target:e})=>{r(e.checked)})(e),a(e.target.value)},checked:o,disabled:s}),Ze("label",{for:Tt(t),class:"bio-properties-panel-label",children:i})]})}function qt(e){const{element:t,id:i,description:r,label:s,getValue:n,setValue:o,disabled:a}=e,l=n(t),p=at(i);return Ze("div",{class:"bio-properties-panel-entry bio-properties-panel-checkbox-entry","data-entry-id":i,children:[Ze(At,{disabled:a,id:i,label:s,onChange:o,value:l},t),p&&Ze("div",{class:"bio-properties-panel-error",children:p}),Ze(_t,{forId:i,element:t,value:r})]})}function $t(e){return e&&!!e.checked}function Tt(e){return`bio-properties-panel-${e}`}class Mt{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(t,this.length,r,1),Et.from(r,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i,0),Et.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Qt(this),s=new Qt(e);for(let n=t,o=t;;){if(r.next(n),s.next(n),n=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(o+=r.value.length,r.done||o>=i)return!0}}iter(e=1){return new Qt(this,e)}iterRange(e,t=this.length){return new jt(this,e,t)}iterLines(e,t){let i;if(null==e)i=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Xt(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new Ct(e):Et.from(Ct.split(e,[])):Mt.empty}}class Ct extends Mt{constructor(e,t=function(e){let t=-1;for(let i of e)t+=i.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,r){for(let s=0;;s++){let n=this.text[s],o=r+n.length;if((t?i:o)>=e)return new Nt(r,o,i,n);r=o+1,i++}}decompose(e,t,i,r){let s=e<=0&&t>=this.length?this:new Ct(Dt(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=i.pop(),t=Rt(s.text,e.text.slice(),0,s.length);if(t.length<=32)i.push(new Ct(t,e.length+s.length));else{let e=t.length>>1;i.push(new Ct(t.slice(0,e)),new Ct(t.slice(e)))}}else i.push(s)}replace(e,t,i){if(!(i instanceof Ct))return super.replace(e,t,i);let r=Rt(this.text,Rt(i.text,Dt(this.text,0,e)),t),s=this.length+i.length-(t-e);return r.length<=32?new Ct(r,s):Et.from(Ct.split(r,[]),s)}sliceString(e,t=this.length,i="\n"){let r="";for(let s=0,n=0;s<=t&&n<this.text.length;n++){let o=this.text[n],a=s+o.length;s>e&&n&&(r+=i),e<a&&t>s&&(r+=o.slice(Math.max(0,e-s),t-s)),s=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,32==i.length&&(t.push(new Ct(i,r)),i=[],r=-1);return r>-1&&t.push(new Ct(i,r)),t}}class Et extends Mt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,t,i,r){for(let s=0;;s++){let n=this.children[s],o=r+n.length,a=i+n.lines-1;if((t?a:o)>=e)return n.lineInner(e,t,i,r);r=o+1,i=a+1}}decompose(e,t,i,r){for(let s=0,n=0;n<=t&&s<this.children.length;s++){let o=this.children[s],a=n+o.length;if(e<=a&&t>=n){let s=r&((n<=e?1:0)|(a>=t?2:0));n>=e&&a<=t&&!s?i.push(o):o.decompose(e-n,t-n,i,s)}n=a+1}}replace(e,t,i){if(i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let n=this.children[r],o=s+n.length;if(e>=s&&t<=o){let a=n.replace(e-s,t-s,i),l=this.lines-n.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let s=this.children.slice();return s[r]=a,new Et(s,this.length-(t-e)+i.length)}return super.replace(s,o,a)}s=o+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i="\n"){let r="";for(let s=0,n=0;s<this.children.length&&n<=t;s++){let o=this.children[s],a=n+o.length;n>e&&s&&(r+=i),e<a&&t>n&&(r+=o.sliceString(e-n,t-n,i)),n=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Et))return 0;let i=0,[r,s,n,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,s+=t){if(r==n||s==o)return i;let a=this.children[r],l=e.children[s];if(a!=l)return i+a.scanIdentical(l,t);i+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let i=[];for(let t of e)t.flatten(i);return new Ct(i,t)}let r=Math.max(32,i>>5),s=r<<1,n=r>>1,o=[],a=0,l=-1,p=[];function h(e){let t;if(e.lines>s&&e instanceof Et)for(let i of e.children)h(i);else e.lines>n&&(a>n||!a)?(c(),o.push(e)):e instanceof Ct&&a&&(t=p[p.length-1])instanceof Ct&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,p[p.length-1]=new Ct(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&c(),a+=e.lines,l+=e.length+1,p.push(e))}function c(){0!=a&&(o.push(1==p.length?p[0]:Et.from(p,l)),l=-1,a=p.length=0)}for(let d of e)h(d);return c(),1==o.length?o[0]:new Et(o,t)}}function Rt(e,t,i=0,r=1e9){for(let s=0,n=0,o=!0;n<e.length&&s<=r;n++){let a=e[n],l=s+a.length;l>=i&&(l>r&&(a=a.slice(0,r-s)),s<i&&(a=a.slice(i-s)),o?(t[t.length-1]+=a,o=!1):t.push(a)),s=l+1}return t}function Dt(e,t,i){return Rt(e,[""],t,i)}Mt.empty=new Ct([""],0);class Qt{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ct?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],n=s>>1,o=r instanceof Ct?r.text.length:r.children.length;if(n==(t>0?o:0)){if(0==i)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&s)==(t>0?0:1)){if(this.offsets[i]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof Ct){let s=r.text[n+(t<0?-1:0)];if(this.offsets[i]+=t,s.length>Math.max(0,e))return this.value=0==e?s:t>0?s.slice(e):s.slice(0,s.length-e),this;e-=s.length}else{let s=r.children[n+(t<0?-1:0)];e>s.length?(e-=s.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(s),this.offsets.push(t>0?1:(s instanceof Ct?s.text.length:s.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class jt{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new Qt(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=i?r:t<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Xt{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:r}=this.inner.next(e);return t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(Mt.prototype[Symbol.iterator]=function(){return this.iter()},Qt.prototype[Symbol.iterator]=jt.prototype[Symbol.iterator]=Xt.prototype[Symbol.iterator]=function(){return this});class Nt{constructor(e,t,i,r){this.from=e,this.to=t,this.number=i,this.text=r}get length(){return this.to-this.from}}let It="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let vf=1;vf<It.length;vf++)It[vf]+=It[vf-1];function Lt(e){for(let t=1;t<It.length;t+=2)if(It[t]>e)return It[t-1]<=e;return!1}function Bt(e){return e>=127462&&e<=127487}function Vt(e,t,i=!0,r=!0){return(i?Ut:zt)(e,t,r)}function Ut(e,t,i){if(t==e.length)return t;t&&Wt(e.charCodeAt(t))&&Ht(e.charCodeAt(t-1))&&t--;let r=Ft(e,t);for(t+=Kt(r);t<e.length;){let s=Ft(e,t);if(8205==r||8205==s||i&&Lt(s))t+=Kt(s),r=s;else{if(!Bt(s))break;{let i=0,r=t-2;for(;r>=0&&Bt(Ft(e,r));)i++,r-=2;if(i%2==0)break;t+=2}}}return t}function zt(e,t,i){for(;t>0;){let r=Ut(e,t-2,i);if(r<t)return r;t--}return 0}function Wt(e){return e>=56320&&e<57344}function Ht(e){return e>=55296&&e<56320}function Ft(e,t){let i=e.charCodeAt(t);if(!Ht(i)||t+1==e.length)return i;let r=e.charCodeAt(t+1);return Wt(r)?r-56320+(i-55296<<10)+65536:i}function Gt(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function Kt(e){return e<65536?1:2}const Zt=/\r\n?|\n/;var Yt=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(Yt||(Yt={}));class Jt{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,r=0;t<this.sections.length;){let s=this.sections[t++],n=this.sections[t++];n<0?(e(i,r,s),r+=s):r+=n,i+=s}}iterChangedRanges(e,t=!1){ri(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];r<0?e.push(i,r):e.push(r,i)}return new Jt(e)}composeDesc(e){return this.empty?e:e.empty?this:ni(this,e)}mapDesc(e,t=!1){return e.empty?this:si(this,e,t)}mapPos(e,t=-1,i=Yt.Simple){let r=0,s=0;for(let n=0;n<this.sections.length;){let o=this.sections[n++],a=this.sections[n++],l=r+o;if(a<0){if(l>e)return s+(e-r);s+=o}else{if(i!=Yt.Simple&&l>=e&&(i==Yt.TrackDel&&r<e&&l>e||i==Yt.TrackBefore&&r<e||i==Yt.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!o)return e==r||t<0?s:s+a;s+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,t=e){for(let i=0,r=0;i<this.sections.length&&r<=t;){let s=r+this.sections[i++];if(this.sections[i++]>=0&&r<=t&&s>=e)return!(r<e&&s>t)||"cover";r=s}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Jt(e)}static create(e){return new Jt(e)}}class ei extends Jt{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ri(this,((t,i,r,s,n)=>e=e.replace(r,r+(i-t),n)),!1),e}mapDesc(e,t=!1){return si(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,s=0;r<t.length;r+=2){let n=t[r],o=t[r+1];if(o>=0){t[r]=o,t[r+1]=n;let a=r>>1;for(;i.length<a;)i.push(Mt.empty);i.push(n?e.slice(s,s+n):Mt.empty)}s+=n}return new ei(t,i)}compose(e){return this.empty?e:e.empty?this:ni(this,e,!0)}map(e,t=!1){return e.empty?this:si(this,e,t,!0)}iterChanges(e,t=!1){ri(this,e,t)}get desc(){return Jt.create(this.sections)}filter(e){let t=[],i=[],r=[],s=new oi(this);e:for(let n=0,o=0;;){let a=n==e.length?1e9:e[n++];for(;o<a||o==a&&0==s.len;){if(s.done)break e;let e=Math.min(s.len,a-o);ti(r,e,-1);let n=-1==s.ins?-1:0==s.off?s.ins:0;ti(t,e,n),n>0&&ii(i,t,s.text),s.forward(e),o+=e}let l=e[n++];for(;o<l;){if(s.done)break e;let e=Math.min(s.len,l-o);ti(t,e,-1),ti(r,e,-1==s.ins?-1:0==s.off?s.ins:0),s.forward(e),o+=e}}return{changes:new ei(t,i),filtered:Jt.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],r=this.sections[t+1];r<0?e.push(i):0==r?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let r=[],s=[],n=0,o=null;function a(e=!1){if(!e&&!r.length)return;n<t&&ti(r,t-n,-1);let i=new ei(r,s);o=o?o.compose(i.map(o)):i,r=[],s=[],n=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof ei){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),o=o?o.compose(l.map(o)):l}else{let{from:e,to:o=e,insert:p}=l;if(e>o||e<0||o>t)throw new RangeError(`Invalid change range ${e} to ${o} (in doc of length ${t})`);let h=p?"string"==typeof p?Mt.of(p.split(i||Zt)):p:Mt.empty,c=h.length;if(e==o&&0==c)return;e<n&&a(),e>n&&ti(r,e-n,-1),ti(r,o-e,c),ii(s,r,h),n=o}}(e),a(!o),o}static empty(e){return new ei(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if("number"==typeof s)t.push(s,-1);else{if(!Array.isArray(s)||"number"!=typeof s[0]||s.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==s.length)t.push(s[0],0);else{for(;i.length<r;)i.push(Mt.empty);i[r]=Mt.of(s.slice(1)),t.push(s[0],i[r].length)}}}return new ei(t,i)}static createSet(e,t){return new ei(e,t)}}function ti(e,t,i,r=!1){if(0==t&&i<=0)return;let s=e.length-2;s>=0&&i<=0&&i==e[s+1]?e[s]+=t:0==t&&0==e[s]?e[s+1]+=i:r?(e[s]+=t,e[s+1]+=i):e.push(t,i)}function ii(e,t,i){if(0==i.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<r;)e.push(Mt.empty);e.push(i)}}function ri(e,t,i){let r=e.inserted;for(let s=0,n=0,o=0;o<e.sections.length;){let a=e.sections[o++],l=e.sections[o++];if(l<0)s+=a,n+=a;else{let p=s,h=n,c=Mt.empty;for(;p+=a,h+=l,l&&r&&(c=c.append(r[o-2>>1])),!(i||o==e.sections.length||e.sections[o+1]<0);)a=e.sections[o++],l=e.sections[o++];t(s,p,n,h,c),s=p,n=h}}}function si(e,t,i,r=!1){let s=[],n=r?[]:null,o=new oi(e),a=new oi(t);for(let l=0,p=0;;)if(-1==o.ins)l+=o.len,o.next();else if(-1==a.ins&&p<l){let e=Math.min(a.len,l-p);a.forward(e),ti(s,e,-1),p+=e}else if(a.ins>=0&&(o.done||p<l||p==l&&(a.len<o.len||a.len==o.len&&!i))){for(ti(s,a.ins,-1);l>p&&!o.done&&l+o.len<p+a.len;)l+=o.len,o.next();p+=a.len,a.next()}else{if(!(o.ins>=0)){if(o.done&&a.done)return n?ei.createSet(s,n):Jt.create(s);throw new Error("Mismatched change set lengths")}{let e=0,t=l+o.len;for(;;)if(a.ins>=0&&p>l&&p+a.len<t)e+=a.ins,p+=a.len,a.next();else{if(!(-1==a.ins&&p<t))break;{let i=Math.min(a.len,t-p);e+=i,a.forward(i),p+=i}}ti(s,e,o.ins),n&&ii(n,s,o.text),l=t,o.next()}}}function ni(e,t,i=!1){let r=[],s=i?[]:null,n=new oi(e),o=new oi(t);for(let a=!1;;){if(n.done&&o.done)return s?ei.createSet(r,s):Jt.create(r);if(0==n.ins)ti(r,n.len,0,a),n.next();else if(0!=o.len||o.done){if(n.done||o.done)throw new Error("Mismatched change set lengths");{let e=Math.min(n.len2,o.len),t=r.length;if(-1==n.ins){let t=-1==o.ins?-1:o.off?0:o.ins;ti(r,e,t,a),s&&t&&ii(s,r,o.text)}else-1==o.ins?(ti(r,n.off?0:n.len,e,a),s&&ii(s,r,n.textBit(e))):(ti(r,n.off?0:n.len,o.off?0:o.ins,a),s&&!o.off&&ii(s,r,o.text));a=(n.ins>e||o.ins>=0&&o.len>e)&&(a||r.length>t),n.forward2(e),o.forward(e)}}else ti(r,0,o.ins,a),s&&ii(s,r,o.text),o.next()}}class oi{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Mt.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?Mt.empty:t[i].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ai{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e,t=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new ai(i,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return li.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return li.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return li.range(e.anchor,e.head)}static create(e,t,i){return new ai(e,t,i)}}class li{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:li.create(this.ranges.map((i=>i.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new li([this.main],0)}addRange(e,t=!0){return li.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,li.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new li(e.ranges.map((e=>ai.fromJSON(e))),e.main)}static single(e,t=e){return new li([li.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return li.normalized(e.slice(),t);i=s.to}return new li(e,t)}static cursor(e,t=0,i,r){return ai.create(e,e,(0==t?0:t<0?4:8)|(null==i?3:Math.min(2,i))|(null!=r?r:33554431)<<5)}static range(e,t,i){let r=(null!=i?i:33554431)<<5;return t<e?ai.create(t,e,24|r):ai.create(e,t,r|(t>e?4:0))}static normalized(e,t=0){let i=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(i);for(let r=1;r<e.length;r++){let i=e[r],s=e[r-1];if(i.empty?i.from<=s.to:i.from<s.to){let n=s.from,o=Math.max(i.to,s.to);r<=t&&t--,e.splice(--r,2,i.anchor>i.head?li.range(o,n):li.range(n,o))}}return new li(e,t)}}function pi(e,t){for(let i of e.ranges)if(i.to>t)throw new RangeError("Selection points outside of document")}let hi=0;class ci{constructor(e,t,i,r,s){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=r,this.extensions=s,this.id=hi++,this.default=e([])}static define(e={}){return new ci(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:di),!!e.static,e.enables)}of(e){return new ui([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ui(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new ui(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(i=>t(i.field(e))))}}function di(e,t){return e==t||e.length==t.length&&e.every(((e,i)=>e===t[i]))}class ui{constructor(e,t,i,r){this.dependencies=e,this.facet=t,this.type=i,this.value=r,this.id=hi++}dynamicSlot(e){var t;let i=this.value,r=this.facet.compareInput,s=this.id,n=e[s]>>1,o=2==this.type,a=!1,l=!1,p=[];for(let h of this.dependencies)"doc"==h?a=!0:"selection"==h?l=!0:0==(1&(null!==(t=e[h.id])&&void 0!==t?t:1))&&p.push(e[h.id]);return{create:e=>(e.values[n]=i(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||mi(e,p)){let t=i(e);if(o?!fi(t,e.values[n],r):!r(t,e.values[n]))return e.values[n]=t,1}return 0},reconfigure:(e,t)=>{let a=i(e),l=t.config.address[s];if(null!=l){let i=Ti(t,l);if(this.dependencies.every((i=>i instanceof ci?t.facet(i)===e.facet(i):!(i instanceof Oi)||t.field(i,!1)==e.field(i,!1)))||(o?fi(a,i,r):r(a,i)))return e.values[n]=i,0}return e.values[n]=a,1}}}}function fi(e,t,i){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!i(e[r],t[r]))return!1;return!0}function mi(e,t){let i=!1;for(let r of t)1&$i(e,r)&&(i=!0);return i}function gi(e,t,i){let r=i.map((t=>e[t.id])),s=i.map((e=>e.type)),n=r.filter((e=>!(1&e))),o=e[t.id]>>1;function a(e){let i=[];for(let t=0;t<r.length;t++){let n=Ti(e,r[t]);if(2==s[t])for(let e of n)i.push(e);else i.push(n)}return t.combine(i)}return{create(e){for(let t of r)$i(e,t);return e.values[o]=a(e),1},update(e,i){if(!mi(e,n))return 0;let r=a(e);return t.compare(r,e.values[o])?0:(e.values[o]=r,1)},reconfigure(e,s){let n=mi(e,r),l=s.config.facets[t.id],p=s.facet(t);if(l&&!n&&di(i,l))return e.values[o]=p,0;let h=a(e);return t.compare(h,p)?(e.values[o]=p,0):(e.values[o]=h,1)}}}const yi=ci.define({static:!0});class Oi{constructor(e,t,i,r,s){this.id=e,this.createF=t,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let t=new Oi(hi++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(yi).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,i)=>{let r=e.values[t],s=this.updateF(r,i);return this.compareF(r,s)?0:(e.values[t]=s,1)},reconfigure:(e,i)=>null!=i.config.address[this.id]?(e.values[t]=i.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,yi.of({field:this,create:e})]}get extension(){return this}}const bi=4,vi=3,wi=2,Pi=1;function ki(e){return t=>new Si(t,e)}const xi={highest:ki(0),high:ki(Pi),default:ki(wi),low:ki(vi),lowest:ki(bi)};class Si{constructor(e,t){this.inner=e,this.prec=t}}class _i{of(e){return new Ai(this,e)}reconfigure(e){return _i.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Ai{constructor(e,t){this.compartment=e,this.inner=t}}class qi{constructor(e,t,i,r,s,n){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=n,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let r=[],s=Object.create(null),n=new Map;for(let c of function(e,t,i){let r=[[],[],[],[],[]],s=new Map;function n(e,o){let a=s.get(e);if(null!=a){if(a<=o)return;let t=r[a].indexOf(e);t>-1&&r[a].splice(t,1),e instanceof Ai&&i.delete(e.compartment)}if(s.set(e,o),Array.isArray(e))for(let t of e)n(t,o);else if(e instanceof Ai){if(i.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;i.set(e.compartment,r),n(r,o)}else if(e instanceof Si)n(e.inner,e.prec);else if(e instanceof Oi)r[o].push(e),e.provides&&n(e.provides,o);else if(e instanceof ui)r[o].push(e),e.facet.extensions&&n(e.facet.extensions,o);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);n(t,o)}}return n(e,wi),r.reduce(((e,t)=>e.concat(t)))}(e,t,n))c instanceof Oi?r.push(c):(s[c.facet.id]||(s[c.facet.id]=[])).push(c);let o=Object.create(null),a=[],l=[];for(let c of r)o[c.id]=l.length<<1,l.push((e=>c.slot(e)));let p=null==i?void 0:i.config.facets;for(let c in s){let e=s[c],t=e[0].facet,r=p&&p[c]||[];if(e.every((e=>0==e.type)))if(o[t.id]=a.length<<1|1,di(r,e))a.push(i.facet(t));else{let r=t.combine(e.map((e=>e.value)));a.push(i&&t.compare(r,i.facet(t))?i.facet(t):r)}else{for(let t of e)0==t.type?(o[t.id]=a.length<<1|1,a.push(t.value)):(o[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));o[t.id]=l.length<<1,l.push((i=>gi(i,t,e)))}}let h=l.map((e=>e(o)));return new qi(e,n,h,o,a,s)}}function $i(e,t){if(1&t)return 2;let i=t>>1,r=e.status[i];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[i]=4;let s=e.computeSlot(e,e.config.dynamicSlots[i]);return e.status[i]=2|s}function Ti(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const Mi=ci.define(),Ci=ci.define({combine:e=>e.some((e=>e)),static:!0}),Ei=ci.define({combine:e=>e.length?e[0]:void 0,static:!0}),Ri=ci.define(),Di=ci.define(),Qi=ci.define(),ji=ci.define({combine:e=>!!e.length&&e[0]});class Xi{constructor(e,t){this.type=e,this.value=t}static define(){return new Ni}}class Ni{of(e){return new Xi(this,e)}}class Ii{constructor(e){this.map=e}of(e){return new Li(this,e)}}class Li{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Li(this.type,t)}is(e){return this.type==e}static define(e={}){return new Ii(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let r of e){let e=r.map(t);e&&i.push(e)}return i}}Li.reconfigure=Li.define(),Li.appendConfig=Li.define();class Bi{constructor(e,t,i,r,s,n){this.startState=e,this.changes=t,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=n,this._doc=null,this._state=null,i&&pi(i,t.newLength),s.some((e=>e.type==Bi.time))||(this.annotations=s.concat(Bi.time.of(Date.now())))}static create(e,t,i,r,s,n){return new Bi(e,t,i,r,s,n)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Bi.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function Vi(e,t){let i=[];for(let r=0,s=0;;){let n,o;if(r<e.length&&(s==t.length||t[s]>=e[r]))n=e[r++],o=e[r++];else{if(!(s<t.length))return i;n=t[s++],o=t[s++]}!i.length||i[i.length-1]<n?i.push(n,o):i[i.length-1]<o&&(i[i.length-1]=o)}}function Ui(e,t,i){var r;let s,n,o;return i?(s=t.changes,n=ei.empty(t.changes.length),o=e.changes.compose(t.changes)):(s=t.changes.map(e.changes),n=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(s)),{changes:o,selection:t.selection?t.selection.map(n):null===(r=e.selection)||void 0===r?void 0:r.map(s),effects:Li.mapEffects(e.effects,s).concat(Li.mapEffects(t.effects,n)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function zi(e,t,i){let r=t.selection,s=Fi(t.annotations);return t.userEvent&&(s=s.concat(Bi.userEvent.of(t.userEvent))),{changes:t.changes instanceof ei?t.changes:ei.of(t.changes||[],i,e.facet(Ei)),selection:r&&(r instanceof li?r:li.single(r.anchor,r.head)),effects:Fi(t.effects),annotations:s,scrollIntoView:!!t.scrollIntoView}}function Wi(e,t,i){let r=zi(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(i=!1);for(let n=1;n<t.length;n++){!1===t[n].filter&&(i=!1);let s=!!t[n].sequential;r=Ui(r,zi(e,t[n],s?r.changes.newLength:e.doc.length),s)}let s=Bi.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,i=t.facet(Qi),r=e;for(let s=i.length-1;s>=0;s--){let n=i[s](e);n&&Object.keys(n).length&&(r=Ui(e,zi(t,n,e.changes.newLength),!0))}return r==e?e:Bi.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(i?function(e){let t=e.startState,i=!0;for(let s of t.facet(Ri)){let t=s(e);if(!1===t){i=!1;break}Array.isArray(t)&&(i=!0===i?t:Vi(i,t))}if(!0!==i){let r,s;if(!1===i)s=e.changes.invertedDesc,r=ei.empty(t.doc.length);else{let t=e.changes.filter(i);r=t.changes,s=t.filtered.invertedDesc}e=Bi.create(t,r,e.selection&&e.selection.map(s),Li.mapEffects(e.effects,s),e.annotations,e.scrollIntoView)}let r=t.facet(Di);for(let s=r.length-1;s>=0;s--){let i=r[s](e);e=i instanceof Bi?i:Array.isArray(i)&&1==i.length&&i[0]instanceof Bi?i[0]:Wi(t,Fi(i),!1)}return e}(s):s)}Bi.time=Xi.define(),Bi.userEvent=Xi.define(),Bi.addToHistory=Xi.define(),Bi.remote=Xi.define();const Hi=[];function Fi(e){return null==e?Hi:Array.isArray(e)?e:[e]}var Gi=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Gi||(Gi={}));const Ki=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Zi;try{Zi=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(bf){}function Yi(e){return t=>{if(!/\S/.test(t))return Gi.Space;if(function(e){if(Zi)return Zi.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||Ki.test(i)))return!0}return!1}(t))return Gi.Word;for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return Gi.Word;return Gi.Other}}class Ji{constructor(e,t,i,r,s,n){this.config=e,this.doc=t,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,n&&(n._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)$i(this,o<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(null!=i)return $i(this,i),Ti(this,i);if(t)throw new RangeError("Field is not present in this state")}update(...e){return Wi(this,e,!0)}applyTransaction(e){let t,i=this.config,{base:r,compartments:s}=i;for(let n of e.effects)n.is(_i.reconfigure)?(i&&(s=new Map,i.compartments.forEach(((e,t)=>s.set(t,e))),i=null),s.set(n.value.compartment,n.value.extension)):n.is(Li.reconfigure)?(i=null,r=n.value):n.is(Li.appendConfig)&&(i=null,r=Fi(r).concat(n.value));if(i)t=e.startState.values.slice();else{i=qi.resolve(r,s,this),t=new Ji(i,this.doc,this.selection,i.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}new Ji(i,e.newDoc,e.newSelection,t,((t,i)=>i.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:li.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),r=this.changes(i.changes),s=[i.range],n=Fi(i.effects);for(let o=1;o<t.ranges.length;o++){let i=e(t.ranges[o]),a=this.changes(i.changes),l=a.map(r);for(let e=0;e<o;e++)s[e]=s[e].map(l);let p=r.mapDesc(a,!0);s.push(i.range.map(p)),r=r.compose(l),n=Li.mapEffects(n,l).concat(Li.mapEffects(Fi(i.effects),p))}return{changes:r,selection:li.create(s,t.mainIndex),effects:n}}changes(e=[]){return e instanceof ei?e:ei.of(e,this.doc.length,this.facet(Ji.lineSeparator))}toText(e){return Mt.of(e.split(this.facet(Ji.lineSeparator)||Zt))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:($i(this,t),Ti(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Oi&&(t[i]=r.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i)for(let s in i){let t=i[s],n=e[s];r.push(t.init((e=>t.spec.fromJSON(n,e))))}return Ji.create({doc:e.doc,selection:li.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=qi.resolve(e.extensions||[],new Map),i=e.doc instanceof Mt?e.doc:Mt.of((e.doc||"").split(t.staticFacet(Ji.lineSeparator)||Zt)),r=e.selection?e.selection instanceof li?e.selection:li.single(e.selection.anchor,e.selection.head):li.single(0);return pi(r,i.length),t.staticFacet(Ci)||(r=r.asSingle()),new Ji(t,i,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(Ji.tabSize)}get lineBreak(){return this.facet(Ji.lineSeparator)||"\n"}get readOnly(){return this.facet(ji)}phrase(e,...t){for(let i of this.facet(Ji.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,i)=>{if("$"==i)return"$";let r=+(i||1);return r>t.length?e:t[r-1]}))),e}languageDataAt(e,t,i=-1){let r=[];for(let s of this.facet(Mi))for(let n of s(this,t,i))Object.prototype.hasOwnProperty.call(n,e)&&r.push(n[e]);return r}charCategorizer(e){return Yi(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),n=e-i,o=e-i;for(;n>0;){let e=Vt(t,n,!1);if(s(t.slice(e,n))!=Gi.Word)break;n=e}for(;o<r;){let e=Vt(t,o);if(s(t.slice(o,e))!=Gi.Word)break;o=e}return n==o?null:li.range(n+i,o+i)}}function er(e,t,i={}){let r={};for(let s of e)for(let e of Object.keys(s)){let t=s[e],n=r[e];if(void 0===n)r[e]=t;else if(n===t||void 0===t);else{if(!Object.hasOwnProperty.call(i,e))throw new Error("Config merge conflict for field "+e);r[e]=i[e](n,t)}}for(let s in t)void 0===r[s]&&(r[s]=t[s]);return r}Ji.allowMultipleSelections=Ci,Ji.tabSize=ci.define({combine:e=>e.length?e[0]:4}),Ji.lineSeparator=Ei,Ji.readOnly=ji,Ji.phrases=ci.define({compare(e,t){let i=Object.keys(e),r=Object.keys(t);return i.length==r.length&&i.every((i=>e[i]==t[i]))}}),Ji.languageData=Mi,Ji.changeFilter=Ri,Ji.transactionFilter=Di,Ji.transactionExtender=Qi,_i.reconfigure=Li.define();class tr{eq(e){return this==e}range(e,t=e){return ir.create(e,t,this)}}tr.prototype.startSide=tr.prototype.endSide=0,tr.prototype.point=!1,tr.prototype.mapMode=Yt.TrackDel;class ir{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new ir(e,t,i)}}function rr(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class sr{constructor(e,t,i,r){this.from=e,this.to=t,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,r=0){let s=i?this.to:this.from;for(let n=r,o=s.length;;){if(n==o)return n;let r=n+o>>1,a=s[r]-e||(i?this.value[r].endSide:this.value[r].startSide)-t;if(r==n)return a>=0?n:o;a>=0?o=r:n=r+1}}between(e,t,i,r){for(let s=this.findIndex(t,-1e9,!0),n=this.findIndex(i,1e9,!1,s);s<n;s++)if(!1===r(this.from[s]+e,this.to[s]+e,this.value[s]))return!1}map(e,t){let i=[],r=[],s=[],n=-1,o=-1;for(let a=0;a<this.value.length;a++){let l,p,h=this.value[a],c=this.from[a]+e,d=this.to[a]+e;if(c==d){let e=t.mapPos(c,h.startSide,h.mapMode);if(null==e)continue;if(l=p=e,h.startSide!=h.endSide&&(p=t.mapPos(c,h.endSide),p<l))continue}else if(l=t.mapPos(c,h.startSide),p=t.mapPos(d,h.endSide),l>p||l==p&&h.startSide>0&&h.endSide<=0)continue;(p-l||h.endSide-h.startSide)<0||(n<0&&(n=l),h.point&&(o=Math.max(o,p-l)),i.push(h),r.push(l-n),s.push(p-n))}return{mapped:i.length?new sr(r,s,i,o):null,pos:n}}}class nr{constructor(e,t,i,r){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=r}static create(e,t,i,r){return new nr(e,t,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,n=e.filter;if(0==t.length&&!n)return this;if(i&&(t=t.slice().sort(rr)),this.isEmpty)return t.length?nr.of(t):this;let o=new lr(this,null,-1).goto(0),a=0,l=[],p=new or;for(;o.value||a<t.length;)if(a<t.length&&(o.from-t[a].from||o.startSide-t[a].value.startSide)>=0){let e=t[a++];p.addInner(e.from,e.to,e.value)||l.push(e)}else 1==o.rangeIndex&&o.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(o.chunkIndex)<t[a].from)&&(!n||r>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&p.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!n||r>o.to||s<o.from||n(o.from,o.to,o.value))&&(p.addInner(o.from,o.to,o.value)||l.push(ir.create(o.from,o.to,o.value))),o.next());return p.finishInner(this.nextLayer.isEmpty&&!l.length?nr.empty:this.nextLayer.update({add:l,filter:n,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],r=-1;for(let n=0;n<this.chunk.length;n++){let s=this.chunkPos[n],o=this.chunk[n],a=e.touchesRange(s,s+o.length);if(!1===a)r=Math.max(r,o.maxPoint),t.push(o),i.push(e.mapPos(s));else if(!0===a){let{mapped:n,pos:a}=o.map(s,e);n&&(r=Math.max(r,n.maxPoint),t.push(n),i.push(a))}}let s=this.nextLayer.map(e);return 0==t.length?s:new nr(i,t,s||nr.empty,r)}between(e,t,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],n=this.chunk[r];if(t>=s&&e<=s+n.length&&!1===n.between(s,e-s,t-s,i))return}this.nextLayer.between(e,t,i)}}iter(e=0){return pr.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return pr.from(e).goto(t)}static compare(e,t,i,r,s=-1){let n=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=s)),o=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=s)),a=ar(n,o,i),l=new cr(n,a,s),p=new cr(o,a,s);i.iterGaps(((e,t,i)=>dr(l,e,p,t,i,r))),i.empty&&0==i.length&&dr(l,0,p,0,0,r)}static eq(e,t,i=0,r){null==r&&(r=1e9);let s=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),n=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(s.length!=n.length)return!1;if(!s.length)return!0;let o=ar(s,n),a=new cr(s,o,0).goto(i),l=new cr(n,o,0).goto(i);for(;;){if(a.to!=l.to||!ur(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,i,r,s=-1){let n=new cr(e,null,s).goto(t),o=t,a=n.openStart;for(;;){let e=Math.min(n.to,i);if(n.point?(r.point(o,e,n.point,n.activeForPoint(n.to),a,n.pointRank),a=n.openEnd(e)+(n.to>e?1:0)):e>o&&(r.span(o,e,n.active,a),a=n.openEnd(e)),n.to>i)break;o=n.to,n.next()}return a}static of(e,t=!1){let i=new or;for(let r of e instanceof ir?[e]:t?function(e){if(e.length>1)for(let t=e[0],i=1;i<e.length;i++){let r=e[i];if(rr(t,r)>0)return e.slice().sort(rr);t=r}return e}(e):e)i.add(r.from,r.to,r.value);return i.finish()}}nr.empty=new nr([],[],null,-1),nr.empty.nextLayer=nr.empty;class or{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new sr(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new or)).add(e,t,i)}addInner(e,t,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(nr.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=nr.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function ar(e,t,i){let r=new Map;for(let n of e)for(let e=0;e<n.chunk.length;e++)n.chunk[e].maxPoint<=0&&r.set(n.chunk[e],n.chunkPos[e]);let s=new Set;for(let n of t)for(let e=0;e<n.chunk.length;e++){let t=r.get(n.chunk[e]);null==t||(i?i.mapPos(t):t)!=n.chunkPos[e]||(null==i?void 0:i.touchesRange(t,t+n.chunk[e].length))||s.add(n.chunk[e])}return s}class lr{constructor(e,t,i,r=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class pr{constructor(e){this.heap=e}static from(e,t=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let n=e[s];!n.isEmpty;n=n.nextLayer)n.maxPoint>=i&&r.push(new lr(n,t,i,s));return 1==r.length?r[0]:new pr(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let i=this.heap.length>>1;i>=0;i--)hr(this.heap,i);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let i=this.heap.length>>1;i>=0;i--)hr(this.heap,i);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),hr(this.heap,0)}}}function hr(e,t){for(let i=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let s=e[r];if(r+1<e.length&&s.compare(e[r+1])>=0&&(s=e[r+1],r++),i.compare(s)<0)break;e[r]=i,e[t]=s,t=r}}class cr{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=pr.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){fr(this.active,e),fr(this.activeTo,e),fr(this.activeRank,e),this.minActive=gr(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:r,rank:s}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=s;)t++;mr(this.active,t,i),mr(this.activeTo,t,r),mr(this.activeRank,t,s),e&&mr(e,t,this.cursor.from),this.minActive=gr(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null,r=0;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),i&&fr(i,s)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let s=this.cursor.value;if(s.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.from<e&&(r=1),this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(i),this.cursor.next()}}}if(i){let t=0;for(;t<i.length&&i[t]<e;)t++;this.openStart=t+r}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function dr(e,t,i,r,s,n){e.goto(t),i.goto(r);let o=r+s,a=r,l=r-t;for(;;){let t=e.to+l-i.to||e.endSide-i.endSide,r=t<0?e.to+l:i.to,s=Math.min(r,o);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))&&ur(e.activeForPoint(e.to+l),i.activeForPoint(i.to))||n.comparePoint(a,s,e.point,i.point):s>a&&!ur(e.active,i.active)&&n.compareRange(a,s,e.active,i.active),r>o)break;a=r,t<=0&&e.next(),t>=0&&i.next()}}function ur(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function fr(e,t){for(let i=t,r=e.length-1;i<r;i++)e[i]=e[i+1];e.pop()}function mr(e,t,i){for(let r=e.length-1;r>=t;r--)e[r+1]=e[r];e[t]=i}function gr(e,t){let i=-1,r=1e9;for(let s=0;s<t.length;s++)(t[s]-r||e[s].endSide-e[i].endSide)<0&&(i=s,r=t[s]);return i}function yr(e,t,i=e.length){let r=0;for(let s=0;s<i;)9==e.charCodeAt(s)?(r+=t-r%t,s++):(r++,s=Vt(e,s));return r}const Or="undefined"==typeof Symbol?"__":Symbol.for(""),br="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),vr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class wr{constructor(e,t){this.rules=[];let{finish:i}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function s(e,t,n,o){let a=[],l=/^@(\w+)\b/.exec(e[0]),p=l&&"keyframes"==l[1];if(l&&null==t)return n.push(e[0]+";");for(let i in t){let o=t[i];if(/&/.test(i))s(i.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),o,n);else if(o&&"object"==typeof o){if(!l)throw new RangeError("The value of a property ("+i+") should be a primitive value.");s(r(i),o,a,p)}else null!=o&&a.push(i.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+o+";")}(a.length||p)&&n.push((!i||l||o?e:e.map(i)).join(", ")+" {"+a.join(" ")+"}")}for(let n in e)s(r(n),e[n],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=vr[Or]||1;return vr[Or]=e+1,""+e.toString(36)}static mount(e,t){(e[br]||new kr(e)).mount(Array.isArray(t)?t:[t])}}let Pr=null;class kr{constructor(e){if(!e.head&&e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(Pr)return e.adoptedStyleSheets=[Pr.sheet].concat(e.adoptedStyleSheets),e[br]=Pr;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Pr=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[br]=this}mount(e){let t=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let n=e[s],o=this.modules.indexOf(n);if(o<r&&o>-1&&(this.modules.splice(o,1),r--,o=-1),-1==o){if(this.modules.splice(r++,0,n),t)for(let e=0;e<n.rules.length;e++)t.insertRule(n.rules[e],i++)}else{for(;r<o;)i+=this.modules[r++].rules.length;i+=n.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}for(var xr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Sr={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},_r="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Ar="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),qr="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),$r="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Tr="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Mr=_r&&($r||+_r[1]<57)||qr&&$r,Cr=0;Cr<10;Cr++)xr[48+Cr]=xr[96+Cr]=String(Cr);for(Cr=1;Cr<=24;Cr++)xr[Cr+111]="F"+Cr;for(Cr=65;Cr<=90;Cr++)xr[Cr]=String.fromCharCode(Cr+32),Sr[Cr]=String.fromCharCode(Cr);for(var Er in xr)Sr.hasOwnProperty(Er)||(Sr[Er]=xr[Er]);function Rr(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function Dr(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function Qr(e,t){if(!t.anchorNode)return!1;try{return Dr(e,t.anchorNode)}catch(bf){return!1}}function jr(e){return 3==e.nodeType?Gr(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Xr(e,t,i,r){return!!i&&(Ir(e,t,i,r,-1)||Ir(e,t,i,r,1))}function Nr(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function Ir(e,t,i,r,s){for(;;){if(e==i&&t==r)return!0;if(t==(s<0?0:Lr(e))){if("DIV"==e.nodeName)return!1;let i=e.parentNode;if(!i||1!=i.nodeType)return!1;t=Nr(e)+(s<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(s<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=s<0?Lr(e):0}}}function Lr(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}const Br={left:0,right:0,top:0,bottom:0};function Vr(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function Ur(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class zr{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=r}}let Wr,Hr=null;function Fr(e){if(e.setActive)return e.setActive();if(Hr)return e.focus(Hr);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(null==Hr?{get preventScroll(){return Hr={preventScroll:!0},!0}}:void 0),!Hr){Hr=!1;for(let e=0;e<t.length;){let i=t[e++],r=t[e++],s=t[e++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}function Gr(e,t,i=t){let r=Wr||(Wr=document.createRange());return r.setEnd(e,i),r.setStart(e,t),r}function Kr(e,t,i){let r={key:t,code:t,keyCode:i,which:i,cancelable:!0},s=new KeyboardEvent("keydown",r);s.synthetic=!0,e.dispatchEvent(s);let n=new KeyboardEvent("keyup",r);return n.synthetic=!0,e.dispatchEvent(n),s.defaultPrevented||n.defaultPrevented}function Zr(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}class Yr{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Yr(e.parentNode,Nr(e),t)}static after(e,t){return new Yr(e.parentNode,Nr(e)+1,t)}}const Jr=[];class es{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let t,i=this.dom,r=null;for(let s of this.children){if(s.dirty){if(!s.dom&&(t=r?r.nextSibling:i.firstChild)){let e=es.get(t);e&&(e.parent||e.constructor!=s.constructor)||s.reuseDOM(t)}s.sync(e),s.dirty=0}if(t=r?r.nextSibling:i.firstChild,e&&!e.written&&e.node==i&&t!=s.dom&&(e.written=!0),s.dom.parentNode==i)for(;t&&t!=s.dom;)t=ts(t);else i.insertBefore(s.dom,t);r=s.dom}for(t=r?r.nextSibling:i.firstChild,t&&e&&e.node==i&&(e.written=!0);t;)t=ts(t)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let r=0==Lr(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}i=r<0?e:e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!es.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let e=this.children[r];if(e.dom==i)return s;s+=e.length+e.breakAfter}}domBoundsAround(e,t,i=0){let r=-1,s=-1,n=-1,o=-1;for(let a=0,l=i,p=i;a<this.children.length;a++){let i=this.children[a],h=l+i.length;if(l<e&&h>t)return i.domBoundsAround(e,t,l);if(h>=e&&-1==r&&(r=a,s=l),l>t&&i.dom.parentNode==this.dom){n=a,o=p;break}p=h,l=h+i.breakAfter}return{from:s,to:o<0?i+this.length:o,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:n<this.children.length&&n>=0?this.children[n].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Jr){this.markDirty();for(let r=e;r<t;r++){let e=this.children[r];e.parent==this&&e.destroy()}this.children.splice(e,t-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new is(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,r,s,n){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}function ts(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}es.prototype.breakAfter=0;class is{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function rs(e,t,i,r,s,n,o,a,l){let{children:p}=e,h=p.length?p[t]:null,c=n.length?n[n.length-1]:null,d=c?c.breakAfter:o;if(!(t==r&&h&&!o&&!d&&n.length<2&&h.merge(i,s,n.length?c:null,0==i,a,l))){if(r<p.length){let e=p[r];e&&s<e.length?(t==r&&(e=e.split(s),s=0),!d&&c&&e.merge(0,s,c,!0,0,l)?n[n.length-1]=e:(s&&e.merge(0,s,null,!1,0,l),n.push(e))):(null==e?void 0:e.breakAfter)&&(c?c.breakAfter=1:o=1),r++}for(h&&(h.breakAfter=o,i>0&&(!o&&n.length&&h.merge(i,h.length,n[0],!1,a,0)?h.breakAfter=n.shift().breakAfter:(i<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(i,h.length,null,!1,a,0),t++));t<r&&n.length;)if(p[r-1].become(n[n.length-1]))r--,n.pop(),l=n.length?0:a;else{if(!p[t].become(n[0]))break;t++,n.shift(),a=n.length?0:l}!n.length&&t&&r<p.length&&!p[t-1].breakAfter&&p[r].merge(0,0,p[t-1],!1,a,l)&&t--,(t<r||n.length)&&e.replaceChildren(t,r,n)}}function ss(e,t,i,r,s,n){let o=e.childCursor(),{i:a,off:l}=o.findPos(i,1),{i:p,off:h}=o.findPos(t,-1),c=t-i;for(let d of r)c+=d.length;e.length+=c,rs(e,p,h,a,l,r,0,s,n)}let ns="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},os="undefined"!=typeof document?document:{documentElement:{style:{}}};const as=/Edge\/(\d+)/.exec(ns.userAgent),ls=/MSIE \d/.test(ns.userAgent),ps=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ns.userAgent),hs=!!(ls||ps||as),cs=!hs&&/gecko\/(\d+)/i.test(ns.userAgent),ds=!hs&&/Chrome\/(\d+)/.exec(ns.userAgent),us="webkitFontSmoothing"in os.documentElement.style,fs=!hs&&/Apple Computer/.test(ns.vendor),ms=fs&&(/Mobile\/\w+/.test(ns.userAgent)||ns.maxTouchPoints>2);var gs={mac:ms||/Mac/.test(ns.platform),windows:/Win/.test(ns.platform),linux:/Linux|X11/.test(ns.platform),ie:hs,ie_version:ls?os.documentMode||6:ps?+ps[1]:as?+as[1]:0,gecko:cs,gecko_version:cs?+(/Firefox\/(\d+)/.exec(ns.userAgent)||[0,0])[1]:0,chrome:!!ds,chrome_version:ds?+ds[1]:0,ios:ms,android:/Android\b/.test(ns.userAgent),webkit:us,safari:fs,webkit_version:us?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=os.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class ys extends es{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,i){return(!i||i instanceof ys&&!(this.length-(t-e)+i.length>256))&&(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ys(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Yr(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return bs(this.dom,e,t)}}class Os extends es{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let r of t)r.setParent(this)}setAttrs(e){if(Zr(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?4&this.dirty&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,r,s,n){return(!i||!(!(i instanceof Os&&i.mark.eq(this.mark))||e&&s<=0||t<this.length&&n<=0))&&(ss(this,e,t,i?i.children:[],s-1,n-1),this.markDirty(),!0)}split(e){let t=[],i=0,r=-1,s=0;for(let o of this.children){let n=i+o.length;n>e&&t.push(i<e?o.split(e-i):o),r<0&&i>=e&&(r=s),i=n,s++}let n=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Os(this.mark,t,n)}domAtPos(e){return Ss(this.dom,this.children,e)}coordsAt(e,t){return As(this,e,t)}}function bs(e,t,i){let r=e.nodeValue.length;t>r&&(t=r);let s=t,n=t,o=0;0==t&&i<0||t==r&&i>=0?gs.chrome||gs.gecko||(t?(s--,o=1):n<r&&(n++,o=-1)):i<0?s--:n<r&&n++;let a=Gr(e,s,n).getClientRects();if(!a.length)return Br;let l=a[(o?o<0:i>=0)?0:a.length-1];return gs.safari&&!o&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),o?Vr(l,o<0):l||null}class vs extends es{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||vs)(e,t,i)}split(e){let t=vs.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,r,s,n){return!(i&&(!(i instanceof vs&&this.widget.compare(i.widget))||e>0&&s<=0||t<this.length&&n<=0))&&(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof vs&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return Mt.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Mt.empty}domAtPos(e){return 0==e?Yr.before(this.dom):Yr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),r=null;if(!i.length)return Br;for(let s=e>0?i.length-1:0;r=i[s],!(e>0?0==s:s==i.length-1||r.top<r.bottom);s+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?r:Vr(r,0==e)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ws extends vs{domAtPos(e){let{topView:t,text:i}=this.widget;return t?Ps(e,0,t,i,((e,t)=>e.domAtPos(t)),(e=>new Yr(i,Math.min(e,i.nodeValue.length)))):new Yr(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:r}=this.widget;return i?ks(e,t,i,r):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:r}=this.widget;return i?Ps(e,t,i,r,((e,t,i)=>e.coordsAt(t,i)),((e,t)=>bs(r,e,t))):bs(r,e,t)}destroy(){var e;super.destroy(),null===(e=this.widget.topView)||void 0===e||e.destroy()}get isEditable(){return!0}}function Ps(e,t,i,r,s,n){if(i instanceof Os){for(let o of i.children){let i=Dr(o.dom,r),a=i?r.nodeValue.length:o.length;if(e<a||e==a&&o.getSide()<=0)return i?Ps(e,t,o,r,s,n):s(o,e,t);e-=a}return s(i,i.length,-1)}return i.dom==r?n(e,t):s(i,e,t)}function ks(e,t,i,r){if(i instanceof Os)for(let s of i.children){let i=0,n=Dr(s.dom,r);if(Dr(s.dom,e))return i+(n?ks(e,t,s,r):s.localPosFromDOM(e,t));i+=n?r.nodeValue.length:s.length}else if(i.dom==r)return Math.min(t,r.nodeValue.length);return i.localPosFromDOM(e,t)}class xs extends es{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof xs&&e.side==this.side}split(){return new xs(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return Yr.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=function(e,t){let i=e.parent,r=i?i.children.indexOf(e):-1;for(;i&&r>=0;)if(t<0?r>0:r<i.children.length){let e=i.children[r+t];if(e instanceof ys){let i=e.coordsAt(t<0?e.length:0,t);if(i)return i}r+=t}else{if(!(i instanceof Os&&i.parent)){let e=i.dom.lastChild;if(e&&"BR"==e.nodeName)return e.getClientRects()[0];break}r=i.parent.children.indexOf(i)+(t<0?0:1),i=i.parent}return}(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return Mt.empty}}function Ss(e,t,i){let r=0;for(let s=0;r<t.length;r++){let n=t[r],o=s+n.length;if(!(o==s&&n.getSide()<=0)){if(i>s&&i<o&&n.dom.parentNode==e)return n.domAtPos(i-s);if(i<=s)break;s=o}}for(;r>0;r--){let i=t[r-1].dom;if(i.parentNode==e)return Yr.after(i)}return new Yr(e,0)}function _s(e,t,i){let r,{children:s}=e;i>0&&t instanceof Os&&s.length&&(r=s[s.length-1])instanceof Os&&r.mark.eq(t.mark)?_s(r,t.children[0],i-1):(s.push(t),t.setParent(e)),e.length+=t.length}function As(e,t,i){for(let n=0,o=0;o<e.children.length;o++){let r,s=e.children[o],a=n+s.length;if((i<=0||a==e.length||s.getSide()>0?a>=t:a>t)&&(t<a||o+1==e.children.length||(r=e.children[o+1]).length||r.getSide()>0)){let e=0;if(a==n){if(s.getSide()<=0)continue;e=i=-s.getSide()}let r=s.coordsAt(Math.max(0,t-n),i);return e&&r?Vr(r,i<0):r}n=a}let r=e.dom.lastChild;if(!r)return e.dom.getBoundingClientRect();let s=jr(r);return s[s.length-1]||null}function qs(e,t){for(let i in e)"class"==i&&t.class?t.class+=" "+e.class:"style"==i&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}function $s(e,t){if(e==t)return!0;if(!e||!t)return!1;let i=Object.keys(e),r=Object.keys(t);if(i.length!=r.length)return!1;for(let s of i)if(-1==r.indexOf(s)||e[s]!==t[s])return!1;return!0}function Ts(e,t,i){let r=null;if(t)for(let s in t)i&&s in i||e.removeAttribute(r=s);if(i)for(let s in i)t&&t[s]==i[s]||e.setAttribute(r=s,i[s]);return!!r}ys.prototype.children=vs.prototype.children=xs.prototype.children=Jr;class Ms{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var Cs=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(Cs||(Cs={}));class Es extends tr{constructor(e,t,i,r){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Rs(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new Qs(e,t,t,i,e.widget||null,!1)}static replace(e){let t,i,r=!!e.block;if(e.isBlockGap)t=-5e8,i=4e8;else{let{start:s,end:n}=js(e,r);t=(s?r?-3e8:-1:5e8)-1,i=1+(n?r?2e8:1:-6e8)}return new Qs(e,t,i,r,e.widget||null,!0)}static line(e){return new Ds(e)}static set(e,t=!1){return nr.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Es.none=nr.empty;class Rs extends Es{constructor(e){let{start:t,end:i}=js(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Rs&&this.tagName==e.tagName&&this.class==e.class&&$s(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Rs.prototype.point=!1;class Ds extends Es{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Ds&&$s(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Ds.prototype.mapMode=Yt.TrackBefore,Ds.prototype.point=!0;class Qs extends Es{constructor(e,t,i,r,s,n){super(t,i,s,e),this.block=r,this.isReplace=n,this.mapMode=r?t<=0?Yt.TrackBefore:Yt.TrackAfter:Yt.TrackDel}get type(){return this.startSide<this.endSide?Cs.WidgetRange:this.startSide<=0?Cs.WidgetBefore:Cs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Qs&&(t=this.widget,i=e.widget,t==i||!!(t&&i&&t.compare(i)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,i}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function js(e,t=!1){let{inclusiveStart:i,inclusiveEnd:r}=e;return null==i&&(i=e.inclusive),null==r&&(r=e.inclusive),{start:null!=i?i:t,end:null!=r?r:t}}function Xs(e,t,i,r=0){let s=i.length-1;s>=0&&i[s]+r>=e?i[s]=Math.max(i[s],t):i.push(e,t)}Qs.prototype.point=!0;class Ns extends es{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,r,s,n){if(i){if(!(i instanceof Ns))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),ss(this,e,t,i?i.children:[],s,n),!0}split(e){let t=new Ns;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:i,off:r}=this.childPos(e);r&&(t.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)t.append(this.children[s],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){$s(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){_s(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=qs(t,this.attrs||{})),i&&(this.attrs=qs({class:i},this.attrs||{}))}domAtPos(e){return Ss(this.dom,this.children,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?4&this.dirty&&(Zr(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Ts(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&es.get(i)instanceof Os;)i=i.lastChild;if(!(i&&this.length&&("BR"==i.nodeName||0!=(null===(t=es.get(i))||void 0===t?void 0:t.isEditable)||gs.ios&&this.children.some((e=>e instanceof ys))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof ys))return null;let i=jr(t.dom);if(1!=i.length)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return As(this,e,t)}become(e){return!1}get type(){return Cs.Text}static find(e,t){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],n=r+s.length;if(n>=t){if(s instanceof Ns)return s;if(n>t)break}r=n+s.breakAfter}return null}}class Is extends es{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,r,s,n){return!(i&&(!(i instanceof Is&&this.widget.compare(i.widget))||e>0&&s<=0||t<this.length&&n<=0))&&(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?Yr.before(this.dom):Yr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new Is(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return Jr}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Mt.empty}domBoundsAround(){return null}become(e){return e instanceof Is&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Ls{constructor(e,t,i,r){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Is&&e.type==Cs.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ns),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(Bs(new xs(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:i,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(Bs(new ys(this.text.slice(this.textOff,this.textOff+r)),t),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,t,i,r){this.buildText(t-e,i,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,i,r,s,n){if(this.disallowBlockEffectsFor[n]&&i instanceof Qs){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(i instanceof Qs)if(i.block){let{type:e}=i;e!=Cs.WidgetAfter||this.posCovered()||this.getLine(),this.addBlockWidget(new Is(i.widget||new Vs("div"),o,e))}else{let n=vs.create(i.widget||new Vs("span"),o,i.startSide),a=this.atCursorPos&&!n.isEditable&&s<=r.length&&(e<t||i.startSide>0),l=!n.isEditable&&(e<t||i.startSide<=0),p=this.getLine();2!=this.pendingBuffer||a||(this.pendingBuffer=0),this.flushBuffer(r),a&&(p.append(Bs(new xs(1),r),s),s=r.length+Math.max(0,s-r.length)),p.append(Bs(n,r),s),this.atCursorPos=l,this.pendingBuffer=l?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,i,r,s){let n=new Ls(e,t,i,s);return n.openEnd=nr.spans(r,t,i,n),n.openStart<0&&(n.openStart=n.openEnd),n.finish(n.openEnd),n}}function Bs(e,t){for(let i of t)e=new Os(i,[e],e.length);return e}class Vs extends Ms{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const Us=ci.define(),zs=ci.define(),Ws=ci.define(),Hs=ci.define(),Fs=ci.define(),Gs=ci.define(),Ks=ci.define({combine:e=>e.some((e=>e))});class Zs{constructor(e,t="nearest",i="nearest",r=5,s=5){this.range=e,this.y=t,this.x=i,this.yMargin=r,this.xMargin=s}map(e){return e.empty?this:new Zs(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Ys=Li.define({map:(e,t)=>e.map(t)});function Js(e,t,i){let r=e.facet(Hs);r.length?r[0](t):window.onerror&&window.onerror(String(t),i,void 0,void 0,t)}const en=ci.define({combine:e=>!e.length||e[0]});let tn=0;const rn=ci.define();class sn{constructor(e,t,i,r){this.id=e,this.create=t,this.domEventHandlers=i,this.extension=r(this)}static define(e,t){const{eventHandlers:i,provide:r,decorations:s}=t||{};return new sn(tn++,e,i,(e=>{let t=[rn.of(e)];return s&&t.push(ln.of((t=>{let i=t.plugin(e);return i?s(i):Es.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return sn.define((t=>new e(t)),t)}}class nn{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(Js(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(bf){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Js(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(i){Js(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const on=ci.define(),an=ci.define(),ln=ci.define(),pn=ci.define(),hn=ci.define(),cn=ci.define();class dn{constructor(e,t,i,r){this.fromA=e,this.toA=t,this.fromB=i,this.toB=r}join(e){return new dn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(0==t.length)return e;let i=[];for(let r=0,s=0,n=0,o=0;;r++){let a=r==e.length?null:e[r],l=n-o,p=a?a.fromB:1e9;for(;s<t.length&&t[s]<p;){let e=t[s],r=t[s+1],n=Math.max(o,e),a=Math.min(p,r);if(n<=a&&new dn(n+l,a+l,n,a).addToSet(i),r>p)break;s+=2}if(!a)return i;new dn(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),n=a.toA,o=a.toB}}}class un{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=ei.empty(this.startState.doc.length);for(let n of i)this.changes=this.changes.compose(n.changes);let r=[];this.changes.iterChangedRanges(((e,t,i,s)=>r.push(new dn(e,t,i,s)))),this.changedRanges=r;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags|=1)}static create(e,t,i){return new un(e,t,i)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var fn=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(fn||(fn={}));const mn=fn.LTR,gn=fn.RTL;function yn(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}const On=yn("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),bn=yn("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),vn=Object.create(null),wn=[];for(let vf of["()","[]","{}"]){let e=vf.charCodeAt(0),t=vf.charCodeAt(1);vn[e]=t,vn[t]=-e}const Pn=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class kn{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?gn:mn}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,r){let s=-1;for(let n=0;n<e.length;n++){let o=e[n];if(o.from<=t&&o.to>=t){if(o.level==i)return n;(s<0||(0!=r?r<0?o.from<t:o.to>t:e[s].level>o.level))&&(s=n)}}if(s<0)throw new RangeError("Index out of range");return s}}const xn=[];function Sn(e){return[new kn(0,e,0)]}let _n="";function An(e,t,i,r,s){var n;let o=r.head-e.from,a=-1;if(0==o){if(!s||!e.length)return null;t[0].level!=i&&(o=t[0].side(!1,i),a=0)}else if(o==e.length){if(s)return null;let e=t[t.length-1];e.level!=i&&(o=e.side(!0,i),a=t.length-1)}a<0&&(a=kn.find(t,o,null!==(n=r.bidiLevel)&&void 0!==n?n:-1,r.assoc));let l=t[a];o==l.side(s,i)&&(l=t[a+=s?1:-1],o=l.side(!s,i));let p=s==(l.dir==i),h=Vt(e.text,o,p);if(_n=e.text.slice(Math.min(o,h),Math.max(o,h)),h!=l.side(s,i))return li.cursor(h+e.from,p?-1:1,l.level);let c=a==(s?t.length-1:0)?null:t[a+(s?1:-1)];return c||l.level==i?c&&c.level<l.level?li.cursor(c.side(!s,i)+e.from,s?1:-1,c.level):li.cursor(h+e.from,s?-1:1,l.level):li.cursor(s?e.to:e.from,s?-1:1,i)}const qn="";class $n{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ji.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=qn}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r),this.readNode(r);let e=r.nextSibling;if(e==t)break;let s=es.get(r),n=es.get(e);(s&&n?s.breakAfter:(s?s.breakAfter:Tn(r))||Tn(e)&&("BR"!=r.nodeName||r.cmIgnore))&&this.lineBreak(),r=e}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s,n=-1,o=1;if(this.lineSeparator?(n=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(s=r.exec(t))&&(n=s.index,o=s[0].length),this.append(t.slice(i,n<0?t.length:n)),n<0)break;if(this.lineBreak(),o>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=o-1);i=n+o}}readNode(e){if(e.cmIgnore)return;let t=es.get(e),i=t&&t.overrideDOMText;if(null!=i){this.findPointInside(e,i.length);for(let e=i.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(3==e.nodeType?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function Tn(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class Mn{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Cn extends es{constructor(e){super(),this.view=e,this.compositionDeco=Es.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Ns],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new dn(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=Es.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=function(e,t){let i=Rn(e);if(!i)return Es.none;let{from:r,to:s,node:n,text:o}=i,a=t.mapPos(r,1),l=Math.max(a,t.mapPos(s,-1)),{state:p}=e,h=3==n.nodeType?n.nodeValue:new $n([],p).readRange(n.firstChild,null).text;if(l-a<h.length)if(p.doc.sliceString(a,Math.min(p.doc.length,a+h.length),qn)==h)l=a+h.length;else{if(p.doc.sliceString(Math.max(0,l-h.length),l,qn)!=h)return Es.none;a=l-h.length}else if(p.doc.sliceString(a,l,qn)!=h)return Es.none;let c=es.get(n);c instanceof ws?c=c.widget.topView:c&&(c.parent=null);return Es.set(Es.replace({widget:new Dn(n,o,c),inclusive:!0}).range(a,l))}(this.view,e.changes)),(gs.ie||gs.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=function(e,t,i){let r=new jn;return nr.compare(e,t,i,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return t=dn.extendWithRanges(t,i),(0!=this.dirty||0!=t.length)&&(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=gs.chrome||gs.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(e),this.dirty=0,e&&(e.written||i.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""}));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let s of this.children)s instanceof Is&&s.widget instanceof En&&r.push(s.dom);i.updateGaps(r)}updateChildren(e,t){let i=this.childCursor(t);for(let r=e.length-1;;r--){let t=r>=0?e[r]:null;if(!t)break;let{fromA:s,toA:n,fromB:o,toB:a}=t,{content:l,breakAtStart:p,openStart:h,openEnd:c}=Ls.build(this.view.state.doc,o,a,this.decorations,this.dynamicDecorationMap),{i:d,off:u}=i.findPos(n,1),{i:f,off:m}=i.findPos(s,-1);rs(this,f,m,d,u,l,p,h,c)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!t&&!this.mayControlSelection()||gs.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let r=this.view.state.selection.main,s=this.domAtPos(r.anchor),n=r.empty?s:this.domAtPos(r.head);if(gs.gecko&&r.empty&&(1==(o=s).node.nodeType&&o.node.firstChild&&(0==o.offset||"false"==o.node.childNodes[o.offset-1].contentEditable)&&(o.offset==o.node.childNodes.length||"false"==o.node.childNodes[o.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>s.node.insertBefore(e,s.node.childNodes[s.offset]||null))),s=n=new Yr(e,0),i=!0}var o;let a=this.view.observer.selectionRange;!i&&a.focusNode&&Xr(s.node,s.offset,a.anchorNode,a.anchorOffset)&&Xr(n.node,n.offset,a.focusNode,a.focusOffset)||(this.view.observer.ignore((()=>{gs.android&&gs.chrome&&this.dom.contains(a.focusNode)&&function(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(1==i.nodeType&&"false"==i.contentEditable)return!0;return!1}(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=Rr(this.root);if(r.empty){if(gs.gecko){let e=(t=s.node,i=s.offset,1!=t.nodeType?0:(i&&"false"==t.childNodes[i-1].contentEditable?1:0)|(i<t.childNodes.length&&"false"==t.childNodes[i].contentEditable?2:0));if(e&&3!=e){let t=Qn(s.node,s.offset,1==e?1:-1);t&&(s=new Yr(t,1==e?0:t.nodeValue.length))}}e.collapse(s.node,s.offset),null!=r.bidiLevel&&null!=a.cursorBidiLevel&&(a.cursorBidiLevel=r.bidiLevel)}else if(e.extend)e.collapse(s.node,s.offset),e.extend(n.node,n.offset);else{let t=document.createRange();r.anchor>r.head&&([s,n]=[n,s]),t.setEnd(n.node,n.offset),t.setStart(s.node,s.offset),e.removeAllRanges(),e.addRange(t)}var t,i})),this.view.observer.setSelectionRange(s,n)),this.impreciseAnchor=s.precise?null:new Yr(a.anchorNode,a.anchorOffset),this.impreciseHead=n.precise?null:new Yr(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=Rr(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=Ns.find(this,e.head);if(!i)return;let r=i.posAtStart;if(e.head==r||e.head==r+i.length)return;let s=this.coordsAt(e.head,-1),n=this.coordsAt(e.head,1);if(!s||!n||s.bottom>n.top)return;let o=this.domAtPos(e.head+e.assoc);t.collapse(o.node,o.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(en)?this.root.activeElement==this.dom:Qr(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let e=es.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(i<e.length||e instanceof Ns)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,r=this.children.length-1;;r--){let s=this.children[r],n=i-s.breakAfter-s.length;if(e>n||e==n&&s.type!=Cs.WidgetBefore&&s.type!=Cs.WidgetAfter&&(!r||2==t||this.children[r-1].breakAfter||this.children[r-1].type==Cs.WidgetBefore&&t>-2))return s.coordsAt(e-n,t);i=n}}measureVisibleLineHeights(e){let t=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,n=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==fn.LTR;for(let l=0,p=0;p<this.children.length;p++){let e=this.children[p],h=l+e.length;if(h>r)break;if(l>=i){let i=e.dom.getBoundingClientRect();if(t.push(i.height),n){let t=e.dom.lastChild,r=t?jr(t):[];if(r.length){let e=r[r.length-1],t=a?e.right-i.left:i.right-e.left;t>o&&(o=t,this.minWidth=s,this.minWidthFrom=l,this.minWidthTo=h)}}}l=h+e.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?fn.RTL:fn.LTR}measureTextSize(){for(let r of this.children)if(r instanceof Ns){let e=r.measureTextSize();if(e)return e}let e,t,i=document.createElement("div");return i.className="cm-line",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let r=jr(i.firstChild)[0];e=i.getBoundingClientRect().height,t=r?r.width/27:7,i.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new is(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,r=0;;r++){let s=r==t.viewports.length?null:t.viewports[r],n=s?s.from-1:this.length;if(n>i){let r=t.lineBlockAt(n).bottom-t.lineBlockAt(i).top;e.push(Es.replace({widget:new En(r),block:!0,inclusive:!0,isBlockGap:!0}).range(i,n))}if(!s)break;i=s.to+1}return Es.set(e)}updateDeco(){let e=this.view.state.facet(ln).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let t,{range:i}=e,r=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1);if(!r)return;!i.empty&&(t=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let s=0,n=0,o=0,a=0;for(let p of this.view.state.facet(hn).map((e=>e(this.view))))if(p){let{left:e,right:t,top:i,bottom:r}=p;null!=e&&(s=Math.max(s,e)),null!=t&&(n=Math.max(n,t)),null!=i&&(o=Math.max(o,i)),null!=r&&(a=Math.max(a,r))}let l={left:r.left-s,top:r.top-o,right:r.right+n,bottom:r.bottom+a};!function(e,t,i,r,s,n,o,a){let l=e.ownerDocument,p=l.defaultView;for(let h=e;h;)if(1==h.nodeType){let e,c=h==l.body;if(c)e=Ur(p);else{if(h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.parentNode;continue}let t=h.getBoundingClientRect();e={left:t.left,right:t.left+h.clientWidth,top:t.top,bottom:t.top+h.clientHeight}}let d=0,u=0;if("nearest"==s)t.top<e.top?(u=-(e.top-t.top+o),i>0&&t.bottom>e.bottom+u&&(u=t.bottom-e.bottom+u+o)):t.bottom>e.bottom&&(u=t.bottom-e.bottom+o,i<0&&t.top-u<e.top&&(u=-(e.top+u-t.top+o)));else{let r=t.bottom-t.top,n=e.bottom-e.top;u=("center"==s&&r<=n?t.top+r/2-n/2:"start"==s||"center"==s&&i<0?t.top-o:t.bottom-n+o)-e.top}if("nearest"==r?t.left<e.left?(d=-(e.left-t.left+n),i>0&&t.right>e.right+d&&(d=t.right-e.right+d+n)):t.right>e.right&&(d=t.right-e.right+n,i<0&&t.left<e.left+d&&(d=-(e.left+d-t.left+n))):d=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-n:t.right-(e.right-e.left)+n)-e.left,d||u)if(c)p.scrollBy(d,u);else{if(u){let e=h.scrollTop;h.scrollTop+=u,u=h.scrollTop-e}if(d){let e=h.scrollLeft;h.scrollLeft+=d,d=h.scrollLeft-e}t={left:t.left-d,top:t.top-u,right:t.right-d,bottom:t.bottom-u}}if(c)break;h=h.assignedSlot||h.parentNode,r=s="nearest"}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,l,i.head<i.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==fn.LTR)}}class En extends Ms{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Rn(e){let t=e.observer.selectionRange,i=t.focusNode&&Qn(t.focusNode,t.focusOffset,0);if(!i)return null;let r=e.docView.nearest(i);if(!r)return null;if(r instanceof Ns){let e=i;for(;e.parentNode!=r.dom;)e=e.parentNode;let t=e.previousSibling;for(;t&&!es.get(t);)t=t.previousSibling;let s=t?es.get(t).posAtEnd:r.posAtStart;return{from:s,to:s,node:e,text:i}}{for(;;){let{parent:e}=r;if(!e)return null;if(e instanceof Ns)break;r=e}let e=r.posAtStart;return{from:e,to:e+r.length,node:r.dom,text:i}}}class Dn extends Ms{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return ws}}function Qn(e,t,i){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&i<=0)t=Lr(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&i>=0))return null;e=e.childNodes[t],t=0}}}class jn{constructor(){this.changes=[]}compareRange(e,t){Xs(e,t,this.changes)}comparePoint(e,t){Xs(e,t,this.changes)}}function Xn(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Nn(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function In(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Ln(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function Bn(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Vn(e,t,i){let r,s,n,o,a,l,p,h;for(let d=e.firstChild;d;d=d.nextSibling){let e=jr(d);for(let c=0;c<e.length;c++){let u=e[c];s&&In(s,u)&&(u=Ln(Bn(u,s.bottom),s.top));let f=Xn(t,u),m=Nn(i,u);if(0==f&&0==m)return 3==d.nodeType?Un(d,t,i):Vn(d,t,i);(!r||o>m||o==m&&n>f)&&(r=d,s=u,n=f,o=m),0==f?i>u.bottom&&(!p||p.bottom<u.bottom)?(a=d,p=u):i<u.top&&(!h||h.top>u.top)&&(l=d,h=u):p&&In(p,u)?p=Bn(p,u.bottom):h&&In(h,u)&&(h=Ln(h,u.top))}}if(p&&p.bottom>=i?(r=a,s=p):h&&h.top<=i&&(r=l,s=h),!r)return{node:e,offset:0};let c=Math.max(s.left,Math.min(s.right,t));return 3==r.nodeType?Un(r,c,i):n||"true"!=r.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(s.left+s.right)/2?1:0)}:Vn(r,c,i)}function Un(e,t,i){let r=e.nodeValue.length,s=-1,n=1e9,o=0;for(let a=0;a<r;a++){let r=Gr(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let p=r[l];if(p.top==p.bottom)continue;o||(o=t-p.left);let h=(p.top>i?p.top-i:i-p.bottom)-1;if(p.left-1<=t&&p.right+1>=t&&h<n){let i=t>=(p.left+p.right)/2,r=i;if(gs.chrome||gs.gecko){Gr(e,a).getBoundingClientRect().left==p.right&&(r=!i)}if(h<=0)return{node:e,offset:a+(r?1:0)};s=a+(r?1:0),n=h}}}return{node:e,offset:s>-1?s:o>0?e.nodeValue.length:0}}function zn(e,{x:t,y:i},r,s=-1){var n;let o,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:p}=e.viewState,h=i-l;if(h<0)return 0;if(h>p)return e.state.doc.length;for(let y=e.defaultLineHeight/2,O=!1;o=e.elementAtHeight(h),o.type!=Cs.Text;)for(;h=s>0?o.bottom+y:o.top-y,!(h>=0&&h<=p);){if(O)return r?null:0;O=!0,s=-s}i=l+h;let c=o.from;if(c<e.viewport.from)return 0==e.viewport.from?0:r?null:Wn(e,a,o,t,i);if(c>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:r?null:Wn(e,a,o,t,i);let d=e.dom.ownerDocument,u=e.root.elementFromPoint?e.root:d,f=u.elementFromPoint(t,i);f&&!e.contentDOM.contains(f)&&(f=null),f||(t=Math.max(a.left+1,Math.min(a.right-1,t)),f=u.elementFromPoint(t,i),f&&!e.contentDOM.contains(f)&&(f=null));let m,g=-1;if(f&&0!=(null===(n=e.docView.nearest(f))||void 0===n?void 0:n.isEditable))if(d.caretPositionFromPoint){let e=d.caretPositionFromPoint(t,i);e&&({offsetNode:m,offset:g}=e)}else if(d.caretRangeFromPoint){let e=d.caretRangeFromPoint(t,i);e&&(({startContainer:m,startOffset:g}=e),gs.safari&&function(e,t,i){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let s=e.nextSibling;s;s=s.nextSibling)if(1!=s.nodeType||"BR"!=s.nodeName)return!1;return Gr(e,r-1,r).getBoundingClientRect().left>i}(m,g,t)&&(m=void 0))}if(!m||!e.docView.dom.contains(m)){let r=Ns.find(e.docView,c);if(!r)return h>o.top+o.height/2?o.to:o.from;({node:m,offset:g}=Vn(r.dom,t,i))}return e.docView.posFromDOM(m,g)}function Wn(e,t,i,r,s){let n=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&i.height>1.5*e.defaultLineHeight){n+=Math.floor((s-i.top)/e.defaultLineHeight)*e.viewState.heightOracle.lineLength}let o=e.state.sliceDoc(i.from,i.to);return i.from+function(e,t,i,r){for(let s=0,n=0;;){if(n>=t)return s;if(s==e.length)break;n+=9==e.charCodeAt(s)?i-n%i:1,s=Vt(e,s)}return!0===r?-1:e.length}(o,n,e.state.tabSize)}function Hn(e,t,i,r){let s=e.state.doc.lineAt(t.head),n=e.bidiSpans(s),o=e.textDirectionAt(s.from);for(let a=t,l=null;;){let t=An(s,n,o,a,i),p=_n;if(!t){if(s.number==(i?e.state.doc.lines:1))return a;p="\n",s=e.state.doc.line(s.number+(i?1:-1)),n=e.bidiSpans(s),t=li.cursor(i?s.from:s.to)}if(l){if(!l(p))return a}else{if(!r)return t;l=r(p)}a=t}}function Fn(e,t,i){let r=e.state.facet(pn).map((t=>t(e)));for(;;){let e=!1;for(let s of r)s.between(i.from-1,i.from+1,((r,s,n)=>{i.from>r&&i.from<s&&(i=t.from>i.from?li.cursor(r,1):li.cursor(s,-1),e=!0)}));if(!e)return i}}class Gn{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in eo){let i=eo[t];e.contentDOM.addEventListener(t,(r=>{Jn(e,r)&&!this.ignoreDuringComposition(r)&&("keydown"==t&&this.keydown(e,r)||(this.mustFlushObserver(r)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,r)?r.preventDefault():i(e,r)))})),this.registeredEvents.push(t)}gs.chrome&&gs.chrome_version>=102&&e.scrollDOM.addEventListener("wheel",(()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout((()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""}),100)}),{passive:!0}),this.notifiedFocused=e.hasFocus,gs.safari&&e.contentDOM.addEventListener("input",(()=>null))}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var i;let r;this.customHandlers=[];for(let s of t)if(r=null===(i=s.update(e).spec)||void 0===i?void 0:i.domEventHandlers){this.customHandlers.push({plugin:s.value,handlers:r});for(let t in r)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(i=>{Jn(e,i)&&this.runCustomHandlers(t,e,i)&&i.preventDefault()})))}}runCustomHandlers(e,t,i){for(let s of this.customHandlers){let n=s.handlers[e];if(n)try{if(n.call(s.plugin,i,t)||i.defaultPrevented)return!0}catch(r){Js(t.state,r)}}return!1}runScrollHandlers(e,t){for(let r of this.customHandlers){let s=r.handlers.scroll;if(s)try{s.call(r.plugin,t,e)}catch(i){Js(e.state,i)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(gs.android&&gs.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return!(!gs.ios||!(i=Kn.find((e=>e.keyCode==t.keyCode)))||t.ctrlKey||t.altKey||t.metaKey||t.synthetic)&&(this.pendingIOSKey=i,setTimeout((()=>this.flushIOSKey(e)),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,Kr(e.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(gs.safari&&Date.now()-this.compositionEndedAt<100)&&(this.compositionEndedAt=0,!0))}mustFlushObserver(e){return"keydown"==e.type&&229!=e.keyCode||"compositionend"==e.type&&!gs.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Kn=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Zn=[16,17,18,20,91,92,224,225];class Yn{constructor(e,t,i,r){this.view=e,this.style=i,this.mustSelect=r,this.lastEvent=t;let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ji.allowMultipleSelections)&&function(e,t){let i=e.state.facet(Us);return i.length?i[0](t):gs.mac?t.metaKey:t.ctrlKey}(e,t),this.dragMove=function(e,t){let i=e.state.facet(zs);return i.length?i[0](t):gs.mac?!t.altKey:!t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let r=Rr(e.root);if(0==r.rangeCount)return!0;let s=r.getRangeAt(0).getClientRects();for(let n=0;n<s.length;n++){let e=s[n];if(e.left<=t.clientX&&e.right>=t.clientX&&e.top<=t.clientY&&e.bottom>=t.clientY)return!0}return!1}(e,t)||1!=fo(t))&&null,!1===this.dragging&&(t.preventDefault(),this.select(t))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(this.lastEvent=e)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);!this.mustSelect&&t.eq(this.view.state.selection)&&t.main.assoc==this.view.state.selection.main.assoc||this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function Jn(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(i=es.get(r))&&i.ignoreEvent(t))return!1;return!0}const eo=Object.create(null),to=gs.ie&&gs.ie_version<15||gs.ios&&gs.webkit_version<604;function io(e,t){let i,{state:r}=e,s=1,n=r.toText(t),o=n.lines==r.selection.ranges.length;if(null!=go&&r.selection.ranges.every((e=>e.empty))&&go==n.toString()){let e=-1;i=r.changeByRange((i=>{let a=r.doc.lineAt(i.from);if(a.from==e)return{range:i};e=a.from;let l=r.toText((o?n.line(s++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:li.cursor(i.from+l.length)}}))}else i=o?r.changeByRange((e=>{let t=n.line(s++);return{changes:{from:e.from,to:e.to,insert:t.text},range:li.cursor(e.from+t.length)}})):r.replaceSelection(n);e.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}eo.keydown=(e,t)=>{e.inputState.setSelectionOrigin("select"),27==t.keyCode?e.inputState.lastEscPress=Date.now():Zn.indexOf(t.keyCode)<0&&(e.inputState.lastEscPress=0)};let ro=0;function so(e,t,i,r){if(1==r)return li.cursor(t,i);if(2==r)return function(e,t,i=1){let r=e.charCategorizer(t),s=e.doc.lineAt(t),n=t-s.from;if(0==s.length)return li.cursor(t);0==n?i=1:n==s.length&&(i=-1);let o=n,a=n;i<0?o=Vt(s.text,n,!1):a=Vt(s.text,n);let l=r(s.text.slice(o,a));for(;o>0;){let e=Vt(s.text,o,!1);if(r(s.text.slice(e,o))!=l)break;o=e}for(;a<s.length;){let e=Vt(s.text,a);if(r(s.text.slice(a,e))!=l)break;a=e}return li.range(o+s.from,a+s.from)}(e.state,t,i);{let i=Ns.find(e.docView,t),r=e.state.doc.lineAt(i?i.posAtEnd:t),s=i?i.posAtStart:r.from,n=i?i.posAtEnd:r.to;return n<e.state.doc.length&&n==r.to&&n++,li.range(s,n)}}eo.touchstart=(e,t)=>{ro=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},eo.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},eo.mousedown=(e,t)=>{if(e.observer.flush(),ro>Date.now()-2e3&&1==fo(t))return;let i=null;for(let r of e.state.facet(Ws))if(i=r(e,t),i)break;if(i||0!=t.button||(i=function(e,t){let i=lo(e,t),r=fo(t),s=e.state.selection,n=i,o=t;return{update(e){e.docChanged&&(i&&(i.pos=e.changes.mapPos(i.pos)),s=s.map(e.changes),o=null)},get(t,a,l){let p;if(o&&t.clientX==o.clientX&&t.clientY==o.clientY?p=n:(p=n=lo(e,t),o=t),!p||!i)return s;let h=so(e,p.pos,p.bias,r);if(i.pos!=p.pos&&!a){let t=so(e,i.pos,i.bias,r),s=Math.min(t.from,h.from),n=Math.max(t.to,h.to);h=s<h.from?li.range(s,n):li.range(n,s)}return a?s.replaceRange(s.main.extend(h.from,h.to)):l?s.addRange(h):li.create([h])}}}(e,t)),i){let r=e.root.activeElement!=e.contentDOM;r&&e.observer.ignore((()=>Fr(e.contentDOM))),e.inputState.startMouseSelection(new Yn(e,t,i,r))}};let no=(e,t)=>e>=t.top&&e<=t.bottom,oo=(e,t,i)=>no(t,i)&&e>=i.left&&e<=i.right;function ao(e,t,i,r){let s=Ns.find(e.docView,t);if(!s)return 1;let n=t-s.posAtStart;if(0==n)return 1;if(n==s.length)return-1;let o=s.coordsAt(n,-1);if(o&&oo(i,r,o))return-1;let a=s.coordsAt(n,1);return a&&oo(i,r,a)?1:o&&no(r,o)?-1:1}function lo(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:i,bias:ao(e,i,t.clientX,t.clientY)}}const po=gs.ie&&gs.ie_version<=11;let ho=null,co=0,uo=0;function fo(e){if(!po)return e.detail;let t=ho,i=uo;return ho=e,uo=Date.now(),co=!t||i>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(co+1)%3:1}function mo(e,t,i,r){if(!i)return;let s=e.posAtCoords({x:t.clientX,y:t.clientY},!1);t.preventDefault();let{mouseSelection:n}=e.inputState,o=r&&n&&n.dragging&&n.dragMove?{from:n.dragging.from,to:n.dragging.to}:null,a={from:s,insert:i},l=e.state.changes(o?[o,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:o?"move.drop":"input.drop"})}eo.dragstart=(e,t)=>{let{selection:{main:i}}=e.state,{mouseSelection:r}=e.inputState;r&&(r.dragging=i),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(i.from,i.to)),t.dataTransfer.effectAllowed="copyMove")},eo.drop=(e,t)=>{if(!t.dataTransfer)return;if(e.state.readOnly)return t.preventDefault();let i=t.dataTransfer.files;if(i&&i.length){t.preventDefault();let r=Array(i.length),s=0,n=()=>{++s==i.length&&mo(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<i.length;e++){let t=new FileReader;t.onerror=n,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),n()},t.readAsText(i[e])}}else mo(e,t,t.dataTransfer.getData("Text"),!0)},eo.paste=(e,t)=>{if(e.state.readOnly)return t.preventDefault();e.observer.flush();let i=to?null:t.clipboardData;i?(io(e,i.getData("text/plain")),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((()=>{e.focus(),i.remove(),io(e,i.value)}),50)}(e)};let go=null;function yo(e){setTimeout((()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)}function Oo(e,t){if(e.docView.compositionDeco.size){e.inputState.rapidCompositionStart=t;try{e.update([])}finally{e.inputState.rapidCompositionStart=!1}}}eo.copy=eo.cut=(e,t)=>{let{text:i,ranges:r,linewise:s}=function(e){let t=[],i=[],r=!1;for(let s of e.selection.ranges)s.empty||(t.push(e.sliceDoc(s.from,s.to)),i.push(s));if(!t.length){let s=-1;for(let{from:r}of e.selection.ranges){let n=e.doc.lineAt(r);n.number>s&&(t.push(n.text),i.push({from:n.from,to:Math.min(e.doc.length,n.to+1)})),s=n.number}r=!0}return{text:t.join(e.lineBreak),ranges:i,linewise:r}}(e.state);if(!i&&!s)return;go=s?i:null;let n=to?null:t.clipboardData;n?(t.preventDefault(),n.clearData(),n.setData("text/plain",i)):function(e,t){let i=e.dom.parentNode;if(!i)return;let r=i.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}(e,i),"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})},eo.focus=yo,eo.blur=e=>{e.observer.clearSelectionRange(),yo(e)},eo.compositionstart=eo.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0,e.docView.compositionDeco.size&&(e.observer.flush(),Oo(e,!0)))},eo.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionFirstChange=null,setTimeout((()=>{e.inputState.composing<0&&Oo(e,!1)}),50)},eo.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},eo.beforeinput=(e,t)=>{var i;let r;if(gs.chrome&&gs.android&&(r=Kn.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0;setTimeout((()=>{var i;((null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}};const bo=["pre-wrap","normal","pre-line","break-spaces"];class vo{constructor(){this.doc=Mt.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return bo.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,i,r,s){let n=bo.indexOf(e)>-1,o=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=n;if(this.lineWrapping=n,this.lineHeight=t,this.charWidth=i,this.lineLength=r,o){this.heightSamples={};for(let e=0;e<s.length;e++){let t=s[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return o}}class wo{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Po{constructor(e,t,i,r,s){this.from=e,this.length=t,this.top=i,this.height=r,this.type=s}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Po(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var ko=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(ko||(ko={}));const xo=.001;class So{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>xo&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return So.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,r){let s=this;for(let n=r.length-1;n>=0;n--){let{fromA:o,toA:a,fromB:l,toB:p}=r[n],h=s.lineAt(o,ko.ByPosNoHeight,t,0,0),c=h.to>=a?h:s.lineAt(a,ko.ByPosNoHeight,t,0,0);for(p+=c.to-a,a=c.to;n>0&&h.from<=r[n-1].toA;)o=r[n-1].fromA,l=r[n-1].fromB,n--,o<h.from&&(h=s.lineAt(o,ko.ByPosNoHeight,t,0,0));l+=h.from-o,o=h.from;let d=Mo.build(i,e,l,p);s=s.replace(o,a,d)}return s.updateHeight(i,0)}static empty(){return new Ao(0,0)}static of(e){if(1==e.length)return e[0];let t=0,i=e.length,r=0,s=0;for(;;)if(t==i)if(r>2*s){let s=e[t-1];s.break?e.splice(--t,1,s.left,null,s.right):e.splice(--t,1,s.left,s.right),i+=1+s.break,r-=s.size}else{if(!(s>2*r))break;{let t=e[i];t.break?e.splice(i,1,t.left,null,t.right):e.splice(i,1,t.left,t.right),i+=2+t.break,s-=t.size}}else if(r<s){let i=e[t++];i&&(r+=i.size)}else{let t=e[--i];t&&(s+=t.size)}let n=0;return null==e[t-1]?(n=1,t--):null==e[t]&&(n=1,i++),new $o(So.of(e.slice(0,t)),n,So.of(e.slice(i)))}}So.prototype.size=1;class _o extends So{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,r){return new Po(r,this.length,i,this.height,this.type)}lineAt(e,t,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,t,i,r,s,n){e<=s+this.length&&t>=s&&n(this.blockAt(0,i,r,s))}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ao extends _o{constructor(e,t){super(e,t,Cs.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let r=i[0];return 1==i.length&&(r instanceof Ao||r instanceof qo&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof qo?r=new Ao(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):So.of(i)}updateHeight(e,t=0,i=!1,r){return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class qo extends So{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,r=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:r,lineHeight:this.height/(r-i+1)}}blockAt(e,t,i,r){let{firstLine:s,lastLine:n,lineHeight:o}=this.lines(t,r),a=Math.max(0,Math.min(n-s,Math.floor((e-i)/o))),{from:l,length:p}=t.line(s+a);return new Po(l,p,i+o*a,o,Cs.Text)}lineAt(e,t,i,r,s){if(t==ko.ByHeight)return this.blockAt(e,i,r,s);if(t==ko.ByPosNoHeight){let{from:t,to:r}=i.lineAt(e);return new Po(t,r-t,0,0,Cs.Text)}let{firstLine:n,lineHeight:o}=this.lines(i,s),{from:a,length:l,number:p}=i.lineAt(e);return new Po(a,l,r+o*(p-n),o,Cs.Text)}forEachLine(e,t,i,r,s,n){let{firstLine:o,lineHeight:a}=this.lines(i,s);for(let l=Math.max(e,s),p=Math.min(s+this.length,t);l<=p;){let t=i.lineAt(l);l==e&&(r+=a*(t.number-o)),n(new Po(t.from,t.length,r,a,Cs.Text)),r+=a,l=t.to+1}}replace(e,t,i){let r=this.length-t;if(r>0){let e=i[i.length-1];e instanceof qo?i[i.length-1]=new qo(e.length+r):i.push(null,new qo(r-1))}if(e>0){let t=i[0];t instanceof qo?i[0]=new qo(e+t.length):i.unshift(new qo(e-1),null)}return So.of(i)}decomposeLeft(e,t){t.push(new qo(e-1),null)}decomposeRight(e,t){t.push(null,new qo(this.length-e-1))}updateHeight(e,t=0,i=!1,r){let s=t+this.length;if(r&&r.from<=t+this.length&&r.more){let i=[],n=Math.max(t,r.from),o=-1,a=e.heightChanged;for(r.from>t&&i.push(new qo(r.from-t-1).updateHeight(e,t));n<=s&&r.more;){let t=e.doc.lineAt(n).length;i.length&&i.push(null);let s=r.heights[r.index++];-1==o?o=s:Math.abs(s-o)>=xo&&(o=-2);let a=new Ao(t,s);a.outdated=!1,i.push(a),n+=t+1}n<=s&&i.push(null,new qo(s-n).updateHeight(e,n));let l=So.of(i);return e.heightChanged=a||o<0||Math.abs(l.height-this.height)>=xo||Math.abs(o-this.lines(e.doc,t).lineHeight)>=xo,l}return(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class $o extends So{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return 1&this.flags}blockAt(e,t,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,t,i,r):this.right.blockAt(e,t,s,r+this.left.length+this.break)}lineAt(e,t,i,r,s){let n=r+this.left.height,o=s+this.left.length+this.break,a=t==ko.ByHeight?e<n:e<o,l=a?this.left.lineAt(e,t,i,r,s):this.right.lineAt(e,t,i,n,o);if(this.break||(a?l.to<o:l.from>o))return l;let p=t==ko.ByPosNoHeight?ko.ByPosNoHeight:ko.ByPos;return a?l.join(this.right.lineAt(o,p,i,n,o)):this.left.lineAt(o,p,i,r,s).join(l)}forEachLine(e,t,i,r,s,n){let o=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,r,s,n),t>=a&&this.right.forEachLine(e,t,i,o,a,n);else{let l=this.lineAt(a,ko.ByPos,i,r,s);e<l.from&&this.left.forEachLine(e,l.from-1,i,r,s,n),l.to>=e&&l.from<=t&&n(l),t>l.to&&this.right.forEachLine(l.to+1,t,i,o,a,n)}}replace(e,t,i){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let n=s.length;for(let o of i)s.push(o);if(e>0&&To(s,n-1),t<this.length){let e=s.length;this.decomposeRight(t,s),To(s,e)}return So.of(s)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?So.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,r){let{left:s,right:n}=this,o=t+s.length+this.break,a=null;return r&&r.from<=t+s.length&&r.more?a=s=s.updateHeight(e,t,i,r):s.updateHeight(e,t,i),r&&r.from<=o+n.length&&r.more?a=n=n.updateHeight(e,o,i,r):n.updateHeight(e,o,i),a?this.balanced(s,n):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function To(e,t){let i,r;null==e[t]&&(i=e[t-1])instanceof qo&&(r=e[t+1])instanceof qo&&e.splice(t-1,3,new qo(i.length+1+r.length))}class Mo{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Ao?i.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Ao(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0;r<0&&(r=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new _o(s,r,i.type)):(s||r>=5)&&this.addLineDeco(r,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ao(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new qo(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ao)return e;let t=new Ao(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type!=Cs.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=Cs.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Ao||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Ao(0,-1));let i=e;for(let r of this.nodes)r instanceof Ao&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,t,i,r){let s=new Mo(i,e);return nr.spans(t,i,r,s,0),s.finish(i)}}class Co{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,r){(e<t||i&&i.heightRelevant||r&&r.heightRelevant)&&Xs(e,t,this.changes,5)}}function Eo(e,t){let i=e.getBoundingClientRect(),r=Math.max(0,i.left),s=Math.min(innerWidth,i.right),n=Math.max(0,i.top),o=Math.min(innerHeight,i.bottom),a=e.ownerDocument.body;for(let l=e.parentNode;l&&l!=a;)if(1==l.nodeType){let e=l,t=window.getComputedStyle(e);if((e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&"visible"!=t.overflow){let t=e.getBoundingClientRect();r=Math.max(r,t.left),s=Math.min(s,t.right),n=Math.max(n,t.top),o=Math.min(o,t.bottom)}l="absolute"==t.position||"fixed"==t.position?e.offsetParent:e.parentNode}else{if(11!=l.nodeType)break;l=l.host}return{left:r-i.left,right:Math.max(r,s)-i.left,top:n-(i.top+t),bottom:Math.max(n,o)-(i.top+t)}}function Ro(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}class Do{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=t[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e){return Es.replace({widget:new Qo(this.size,e)}).range(this.from,this.to)}}class Qo extends Ms{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class jo{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new vo,this.scaler=Uo,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=fn.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(ln).filter((e=>"function"!=typeof e)),this.heightMap=So.empty().applyChanges(this.stateDeco,Mt.empty,this.heightOracle.setDoc(e.doc),[new dn(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Es.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let r=i?t.head:t.anchor;if(!e.some((({from:e,to:t})=>r>=e&&r<=t))){let{from:t,to:i}=this.lineBlockAt(r);e.push(new Xo(t,i))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?Uo:new zo(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:Wo(e,this.scaler))}))}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(ln).filter((e=>"function"!=typeof e));let r=e.changedRanges,s=dn.extendWithRanges(r,function(e,t,i){let r=new Co;return nr.compare(e,t,i,r,0),r.changes}(i,this.stateDeco,e?e.changes:ei.empty(this.state.doc.length))),n=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=n&&(e.flags|=2);let o=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<o.from||t.range.head>o.to)||!this.viewportIsAppropriate(o))&&(o=this.getViewport(0,t));let a=!e.changes.empty||2&e.flags||o.from!=this.viewport.from||o.to!=this.viewport.to;this.viewport=o,this.updateForViewport(),a&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection="rtl"==i.direction?fn.RTL:fn.LTR;let n=this.heightOracle.mustRefreshForWrapping(s),o=n||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let a=0,l=0,p=parseInt(i.paddingTop)||0,h=parseInt(i.paddingBottom)||0;this.paddingTop==p&&this.paddingBottom==h||(this.paddingTop=p,this.paddingBottom=h,a|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(o=!0),this.editorWidth=e.scrollDOM.clientWidth,a|=8);let c=(this.printing?Ro:Eo)(t,this.paddingTop),d=c.top-this.pixelViewport.top,u=c.bottom-this.pixelViewport.bottom;this.pixelViewport=c;let f=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(f!=this.inView&&(this.inView=f,f&&(o=!0)),!this.inView)return 0;let m=t.clientWidth;if(this.contentDOMWidth==m&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=m,this.editorHeight=e.scrollDOM.clientHeight,a|=8),o){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(n=!0),n||r.lineWrapping&&Math.abs(m-this.contentDOMWidth)>r.charWidth){let{lineHeight:i,charWidth:o}=e.docView.measureTextSize();n=r.refresh(s,i,o,m/o,t),n&&(e.docView.minWidth=0,a|=8)}d>0&&u>0?l=Math.max(d,u):d<0&&u<0&&(l=Math.min(d,u)),r.heightChanged=!1;for(let i of this.viewports){let s=i.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(i);this.heightMap=this.heightMap.updateHeight(r,0,n,new wo(i.from,s))}r.heightChanged&&(a|=2)}let g=!this.viewportIsAppropriate(this.viewport,l)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return g&&(this.viewport=this.getViewport(l,this.scrollTarget)),this.updateForViewport(),(2&a||g)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(n?[]:this.lineGaps)),a|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),a}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.state.doc,{visibleTop:n,visibleBottom:o}=this,a=new Xo(r.lineAt(n-1e3*i,ko.ByHeight,s,0,0).from,r.lineAt(o+1e3*(1-i),ko.ByHeight,s,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let i,n=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=r.lineAt(e,ko.ByPos,s,0,0);i="center"==t.y?(o.top+o.bottom)/2-n/2:"start"==t.y||"nearest"==t.y&&e<a.from?o.top:o.bottom-n,a=new Xo(r.lineAt(i-500,ko.ByHeight,s,0,0).from,r.lineAt(i+n+500,ko.ByHeight,s,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Xo(this.heightMap.lineAt(i,ko.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(r,ko.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,ko.ByPos,this.state.doc,0,0),{bottom:s}=this.heightMap.lineAt(t,ko.ByPos,this.state.doc,0,0),{visibleTop:n,visibleBottom:o}=this;return(0==e||r<=n-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||s>=o+Math.max(10,Math.min(i,250)))&&r>n-2e3&&s<o+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let r of e)t.touchesRange(r.from,r.to)||i.push(new Do(t.mapPos(r.from),t.mapPos(r.to),r.size));return i}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=fn.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let r,s,n=No(i.from,i.to,this.stateDeco);if(n.total<4e3)continue;if(this.heightOracle.lineWrapping){let e=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;r=Io(n,(this.visibleTop-i.top-e)/i.height),s=Io(n,(this.visibleBottom-i.top+e)/i.height)}else{let e=n.total*this.heightOracle.charWidth,t=2e3*this.heightOracle.charWidth;r=Io(n,(this.pixelViewport.left-t)/e),s=Io(n,(this.pixelViewport.right+t)/e)}let o=[];r>i.from&&o.push({from:i.from,to:r}),s<i.to&&o.push({from:s,to:i.to});let a=this.state.selection.main;a.from>=i.from&&a.from<=i.to&&Bo(o,a.from-10,a.from+10),!a.empty&&a.to>=i.from&&a.to<=i.to&&Bo(o,a.to-10,a.to+10);for(let{from:l,to:p}of o)p-l>1e3&&t.push(Vo(e,(e=>e.from>=i.from&&e.to<=i.to&&Math.abs(e.from-l)<1e3&&Math.abs(e.to-p)<1e3))||new Do(l,p,this.gapSize(i,l,p,n)))}return t}gapSize(e,t,i,r){let s=Lo(r,i)-Lo(r,t);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Do.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Es.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];nr.spans(e,this.viewport.from,this.viewport.to,{span(e,i){t.push({from:e,to:i})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,i)=>e.from!=t[i].from||e.to!=t[i].to));return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||Wo(this.heightMap.lineAt(e,ko.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Wo(this.heightMap.lineAt(this.scaler.fromDOM(e),ko.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Wo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Xo{constructor(e,t){this.from=e,this.to=t}}function No(e,t,i){let r=[],s=e,n=0;return nr.spans(i,e,t,{span(){},point(e,t){e>s&&(r.push({from:s,to:e}),n+=e-s),s=t}},20),s<t&&(r.push({from:s,to:t}),n+=t-s),{total:n,ranges:r}}function Io({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let r=Math.floor(e*i);for(let s=0;;s++){let{from:e,to:i}=t[s],n=i-e;if(r<=n)return e+r;r-=n}}function Lo(e,t){let i=0;for(let{from:r,to:s}of e.ranges){if(t<=s){i+=t-r;break}i+=s-r}return i/e.total}function Bo(e,t,i){for(let r=0;r<e.length;r++){let s=e[r];if(s.from<i&&s.to>t){let n=[];s.from<t&&n.push({from:s.from,to:t}),s.to>i&&n.push({from:i,to:s.to}),e.splice(r,1,...n),r+=n.length-1}}}function Vo(e,t){for(let i of e)if(t(i))return i}const Uo={toDOM:e=>e,fromDOM:e=>e,scale:1};class zo{constructor(e,t,i){let r=0,s=0,n=0;this.viewports=i.map((({from:i,to:s})=>{let n=t.lineAt(i,ko.ByPos,e,0,0).top,o=t.lineAt(s,ko.ByPos,e,0,0).bottom;return r+=o-n,{from:i,to:s,top:n,bottom:o,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let o of this.viewports)o.domTop=n+(o.top-s)*this.scale,n=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let t=0,i=0,r=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function Wo(e,t){if(1==t.scale)return e;let i=t.toDOM(e.top),r=t.toDOM(e.bottom);return new Po(e.from,e.length,i,r-i,Array.isArray(e.type)?e.type.map((e=>Wo(e,t))):e.type)}const Ho=ci.define({combine:e=>e.join(" ")}),Fo=ci.define({combine:e=>e.indexOf(!0)>-1}),Go=wr.newName(),Ko=wr.newName(),Zo=wr.newName(),Yo={"&light":"."+Ko,"&dark":"."+Zo};function Jo(e,t,i){return new wr(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!i||!i[t])throw new RangeError(`Unsupported selector: ${t}`);return i[t]})):e+" "+t})}const ea=Jo("."+Go,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Yo),ta={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ia=gs.ie&&gs.ie_version<=11;class ra{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new zr,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(gs.ie&&gs.ie_version<=11||gs.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),ia&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),"function"==typeof ResizeObserver&&(this.resize=new ResizeObserver((()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()})),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,i)=>t!=e[i])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet(en)?t.root.activeElement!=this.dom:!Qr(t.dom,i))return;let r=i.anchorNode&&t.docView.nearest(i.anchorNode);r&&r.ignoreEvent(e)||((gs.ie&&gs.ie_version<=11||gs.android&&gs.chrome)&&!t.state.selection.main.empty&&i.focusNode&&Xr(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=Rr(e),i=gs.safari&&11==e.nodeType&&function(){let e=document.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}()==this.view.contentDOM&&function(e){let t=null;function i(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",i,!0),document.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",i,!0),!t)return null;let r=t.startContainer,s=t.startOffset,n=t.endContainer,o=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);Xr(a.node,a.offset,n,o)&&([r,s,n,o]=[n,o,r,s]);return{anchorNode:r,anchorOffset:s,focusNode:n,focusOffset:o}}(this.view)||t;return!this.selectionRange.eq(i)&&(this.selectionRange.setRange(i),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(1==i.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ta),ia&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ia&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame((()=>{let e=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||Kr(this.view.contentDOM,e.key,e.keyCode)})),this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((()=>{this.delayedFlush=-1,this.flush()}),20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let s of this.observer.takeRecords())e.push(s);e.length&&(this.queue=[]);let t=-1,i=-1,r=!1;for(let s of e){let e=this.readMutation(s);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:i}=e):(t=Math.min(e.from,t),i=Math.max(e.to,i)))}return{from:t,to:i,typeOver:r}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:r}=this.processRecords(),s=this.selectionChanged&&Qr(this.dom,this.selectionRange);if(t<0&&!s)return;this.selectionChanged=!1;let n=this.view.state,o=this.onChange(t,i,r);return this.view.state==n&&this.view.update([]),o}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.dirty|=4),"childList"==e.type){let i=sa(t,e.previousSibling||e.target.previousSibling,-1),r=sa(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(i=this.resize)||void 0===i||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function sa(e,t,i){for(;t;){let r=es.get(t);if(r&&r.parent==e)return r;let s=t.parentNode;t=s!=e.dom?s:i>0?t.nextSibling:t.previousSibling}return null}function na(e,t,i,r){let s,n,o=e.state.selection.main;if(t>-1){let r=e.docView.domBoundsAround(t,i,0);if(!r||e.state.readOnly)return!1;let{from:a,to:l}=r,p=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:n}=e.observer.selectionRange;i&&(t.push(new Mn(i,r)),s==i&&n==r||t.push(new Mn(s,n)));return t}(e),h=new $n(p,e.state);h.readRange(r.startDOM,r.endDOM);let c=o.from,d=null;(8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100||gs.android&&h.text.length<l-a)&&(c=o.to,d="end");let u=function(e,t,i,r){let s=Math.min(e.length,t.length),n=0;for(;n<s&&e.charCodeAt(n)==t.charCodeAt(n);)n++;if(n==s&&e.length==t.length)return null;let o=e.length,a=t.length;for(;o>0&&a>0&&e.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;if("end"==r){i-=o+Math.max(0,n-Math.min(o,a))-n}if(o<n&&e.length<t.length){n-=i<=n&&i>=o?n-i:0,a=n+(a-o),o=n}else if(a<n){n-=i<=n&&i>=a?n-i:0,o=n+(o-a),a=n}return{from:n,toA:o,toB:a}}(e.state.doc.sliceString(a,l,qn),h.text,c-a,d);u&&(gs.chrome&&13==e.inputState.lastKeyCode&&u.toB==u.from+2&&h.text.slice(u.from,u.toB)==qn+qn&&u.toB--,s={from:a+u.from,to:a+u.toA,insert:Mt.of(h.text.slice(u.from,u.toB).split(qn))}),n=function(e,t){if(0==e.length)return null;let i=e[0].pos,r=2==e.length?e[1].pos:i;return i>-1&&r>-1?li.single(i+t,r+t):null}(p,a)}else if(e.hasFocus||!e.state.facet(en)){let t=e.observer.selectionRange,{impreciseHead:i,impreciseAnchor:r}=e.docView,s=i&&i.node==t.focusNode&&i.offset==t.focusOffset||!Dr(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),a=r&&r.node==t.anchorNode&&r.offset==t.anchorOffset||!Dr(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);s==o.head&&a==o.anchor||(n=li.single(a,s))}if(!s&&!n)return!1;if(!s&&r&&!o.empty&&n&&n.main.empty?s={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,o.to)}:s&&s.from>=o.from&&s.to<=o.to&&(s.from!=o.from||s.to!=o.to)&&o.to-o.from-(s.to-s.from)<=4?s={from:o.from,to:o.to,insert:e.state.doc.slice(o.from,s.from).append(s.insert).append(e.state.doc.slice(s.to,o.to))}:(gs.mac||gs.android)&&s&&s.from==s.to&&s.from==o.head-1&&"."==s.insert.toString()&&(s={from:o.from,to:o.to,insert:Mt.of([" "])}),s){let t=e.state;if(gs.ios&&e.inputState.flushIOSKey(e))return!0;if(gs.android&&(s.from==o.from&&s.to==o.to&&1==s.insert.length&&2==s.insert.lines&&Kr(e.contentDOM,"Enter",13)||s.from==o.from-1&&s.to==o.to&&0==s.insert.length&&Kr(e.contentDOM,"Backspace",8)||s.from==o.from&&s.to==o.to+1&&0==s.insert.length&&Kr(e.contentDOM,"Delete",46)))return!0;let i,r=s.insert.toString();if(e.state.facet(Gs).some((t=>t(e,s.from,s.to,r))))return!0;if(e.inputState.composing>=0&&e.inputState.composing++,s.from>=o.from&&s.to<=o.to&&s.to-s.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==s.from+s.insert.length)&&e.inputState.composing<0){let r=o.from<s.from?t.sliceDoc(o.from,s.from):"",n=o.to>s.to?t.sliceDoc(s.to,o.to):"";i=t.replaceSelection(e.state.toText(r+s.insert.sliceString(0,void 0,e.state.lineBreak)+n))}else{let r=t.changes(s),a=n&&!t.selection.main.eq(n.main)&&n.main.to<=r.newLength?n.main:void 0;if(t.selection.ranges.length>1&&e.inputState.composing>=0&&s.to<=o.to&&s.to>=o.to-10){let n=e.state.sliceDoc(s.from,s.to),l=Rn(e)||e.state.doc.lineAt(o.head),p=o.to-s.to,h=o.to-o.from;i=t.changeByRange((i=>{if(i.from==o.from&&i.to==o.to)return{changes:r,range:a||i.map(r)};let c=i.to-p,d=c-n.length;if(i.to-i.from!=h||e.state.sliceDoc(d,c)!=n||l&&i.to>=l.from&&i.from<=l.to)return{range:i};let u=t.changes({from:d,to:c,insert:s.insert}),f=i.to-o.to;return{changes:u,range:a?li.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):i.map(u)}}))}else i={changes:r,selection:a&&t.selection.replaceRange(a)}}let a="input.type";return e.composing&&(a+=".compose",e.inputState.compositionFirstChange&&(a+=".start",e.inputState.compositionFirstChange=!1)),e.dispatch(i,{scrollIntoView:!0,userEvent:a}),!0}if(n&&!n.main.eq(o)){let t=!1,i="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),i=e.inputState.lastSelectionOrigin),e.dispatch({selection:n,scrollIntoView:t,userEvent:i}),!0}return!1}class oa{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this.root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new jo(e.state||Ji.create(e)),this.plugins=this.state.facet(rn).map((e=>new nn(e)));for(let t of this.plugins)t.update(this);this.observer=new ra(this,((e,t,i)=>na(this,e,t,i)),(e=>{this.inputState.runScrollHandlers(this,e),this.observer.intersecting&&this.measure()})),this.inputState=new Gn(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new Cn(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof Bi?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,i=!1,r=!1,s=this.state;for(let o of e){if(o.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=o.state}if(this.destroyed)return void(this.viewState.state=s);if(this.observer.clear(),s.facet(Ji.phrases)!=this.state.facet(Ji.phrases))return this.setState(s);t=un.create(this,s,e);let n=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(n&&(n=n.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;n=new Zs(e.empty?e:li.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Ys)&&(n=e.value)}this.viewState.update(t,n),this.bidiCache=pa.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),i=this.docView.update(t),this.state.facet(cn)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(Ho)!=t.state.facet(Ho)&&(this.viewState.mustMeasureContent=!0),(i||r||n||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let o of this.state.facet(Fs))o(t)}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new jo(e),this.plugins=e.facet(rn).map((e=>new nn(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView=new Cn(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(rn),i=e.state.facet(rn);if(t!=i){let r=[];for(let s of i){let i=t.indexOf(s);if(i<0)r.push(new nn(s));else{let t=this.plugins[i];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let e=0;;e++){this.updateState=1;let r=this.viewport,s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5)break;let n=[];4&s||([this.measureRequests,n]=[n,this.measureRequests]);let o=n.map((e=>{try{return e.read(this)}catch(t){return Js(this.state,t),la}})),a=un.create(this,this.state,[]),l=!1,p=!1;a.flags|=s,t?t.flags|=s:t=a,this.updateState=2,a.empty||(this.updatePlugins(a),this.inputState.update(a),this.updateAttrs(),l=this.docView.update(a));for(let e=0;e<n.length;e++)if(o[e]!=la)try{let t=n[e];t.write&&t.write(o[e],this)}catch(i){Js(this.state,i)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,p=!0),l&&this.docView.updateSelection(!0),this.viewport.from==r.from&&this.viewport.to==r.to&&!p&&0==this.measureRequests.length)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let r of this.state.facet(Fs))r(t)}get themeClasses(){return Go+" "+(this.state.facet(Fo)?Zo:Ko)+" "+this.state.facet(Ho)}updateAttrs(){let e=ha(this,on,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(en)?"true":"false",class:"cm-content",style:`${gs.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),ha(this,an,t);let i=this.observer.ignore((()=>{let i=Ts(this.contentDOM,this.contentAttrs,t),r=Ts(this.dom,this.editorAttrs,e);return i||r}));return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let e of i.effects)if(e.is(oa.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(cn),wr.mount(this.root,this.styleModules.concat(ea).reverse())}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((()=>this.measure()))),e){if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Fn(this,e,Hn(this,e,t,i))}moveByGroup(e,t){return Fn(this,e,Hn(this,e,t,(t=>function(e,t,i){let r=e.state.charCategorizer(t),s=r(i);return e=>{let t=r(e);return s==Gi.Space&&(s=t),s==t}}(this,e.head,t))))}moveToLineBoundary(e,t,i=!0){return function(e,t,i,r){let s=e.state.doc.lineAt(t.head),n=r&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>s.from?t.head-1:t.head):null;if(n){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(s.from),o=e.posAtCoords({x:i==(r==fn.LTR)?t.right-1:t.left+1,y:(n.top+n.bottom)/2});if(null!=o)return li.cursor(o,i?-1:1)}let o=Ns.find(e.docView,t.head),a=o?i?o.posAtEnd:o.posAtStart:i?s.to:s.from;return li.cursor(a,i?-1:1)}(this,e,t,i)}moveVertically(e,t,i){return Fn(this,e,function(e,t,i,r){let s=t.head,n=i?1:-1;if(s==(i?e.state.doc.length:0))return li.cursor(s,t.assoc);let o,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),p=e.coordsAtPos(s),h=e.documentTop;if(p)null==a&&(a=p.left-l.left),o=n<0?p.top:p.bottom;else{let t=e.viewState.lineBlockAt(s);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(s-t.from))),o=(n<0?t.top:t.bottom)+h}let c=l.left+a,d=null!=r?r:e.defaultLineHeight>>1;for(let u=0;;u+=10){let i=o+(d+u)*n,r=zn(e,{x:c,y:i},!1,n);if(i<l.top||i>l.bottom||(n<0?r<s:r>s))return li.cursor(r,t.assoc,void 0,a)}}(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),zn(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r);return Vr(i,s[kn.find(s,e-r.from,-1,t)].dir==fn.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Ks)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>aa)return Sn(e.length);let t=this.textDirectionAt(e.from);for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t)return r.order;let i=function(e,t){let i=e.length,r=t==mn?1:2,s=t==mn?2:1;if(!e||1==r&&!Pn.test(e))return Sn(i);for(let a=0,l=r,p=r;a<i;a++){let t=(n=e.charCodeAt(a))<=247?On[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?bn[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203||8204==n?256:1;512==t?t=l:8==t&&4==p&&(t=16),xn[a]=4==t?2:t,7&t&&(p=t),l=t}var n;for(let a=0,l=r,p=r;a<i;a++){let e=xn[a];if(128==e)a<i-1&&l==xn[a+1]&&24&l?e=xn[a]=l:xn[a]=256;else if(64==e){let e=a+1;for(;e<i&&64==xn[e];)e++;let t=a&&8==l||e<i&&8==xn[e]?1==p?1:8:256;for(let i=a;i<e;i++)xn[i]=t;a=e-1}else 8==e&&1==p&&(xn[a]=1);l=e,7&e&&(p=e)}for(let a,l,p,h=0,c=0,d=0;h<i;h++)if(l=vn[a=e.charCodeAt(h)])if(l<0){for(let e=c-3;e>=0;e-=3)if(wn[e+1]==-l){let t=wn[e+2],i=2&t?r:4&t?1&t?s:r:0;i&&(xn[h]=xn[wn[e]]=i),c=e;break}}else{if(189==wn.length)break;wn[c++]=h,wn[c++]=a,wn[c++]=d}else if(2==(p=xn[h])||1==p){let e=p==r;d=e?0:1;for(let t=c-3;t>=0;t-=3){let i=wn[t+2];if(2&i)break;if(e)wn[t+2]|=2;else{if(4&i)break;wn[t+2]|=4}}}for(let a=0;a<i;a++)if(256==xn[a]){let e=a+1;for(;e<i&&256==xn[e];)e++;let t=1==(a?xn[a-1]:r),s=t==(1==(e<i?xn[e]:r))?t?1:2:r;for(let i=a;i<e;i++)xn[i]=s;a=e-1}let o=[];if(1==r)for(let a=0;a<i;){let e=a,t=1!=xn[a++];for(;a<i&&t==(1!=xn[a]);)a++;if(t)for(let i=a;i>e;){let t=i,r=2!=xn[--i];for(;i>e&&r==(2!=xn[i-1]);)i--;o.push(new kn(i,t,r?2:1))}else o.push(new kn(e,a,0))}else for(let a=0;a<i;){let e=a,t=2==xn[a++];for(;a<i&&t==(2==xn[a]);)a++;o.push(new kn(e,a,t?1:2))}return o}(e.text,t);return this.bidiCache.push(new pa(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||gs.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Fr(this.contentDOM),this.docView.updateSelection()}))}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ys.of(new Zs("number"==typeof e?li.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return sn.define((()=>({})),{eventHandlers:e})}static theme(e,t){let i=wr.newName(),r=[Ho.of(i),cn.of(Jo(`.${i}`,e))];return t&&t.dark&&r.push(Fo.of(!0)),r}static baseTheme(e){return xi.lowest(cn.of(Jo("."+Go,e,Yo)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),r=i&&es.get(i)||es.get(e);return(null===(t=null==r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}oa.styleModule=cn,oa.inputHandler=Gs,oa.perLineTextDirection=Ks,oa.exceptionSink=Hs,oa.updateListener=Fs,oa.editable=en,oa.mouseSelectionStyle=Ws,oa.dragMovesSelection=zs,oa.clickAddsSelectionRange=Us,oa.decorations=ln,oa.atomicRanges=pn,oa.scrollMargins=hn,oa.darkTheme=Fo,oa.contentAttributes=an,oa.editorAttributes=on,oa.lineWrapping=oa.contentAttributes.of({class:"cm-lineWrapping"}),oa.announce=Li.define();const aa=4096,la={};class pa{constructor(e,t,i,r){this.from=e,this.to=t,this.dir=i,this.order=r}static update(e,t){if(t.empty)return e;let i=[],r=e.length?e[e.length-1].dir:fn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let n=e[s];n.dir!=r||t.touchesRange(n.from,n.to)||i.push(new pa(t.mapPos(n.from,1),t.mapPos(n.to,-1),n.dir,n.order))}return i}}function ha(e,t,i){for(let r=e.state.facet(t),s=r.length-1;s>=0;s--){let t=r[s],n="function"==typeof t?t(e):t;n&&qs(n,i)}return i}const ca=gs.mac?"mac":gs.windows?"win":gs.linux?"linux":"key";function da(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}const ua=oa.domEventHandlers({keydown:(e,t)=>function(e,t,i,r){let s=function(e){var t=!(Mr&&(e.ctrlKey||e.altKey||e.metaKey)||(Ar||Tr)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?Sr:xr)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),n=1==s.length&&" "!=s,o="",a=!1;ga&&ga.view==i&&ga.scope==r&&(o=ga.prefix+" ",(a=Zn.indexOf(t.keyCode)<0)&&(ga=null));let l,p=e=>{if(e){for(let t of e.commands)if(t(i))return!0;e.preventDefault&&(a=!0)}return!1},h=e[r];if(h){if(p(h[o+da(s,t,!n)]))return!0;if(n&&(t.shiftKey||t.altKey||t.metaKey)&&(l=xr[t.keyCode])&&l!=s){if(p(h[o+da(l,t,!0)]))return!0}else if(n&&t.shiftKey&&p(h[o+da(s,t,!0)]))return!0}return a}(function(e){let t=e.facet(fa),i=ma.get(t);i||ma.set(t,i=function(e,t=ca){let i=Object.create(null),r=Object.create(null),s=(e,t)=>{let i=r[e];if(null==i)r[e]=t;else if(i!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},n=(e,r,n,o)=>{let a=i[e]||(i[e]=Object.create(null)),l=r.split(/ (?!$)/).map((e=>function(e,t){const i=e.split(/-(?!$)/);let r,s,n,o,a=i[i.length-1];"Space"==a&&(a=" ");for(let l=0;l<i.length-1;++l){const e=i[l];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))r=!0;else if(/^(c|ctrl|control)$/i.test(e))s=!0;else if(/^s(hift)?$/i.test(e))n=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);"mac"==t?o=!0:s=!0}}return r&&(a="Alt-"+a),s&&(a="Ctrl-"+a),o&&(a="Meta-"+a),n&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<l.length;t++){let i=l.slice(0,t).join(" ");s(i,!0),a[i]||(a[i]={preventDefault:!0,commands:[t=>{let r=ga={view:t,prefix:i,scope:e};return setTimeout((()=>{ga==r&&(ga=null)}),4e3),!0}]})}let p=l.join(" ");s(p,!1);let h=a[p]||(a[p]={preventDefault:!1,commands:[]});h.commands.push(n),o&&(h.preventDefault=!0)};for(let o of e){let e=o[t]||o.key;if(e)for(let t of o.scope?o.scope.split(" "):["editor"])n(t,e,o.run,o.preventDefault),o.shift&&n(t,"Shift-"+e,o.shift,o.preventDefault)}return i}(t.reduce(((e,t)=>e.concat(t)),[])));return i}(t.state),e,t,"editor")}),fa=ci.define({enables:ua}),ma=new WeakMap;let ga=null;const ya="-10000px";class Oa{constructor(e,t,i){this.facet=t,this.createTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(i)}update(e){let t=e.state.facet(this.facet),i=t.filter((e=>e));if(t===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let r=[];for(let s=0;s<i.length;s++){let t=i[s],n=-1;if(t){for(let e=0;e<this.tooltips.length;e++){let i=this.tooltips[e];i&&i.create==t.create&&(n=e)}if(n<0)r[s]=this.createTooltipView(t);else{let t=r[s]=this.tooltipViews[n];t.update&&t.update(e)}}}for(let s of this.tooltipViews)r.indexOf(s)<0&&s.dom.remove();return this.input=t,this.tooltips=i,this.tooltipViews=r,!0}}function ba(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const va=ci.define({combine:e=>{var t,i,r;return{position:gs.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(i=e.find((e=>e.parent)))||void 0===i?void 0:i.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||ba}}}),wa=sn.fromClass(class{constructor(e){var t;this.view=e,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let i=e.state.facet(va);this.position=i.position,this.parent=i.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new Oa(e,xa,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),null===(t=e.dom.ownerDocument.defaultView)||void 0===t||t.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e);t&&this.observeIntersection();let i=t||e.geometryChanged,r=e.state.facet(va);if(r.position!=this.position){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;i=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=ya,this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;null===(e=this.view.dom.ownerDocument.defaultView)||void 0===e||e.removeEventListener("resize",this.measureSoon);for(let{dom:i}of this.manager.tooltipViews)i.remove();null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect();return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(va).tooltipSpace(this.view)}}writeMeasure(e){let{editor:t,space:i}=e,r=[];for(let s=0;s<this.manager.tooltips.length;s++){let n=this.manager.tooltips[s],o=this.manager.tooltipViews[s],{dom:a}=o,l=e.pos[s],p=e.size[s];if(!l||l.bottom<=Math.max(t.top,i.top)||l.top>=Math.min(t.bottom,i.bottom)||l.right<Math.max(t.left,i.left)-.1||l.left>Math.min(t.right,i.right)+.1){a.style.top=ya;continue}let h=n.arrow?o.dom.querySelector(".cm-tooltip-arrow"):null,c=h?7:0,d=p.right-p.left,u=p.bottom-p.top,f=o.offset||ka,m=this.view.textDirection==fn.LTR,g=p.width>i.right-i.left?m?i.left:i.right-p.width:m?Math.min(l.left-(h?14:0)+f.x,i.right-d):Math.max(i.left,l.left-d+(h?14:0)-f.x),y=!!n.above;!n.strictSide&&(y?l.top-(p.bottom-p.top)-f.y<i.top:l.bottom+(p.bottom-p.top)+f.y>i.bottom)&&y==i.bottom-l.bottom>l.top-i.top&&(y=!y);let O=y?l.top-u-c-f.y:l.bottom+c+f.y,b=g+d;if(!0!==o.overlap)for(let e of r)e.left<b&&e.right>g&&e.top<O+u&&e.bottom>O&&(O=y?e.top-u-2-c:e.bottom+c+2);"absolute"==this.position?(a.style.top=O-e.parent.top+"px",a.style.left=g-e.parent.left+"px"):(a.style.top=O+"px",a.style.left=g+"px"),h&&(h.style.left=l.left+(m?f.x:-f.x)-(g+14-7)+"px"),!0!==o.overlap&&r.push({left:g,top:O,right:b,bottom:O+u}),a.classList.toggle("cm-tooltip-above",y),a.classList.toggle("cm-tooltip-below",!y),o.positioned&&o.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=ya}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),Pa=oa.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ka={x:0,y:0},xa=ci.define({enables:[wa,Pa]}),Sa=ci.define();class _a{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Oa(e,Sa,(e=>this.createHostedView(e)))}static create(e){return new _a(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const Aa=xa.compute([Sa],(e=>{let t=e.facet(Sa).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.filter((e=>null!=e.end)).map((e=>e.end))),create:_a.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class qa{constructor(e,t,i,r,s){this.view=e,this.source=t,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(null==t)return;let i=this.view.coordsAtPos(t);if(null==i||e.y<i.top||e.y>i.bottom||e.x<i.left-this.view.defaultCharacterWidth||e.x>i.right+this.view.defaultCharacterWidth)return;let r=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find((e=>e.from<=t&&e.to>=t)),s=r&&r.dir==fn.RTL?-1:1,n=this.source(this.view,t,e.x<i.left?-s:s);if(null==n?void 0:n.then){let e=this.pending={pos:t};n.then((t=>{this.pending==e&&(this.pending=null,t&&this.view.dispatch({effects:this.setHover.of(t)}))}),(e=>Js(this.view.state,e,"hover tooltip")))}else n&&this.view.dispatch({effects:this.setHover.of(n)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let i=this.active;if(i&&!function(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}(this.lastMove.target)||this.pending){let{pos:r}=i||this.pending,s=null!==(t=null==i?void 0:i.end)&&void 0!==t?t:r;(r==s?this.view.posAtCoords(this.lastMove)==r:function(e,t,i,r,s,n){let o=document.createRange(),a=e.domAtPos(t),l=e.domAtPos(i);o.setEnd(l.node,l.offset),o.setStart(a.node,a.offset);let p=o.getClientRects();o.detach();for(let h=0;h<p.length;h++){let e=p[h];if(Math.max(e.top-s,s-e.bottom,e.left-r,r-e.right)<=n)return!0}return!1}(this.view,r,s,e.clientX,e.clientY,6))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function $a(e,t={}){let i=Li.define(),r=Oi.define({create:()=>null,update(e,r){if(e&&(t.hideOnChange&&(r.docChanged||r.selection)||t.hideOn&&t.hideOn(r,e)))return null;if(e&&r.docChanged){let t=r.changes.mapPos(e.pos,-1,Yt.TrackDel);if(null==t)return null;let i=Object.assign(Object.create(null),e);i.pos=t,null!=e.end&&(i.end=r.changes.mapPos(e.end)),e=i}for(let t of r.effects)t.is(i)&&(e=t.value),t.is(Ta)&&(e=null);return e},provide:e=>Sa.from(e)});return[r,sn.define((s=>new qa(s,e,r,i,t.hoverTime||300))),Aa]}const Ta=Li.define(),Ma=ci.define({combine(e){let t,i;for(let r of e)t=t||r.topContainer,i=i||r.bottomContainer;return{topContainer:t,bottomContainer:i}}}),Ca=sn.fromClass(class{constructor(e){this.input=e.state.facet(Da),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(Ma);this.top=new Ea(e,!0,t.topContainer),this.bottom=new Ea(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let i of this.panels)i.dom.classList.add("cm-panel"),i.mount&&i.mount()}update(e){let t=e.state.facet(Ma);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Ea(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ea(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(Da);if(i!=this.input){let t=i.filter((e=>e)),r=[],s=[],n=[],o=[];for(let i of t){let t,a=this.specs.indexOf(i);a<0?(t=i(e.view),o.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?s:n).push(t)}this.specs=t,this.panels=r,this.top.sync(s),this.bottom.sync(n);for(let e of o)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let r of this.panels)r.update&&r.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>oa.scrollMargins.of((t=>{let i=t.plugin(e);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}}))});class Ea{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Ra(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Ra(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Ra(e){let t=e.nextSibling;return e.remove(),t}const Da=ci.define({enables:Ca});class Qa extends tr{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Qa.prototype.elementClass="",Qa.prototype.toDOM=void 0,Qa.prototype.mapMode=Yt.TrackBefore,Qa.prototype.startSide=Qa.prototype.endSide=-1,Qa.prototype.point=!0;const ja=1024;let Xa=0;class Na{constructor(e,t){this.from=e,this.to=t}}class Ia{constructor(e={}){this.id=Xa++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Ba.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}Ia.closedBy=new Ia({deserialize:e=>e.split(" ")}),Ia.openedBy=new Ia({deserialize:e=>e.split(" ")}),Ia.group=new Ia({deserialize:e=>e.split(" ")}),Ia.contextHash=new Ia({perNode:!0}),Ia.lookAhead=new Ia({perNode:!0}),Ia.mounted=new Ia({perNode:!0});const La=Object.create(null);class Ba{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):La,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new Ba(e.name||"",t,e.id,i);if(e.props)for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Ia.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return e=>{for(let i=e.prop(Ia.group),r=-1;r<(i?i.length:0);r++){let s=t[r<0?e.name:i[r]];if(s)return s}}}}Ba.none=new Ba("",Object.create(null),0,8);const Va=new WeakMap,Ua=new WeakMap;var za,Wa;(Wa=za||(za={}))[Wa.ExcludeBuffers=1]="ExcludeBuffers",Wa[Wa.IncludeAnonymous=2]="IncludeAnonymous",Wa[Wa.IgnoreMounts=4]="IgnoreMounts",Wa[Wa.IgnoreOverlays=8]="IgnoreOverlays";class Ha{constructor(e,t,i,r,s){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[e,t]of s)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(Ia.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let e=i.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new sl(this.topNode,e)}cursorAt(e,t=0,i=0){let r=Va.get(this)||this.topNode,s=new sl(r);return s.moveTo(e,t),Va.set(this,s._tree),s}get topNode(){return new Ja(this,0,0,null)}resolve(e,t=0){let i=Ya(Va.get(this)||this.topNode,e,t,!1);return Va.set(this,i),i}resolveInner(e,t=0){let i=Ya(Ua.get(this)||this.topNode,e,t,!0);return Ua.set(this,i),i}iterate(e){let{enter:t,leave:i,from:r=0,to:s=this.length}=e;for(let n=this.cursor((e.mode||0)|za.IncludeAnonymous);;){let e=!1;if(n.from<=s&&n.to>=r&&(n.type.isAnonymous||!1!==t(n))){if(n.firstChild())continue;e=!0}for(;e&&i&&!n.type.isAnonymous&&i(n),!n.nextSibling();){if(!n.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:ll(Ba.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,i)=>new Ha(this.type,e,t,i,this.propValues)),e.makeTree||((e,t,i)=>new Ha(Ba.none,e,t,i)))}static build(e){return function(e){var t;let{buffer:i,nodeSet:r,maxBufferLength:s=ja,reused:n=[],minRepeatType:o=r.types.length}=e,a=Array.isArray(i)?new Fa(i,i.length):i,l=r.types,p=0,h=0;function c(e,t,i,y,O){let{id:b,start:v,end:w,size:P}=a,k=h;for(;P<0;){if(a.next(),-1==P){let t=n[b];return i.push(t),void y.push(v-e)}if(-3==P)return void(p=b);if(-4==P)return void(h=b);throw new RangeError(`Unrecognized record size: ${P}`)}let x,S,_=l[b],A=v-e;if(w-v<=s&&(S=m(a.pos-t,O))){let t=new Uint16Array(S.size-S.skip),i=a.pos-S.size,s=t.length;for(;a.pos>i;)s=g(S.start,t,s);x=new Ga(t,w-S.start,r),A=S.start-e}else{let e=a.pos-P;a.next();let t=[],i=[],r=b>=o?b:-1,n=0,l=w;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-s&&(u(t,i,v,n,a.end,l,r,k),n=t.length,l=a.end),a.next()):c(v,e,t,i,r);if(r>=0&&n>0&&n<t.length&&u(t,i,v,n,v,l,r,k),t.reverse(),i.reverse(),r>-1&&n>0){let e=d(_);x=ll(_,t,i,0,t.length,0,w-v,e,e)}else x=f(_,t,i,w-v,k-w)}i.push(x),y.push(A)}function d(e){return(t,i,r)=>{let s,n,o=0,a=t.length-1;if(a>=0&&(s=t[a])instanceof Ha){if(!a&&s.type==e&&s.length==r)return s;(n=s.prop(Ia.lookAhead))&&(o=i[a]+s.length+n)}return f(e,t,i,r,o)}}function u(e,t,i,s,n,o,a,l){let p=[],h=[];for(;e.length>s;)p.push(e.pop()),h.push(t.pop()+i-n);e.push(f(r.types[a],p,h,o-n,l-o)),t.push(n-i)}function f(e,t,i,r,s=0,n){if(p){let e=[Ia.contextHash,p];n=n?[e].concat(n):[e]}if(s>25){let e=[Ia.lookAhead,s];n=n?[e].concat(n):[e]}return new Ha(e,t,i,r,n)}function m(e,t){let i=a.fork(),r=0,n=0,l=0,p=i.end-s,h={size:0,start:0,skip:0};e:for(let s=i.pos-e;i.pos>s;){let e=i.size;if(i.id==t&&e>=0){h.size=r,h.start=n,h.skip=l,l+=4,r+=4,i.next();continue}let a=i.pos-e;if(e<0||a<s||i.start<p)break;let c=i.id>=o?4:0,d=i.start;for(i.next();i.pos>a;){if(i.size<0){if(-3!=i.size)break e;c+=4}else i.id>=o&&(c+=4);i.next()}n=d,r+=e,l+=c}return(t<0||r==e)&&(h.size=r,h.start=n,h.skip=l),h.size>4?h:void 0}function g(e,t,i){let{id:r,start:s,end:n,size:l}=a;if(a.next(),l>=0&&r<o){let o=i;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)i=g(e,t,i)}t[--i]=o,t[--i]=n-e,t[--i]=s-e,t[--i]=r}else-3==l?p=r:-4==l&&(h=r);return i}let y=[],O=[];for(;a.pos>0;)c(e.start||0,e.bufferStart||0,y,O,-1);let b=null!==(t=e.length)&&void 0!==t?t:y.length?O[0]+y[0].length:0;return new Ha(l[e.topID],y.reverse(),O.reverse(),b)}(e)}}Ha.empty=new Ha(Ba.none,[],[],0);class Fa{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Fa(this.buffer,this.index)}}class Ga{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Ba.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),i==(e+=4))return s;let n=[];for(;e<i;)n.push(this.childString(e)),e=this.buffer[e+3];return s+"("+n.join(",")+")"}findChild(e,t,i,r,s){let{buffer:n}=this,o=-1;for(let a=e;a!=t&&!(Ka(s,r,n[a+1],n[a+2])&&(o=a,i>0));a=n[a+3]);return o}slice(e,t,i,r){let s=this.buffer,n=new Uint16Array(t-e);for(let o=e,a=0;o<t;)n[a++]=s[o++],n[a++]=s[o++]-i,n[a++]=s[o++]-i,n[a++]=s[o++]-e;return new Ga(n,r-i,this.set)}}function Ka(e,t,i,r){switch(e){case-2:return i<t;case-1:return r>=t&&i<t;case 0:return i<t&&r>t;case 1:return i<=t&&r>t;case 2:return r>t;case 4:return!0}}function Za(e,t){let i=e.childBefore(t);for(;i;){let t=i.lastChild;if(!t||t.to!=i.to)break;t.type.isError&&t.from==t.to?(e=i,i=t.prevSibling):i=t}return e}function Ya(e,t,i,r){for(var s;e.from==e.to||(i<1?e.from>=t:e.from>t)||(i>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof Ja&&e.index<0?null:e.parent;if(!t)return e;e=t}let n=r?0:za.IgnoreOverlays;if(r)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof Ja&&o.index<0&&(null===(s=a.enter(t,i,n))||void 0===s?void 0:s.from)!=o.from&&(e=a);for(;;){let r=e.enter(t,i,n);if(!r)return e;e=r}}class Ja{constructor(e,t,i,r){this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,s=0){for(let n=this;;){for(let{children:o,positions:a}=n._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],p=a[e]+n.from;if(Ka(r,i,p,p+l.length))if(l instanceof Ga){if(s&za.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,i-p,r);if(o>-1)return new rl(new il(n,l,e,p),null,o)}else if(s&za.IncludeAnonymous||!l.type.isAnonymous||nl(l)){let o;if(!(s&za.IgnoreMounts)&&l.props&&(o=l.prop(Ia.mounted))&&!o.overlay)return new Ja(o.tree,p,e,n);let a=new Ja(l,p,e,n);return s&za.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,i,r)}}if(s&za.IncludeAnonymous||!n.type.isAnonymous)return null;if(e=n.index>=0?n.index+t:t<0?-1:n._parent._tree.children.length,n=n._parent,!n)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&za.IgnoreOverlays)&&(r=this._tree.prop(Ia.mounted))&&r.overlay){let i=e-this.from;for(let{from:e,to:s}of r.overlay)if((t>0?e<=i:e<i)&&(t<0?s>=i:s>i))return new Ja(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new sl(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Ya(this,e,t,!1)}resolveInner(e,t=0){return Ya(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Za(this,e)}getChild(e,t=null,i=null){let r=el(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return el(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return tl(this,e)}}function el(e,t,i,r){let s=e.cursor(),n=[];if(!s.firstChild())return n;if(null!=i)for(;!s.type.is(i);)if(!s.nextSibling())return n;for(;;){if(null!=r&&s.type.is(r))return n;if(s.type.is(t)&&n.push(s.node),!s.nextSibling())return null==r?n:[]}}function tl(e,t,i=t.length-1){for(let r=e.parent;i>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[i]&&t[i]!=r.name)return!1;i--}}return!0}class il{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class rl{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new rl(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&za.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new rl(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new rl(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new rl(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new sl(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let n=i.buffer[this.index+1],o=i.buffer[this.index+2];e.push(i.slice(r,s,n,o)),t.push(0)}return new Ha(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Ya(this,e,t,!1)}resolveInner(e,t=0){return Ya(this,e,t,!0)}enterUnfinishedNodesBefore(e){return Za(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let r=el(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return el(this,e,t,i)}get node(){return this}matchContext(e){return tl(this,e)}}class sl{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ja)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof Ja?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return!(s<0)&&(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?!(i&za.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&za.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&za.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let e=i<0?0:this.stack[i]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(e)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;({index:t,_parent:i}=i))if(t>-1)for(let r=t+e,s=e<0?-1:i._tree.children.length;r!=s;r+=e){let e=i._tree.children[r];if(this.mode&za.IncludeAnonymous||e instanceof Ga||!e.type.isAnonymous||nl(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let n=e;n;n=n._parent)if(n.index==r){if(r==this.index)return n;t=n,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)t=new rl(this.buffer,t,this.stack[r]);return this.bufferNode=new rl(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return tl(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return tl(this.node,e,r);let n=i[t.buffer[this.stack[s]]];if(!n.isAnonymous){if(e[r]&&e[r]!=n.name)return!1;r--}}return!0}}function nl(e){return e.children.some((e=>e instanceof Ga||!e.type.isAnonymous||nl(e)))}const ol=new WeakMap;function al(e,t){if(!e.isAnonymous||t instanceof Ga||t.type!=e)return 1;let i=ol.get(t);if(null==i){i=1;for(let r of t.children){if(r.type!=e||!(r instanceof Ha)){i=1;break}i+=al(e,r)}ol.set(t,i)}return i}function ll(e,t,i,r,s,n,o,a,l){let p=0;for(let u=r;u<s;u++)p+=al(e,t[u]);let h=Math.ceil(1.5*p/8),c=[],d=[];return function t(i,r,s,o,a){for(let p=s;p<o;){let s=p,u=r[p],f=al(e,i[p]);for(p++;p<o;p++){let t=al(e,i[p]);if(f+t>=h)break;f+=t}if(p==s+1){if(f>h){let e=i[s];t(e.children,e.positions,0,e.children.length,r[s]+a);continue}c.push(i[s])}else{let t=r[p-1]+i[p-1].length-u;c.push(ll(e,i,r,s,p,u,t,null,l))}d.push(u+a-n)}}(t,i,r,s,0),(a||l)(c,d,o)}class pl{constructor(e,t,i,r,s=!1,n=!1){this.from=e,this.to=t,this.tree=i,this.offset=r,this.open=(s?1:0)|(n?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],i=!1){let r=[new pl(0,e.length,e,0,!1,i)];for(let s of t)s.to>e.length&&r.push(s);return r}static applyChanges(e,t,i=128){if(!t.length)return e;let r=[],s=1,n=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let p=o<t.length?t[o]:null,h=p?p.fromA:1e9;if(h-a>=i)for(;n&&n.from<h;){let t=n;if(a>=t.from||h<=t.to||l){let e=Math.max(t.from,a)-l,i=Math.min(t.to,h)-l;t=e>=i?null:new pl(e,i,t.tree,t.offset+l,o>0,!!p)}if(t&&r.push(t),n.to>h)break;n=s<e.length?e[s++]:null}if(!p)break;a=p.toA,l=p.toA-p.toB}return r}}class hl{startParse(e,t,i){return"string"==typeof e&&(e=new cl(e)),i=i?i.length?i.map((e=>new Na(e.from,e.to))):[new Na(0,0)]:[new Na(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let e=r.advance();if(e)return e}}}class cl{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ia({perNode:!0});let dl=0;class ul{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=dl++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new ul([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new ml;return t=>t.modified.indexOf(e)>-1?t:ml.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let fl=0;class ml{constructor(){this.instances=[],this.id=fl++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find((i=>{return i.base==e&&(r=t,s=i.modified,r.length==s.length&&r.every(((e,t)=>e==s[t])));var r,s}));if(i)return i;let r=[],s=new ul(r,e,t);for(let o of t)o.instances.push(s);let n=gl(t);for(let o of e.set)for(let e of n)r.push(ml.get(o,e));return s}}function gl(e){let t=[e];for(let i=0;i<e.length;i++)for(let r of gl(e.slice(0,i).concat(e.slice(i+1))))t.push(r);return t}function yl(e){let t=Object.create(null);for(let i in e){let r=e[i];Array.isArray(r)||(r=[r]);for(let e of i.split(" "))if(e){let i=[],s=2,n=e;for(let t=0;;){if("..."==n&&t>0&&t+3==e.length){s=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(n);if(!r)throw new RangeError("Invalid path: "+e);if(i.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){s=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);n=e.slice(t)}let o=i.length-1,a=i[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new bl(r,s,o>0?i.slice(0,o):null);t[a]=l.sort(t[a])}}return Ol.add(t)}const Ol=new Ia;class bl{constructor(e,t,i,r){this.tags=e,this.mode=t,this.context=i,this.next=r}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function vl(e,t){let i=Object.create(null);for(let n of e)if(Array.isArray(n.tag))for(let e of n.tag)i[e.id]=n.class;else i[n.tag.id]=n.class;let{scope:r,all:s=null}=t||{};return{style:e=>{let t=s;for(let r of e)for(let e of r.set){let r=i[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function wl(e,t){let i=null;for(let r of e){let e=r.style(t);e&&(i=i?i+" "+e:e)}return i}function Pl(e,t,i,r=0,s=e.length){let n=new kl(r,Array.isArray(t)?t:[t],i);n.highlightRange(e.cursor(),r,s,"",n.highlighters),n.flush(s)}class kl{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,r,s){let{type:n,from:o,to:a}=e;if(o>=i||a<=t)return;n.isTop&&(s=this.highlighters.filter((e=>!e.scope||e.scope(n))));let l=r,p=n.prop(Ol),h=!1;for(;p;){if(!p.context||e.matchContext(p.context)){let e=wl(s,p.tags);e&&(l&&(l+=" "),l+=e,1==p.mode?r+=(r?" ":"")+e:0==p.mode&&(h=!0));break}p=p.next}if(this.startSpan(e.from,l),h)return;let c=e.tree&&e.tree.prop(Ia.mounted);if(c&&c.overlay){let n=e.node.enter(c.overlay[0].from+o,1),p=this.highlighters.filter((e=>!e.scope||e.scope(c.tree.type))),h=e.firstChild();for(let d=0,u=o;;d++){let f=d<c.overlay.length?c.overlay[d]:null,m=f?f.from+o:a,g=Math.max(t,u),y=Math.min(i,m);if(g<y&&h)for(;e.from<y&&(this.highlightRange(e,g,y,r,s),this.startSpan(Math.min(i,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!f||m>i)break;u=f.to+o,u>t&&(this.highlightRange(n.cursor(),Math.max(t,f.from+o),Math.min(i,u),r,p),this.startSpan(u,l))}h&&e.parent()}else if(e.firstChild()){do{if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,r,s),this.startSpan(Math.min(i,e.to),l)}}while(e.nextSibling());e.parent()}}}const xl=ul.define,Sl=xl(),_l=xl(),Al=xl(_l),ql=xl(_l),$l=xl(),Tl=xl($l),Ml=xl($l),Cl=xl(),El=xl(Cl),Rl=xl(),Dl=xl(),Ql=xl(),jl=xl(Ql),Xl=xl(),Nl={comment:Sl,lineComment:xl(Sl),blockComment:xl(Sl),docComment:xl(Sl),name:_l,variableName:xl(_l),typeName:Al,tagName:xl(Al),propertyName:ql,attributeName:xl(ql),className:xl(_l),labelName:xl(_l),namespace:xl(_l),macroName:xl(_l),literal:$l,string:Tl,docString:xl(Tl),character:xl(Tl),attributeValue:xl(Tl),number:Ml,integer:xl(Ml),float:xl(Ml),bool:xl($l),regexp:xl($l),escape:xl($l),color:xl($l),url:xl($l),keyword:Rl,self:xl(Rl),null:xl(Rl),atom:xl(Rl),unit:xl(Rl),modifier:xl(Rl),operatorKeyword:xl(Rl),controlKeyword:xl(Rl),definitionKeyword:xl(Rl),moduleKeyword:xl(Rl),operator:Dl,derefOperator:xl(Dl),arithmeticOperator:xl(Dl),logicOperator:xl(Dl),bitwiseOperator:xl(Dl),compareOperator:xl(Dl),updateOperator:xl(Dl),definitionOperator:xl(Dl),typeOperator:xl(Dl),controlOperator:xl(Dl),punctuation:Ql,separator:xl(Ql),bracket:jl,angleBracket:xl(jl),squareBracket:xl(jl),paren:xl(jl),brace:xl(jl),content:Cl,heading:El,heading1:xl(El),heading2:xl(El),heading3:xl(El),heading4:xl(El),heading5:xl(El),heading6:xl(El),contentSeparator:xl(Cl),list:xl(Cl),quote:xl(Cl),emphasis:xl(Cl),strong:xl(Cl),link:xl(Cl),monospace:xl(Cl),strikethrough:xl(Cl),inserted:xl(),deleted:xl(),changed:xl(),invalid:xl(),meta:Xl,documentMeta:xl(Xl),annotation:xl(Xl),processingInstruction:xl(Xl),definition:ul.defineModifier(),constant:ul.defineModifier(),function:ul.defineModifier(),standard:ul.defineModifier(),local:ul.defineModifier(),special:ul.defineModifier()};var Il;vl([{tag:Nl.link,class:"tok-link"},{tag:Nl.heading,class:"tok-heading"},{tag:Nl.emphasis,class:"tok-emphasis"},{tag:Nl.strong,class:"tok-strong"},{tag:Nl.keyword,class:"tok-keyword"},{tag:Nl.atom,class:"tok-atom"},{tag:Nl.bool,class:"tok-bool"},{tag:Nl.url,class:"tok-url"},{tag:Nl.labelName,class:"tok-labelName"},{tag:Nl.inserted,class:"tok-inserted"},{tag:Nl.deleted,class:"tok-deleted"},{tag:Nl.literal,class:"tok-literal"},{tag:Nl.string,class:"tok-string"},{tag:Nl.number,class:"tok-number"},{tag:[Nl.regexp,Nl.escape,Nl.special(Nl.string)],class:"tok-string2"},{tag:Nl.variableName,class:"tok-variableName"},{tag:Nl.local(Nl.variableName),class:"tok-variableName tok-local"},{tag:Nl.definition(Nl.variableName),class:"tok-variableName tok-definition"},{tag:Nl.special(Nl.variableName),class:"tok-variableName2"},{tag:Nl.definition(Nl.propertyName),class:"tok-propertyName tok-definition"},{tag:Nl.typeName,class:"tok-typeName"},{tag:Nl.namespace,class:"tok-namespace"},{tag:Nl.className,class:"tok-className"},{tag:Nl.macroName,class:"tok-macroName"},{tag:Nl.propertyName,class:"tok-propertyName"},{tag:Nl.operator,class:"tok-operator"},{tag:Nl.comment,class:"tok-comment"},{tag:Nl.meta,class:"tok-meta"},{tag:Nl.invalid,class:"tok-invalid"},{tag:Nl.punctuation,class:"tok-punctuation"}]);const Ll=new Ia;class Bl{constructor(e,t,i=[]){this.data=e,Ji.prototype.hasOwnProperty("tree")||Object.defineProperty(Ji.prototype,"tree",{get(){return zl(this)}}),this.parser=t,this.extension=[ep.of(this),Ji.languageData.of(((e,t,i)=>e.facet(Vl(e,t,i))))].concat(i)}isActiveAt(e,t,i=-1){return Vl(e,t,i)==this.data}findRegions(e){let t=e.facet(ep);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],r=(e,t)=>{if(e.prop(Ll)==this.data)return void i.push({from:t,to:t+e.length});let s=e.prop(Ia.mounted);if(s){if(s.tree.prop(Ll)==this.data){if(s.overlay)for(let e of s.overlay)i.push({from:e.from+t,to:e.to+t});else i.push({from:t,to:t+e.length});return}if(s.overlay){let e=i.length;if(r(s.tree,s.overlay[0].from+t),i.length>e)return}}for(let i=0;i<e.children.length;i++){let s=e.children[i];s instanceof Ha&&r(s,e.positions[i]+t)}};return r(zl(e),0),i}get allowsNesting(){return!0}}function Vl(e,t,i){let r=e.facet(ep);if(!r)return null;let s=r.data;if(r.allowsNesting)for(let n=zl(e).topNode;n;n=n.enter(t,i,za.ExcludeBuffers))s=n.type.prop(Ll)||s;return s}Bl.setState=Li.define();class Ul extends Bl{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=(i=e.languageData,ci.define({combine:i?e=>e.concat(i):void 0}));var i;return new Ul(t,e.parser.configure({props:[Ll.add((e=>e.isTop?t:void 0))]}))}configure(e){return new Ul(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function zl(e){let t=e.field(Bl.state,!1);return t?t.tree:Ha.empty}class Wl{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let Hl=null;class Fl{constructor(e,t,i=[],r,s,n,o,a){this.parser=e,this.state=t,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=n,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new Fl(e,t,[],Ha.empty,0,i,[],null)}startParse(){return this.parser.startParse(new Wl(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ha.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var i;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(pl.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(i=this.parse.stoppedAt)&&void 0!==i?i:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(pl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Hl;Hl=this;try{return e()}finally{Hl=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Gl(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:r,treeLen:s,viewport:n,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,i,r,s)=>t.push({fromA:e,toA:i,fromB:r,toB:s}))),i=pl.applyChanges(i,t),r=Ha.empty,s=0,n={from:e.mapPos(n.from,-1),to:e.mapPos(n.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let i=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);i<r&&o.push({from:i,to:r})}}}return new Fl(this.parser,t,i,r,s,n,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:t,to:r}=this.skipped[i];t<e.to&&r>e.from&&(this.fragments=Gl(this.fragments,t,r),this.skipped.splice(i--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends hl{createParse(t,i,r){let s=r[0].from,n=r[r.length-1].to;return{parsedPos:s,advance(){let t=Hl;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=n,new Ha(Ba.none,[],[],n-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return Hl}}function Gl(e,t,i){return pl.applyChanges(e,[{fromA:t,toA:i,fromB:t,toB:i}])}class Kl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new Kl(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=Fl.create(e.facet(ep).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new Kl(i)}}Bl.state=Oi.define({create:Kl.init,update(e,t){for(let i of t.effects)if(i.is(Bl.setState))return i.value;return t.startState.facet(ep)!=t.state.facet(ep)?Kl.init(t.state):e.apply(t)}});let Zl=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(Zl=e=>{let t=-1,i=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(i):cancelIdleCallback(t)});const Yl="undefined"!=typeof navigator&&(null===(Il=navigator.scheduling)||void 0===Il?void 0:Il.isInputPending)?()=>navigator.scheduling.isInputPending():null,Jl=sn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Bl.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Bl.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=Zl(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Bl.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let n=Date.now()+Math.min(this.chunkBudget,100,e&&!Yl?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<r&&i.doc.length>r+1e3,a=s.context.work((()=>Yl&&Yl()||Date.now()>n),r+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Bl.setState.of(new Kl(s.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Js(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ep=ci.define({combine:e=>e.length?e[0]:null,enables:[Bl.state,Jl]});class tp{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const ip=ci.define(),rp=ci.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function sp(e){let t=e.facet(rp);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function np(e,t){let i="",r=e.tabSize;if(9==e.facet(rp).charCodeAt(0))for(;t>=r;)i+="\t",t-=r;for(let s=0;s<t;s++)i+=" ";return i}function op(e,t){e instanceof Ji&&(e=new ap(e));for(let r of e.state.facet(ip)){let i=r(e,t);if(null!=i)return i}let i=zl(e.state);return i?function(e,t,i){return hp(t.resolveInner(i).enterUnfinishedNodesBefore(i),i,e)}(e,i,t):null}class ap{constructor(e,t={}){this.state=e,this.options=t,this.unit=sp(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return null!=r&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,t);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.countColumn(i,e-r),n=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return n>-1&&(s+=n-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,t=e.length){return yr(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:r}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let e=s(r);if(e>-1)return e}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const lp=new Ia;function pp(e){let t=e.type.prop(lp);if(t)return t;let i,r=e.firstChild;if(r&&(i=r.type.prop(Ia.closedBy))){let t=e.lastChild,r=t&&i.indexOf(t.name)>-1;return e=>function(e,t,i,r,s){let n=e.textAfter,o=n.match(/^\s*/)[0].length,a=r&&n.slice(o,o+r.length)==r||s==e.pos+o,l=t?function(e){let t=e.node,i=t.childAfter(t.from),r=t.lastChild;if(!i)return null;let s=e.options.simulateBreak,n=e.state.doc.lineAt(i.from),o=null==s||s<=n.from?n.to:Math.min(n.to,s);for(let a=i.to;;){let e=t.childAfter(a);if(!e||e==r)return null;if(!e.type.isSkipped)return e.from<o?i:null;a=e.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*i)}(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?cp:null}function hp(e,t,i){for(;e;e=e.parent){let r=pp(e);if(r)return r(dp.create(i,t,e))}return null}function cp(){return 0}class dp extends ap{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.node=i}static create(e,t,i){return new dp(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(up(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?hp(e,this.pos,this.base):0}}function up(e,t){for(let i=t;i;i=i.parent)if(e==i)return!0;return!1}class fp{constructor(e,t){let i;function r(e){let t=wr.newName();return(i||(i=Object.create(null)))["."+t]=e,t}const s="string"==typeof t.all?t.all:t.all?r(t.all):void 0,n=t.scope;this.scope=n instanceof Bl?e=>e.prop(Ll)==n.data:n?e=>e==n:void 0,this.style=vl(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:s}).style,this.module=i?new wr(i):null,this.themeType=t.themeType}static define(e,t){return new fp(e,t||{})}}const mp=ci.define(),gp=ci.define({combine:e=>e.length?[e[0]]:null});function yp(e){let t=e.facet(mp);return t.length?t:e.facet(gp)}class Op{constructor(e){this.markCache=Object.create(null),this.tree=zl(e.state),this.decorations=this.buildDeco(e,yp(e.state))}update(e){let t=zl(e.state),i=yp(e.state),r=i!=yp(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,t){if(!t||!this.tree.length)return Es.none;let i=new or;for(let{from:r,to:s}of e.visibleRanges)Pl(this.tree,t,((e,t,r)=>{i.add(e,t,this.markCache[r]||(this.markCache[r]=Es.mark({class:r})))}),r,s);return i.finish()}}const bp=xi.high(sn.fromClass(Op,{decorations:e=>e.decorations}));function vp(e,t,i){let r=e.prop(t<0?Ia.openedBy:Ia.closedBy);if(r)return r;if(1==e.name.length){let r=i.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[i[r+t]]}return null}function wp(e,t,i,r={}){let s=r.maxScanDistance||1e4,n=r.brackets||"()[]{}",o=zl(e),a=o.resolveInner(t,i);for(let l=a;l;l=l.parent){let r=vp(l.type,i,n);if(r&&l.from<l.to)return Pp(e,t,i,l,r,n)}return function(e,t,i,r,s,n,o){let a=i<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=i>0)return null;let p={from:i<0?t-1:t,to:i>0?t+1:t},h=e.doc.iterRange(t,i>0?e.doc.length:0),c=0;for(let d=0;!h.next().done&&d<=n;){let e=h.value;i<0&&(d+=e.length);let n=t+d*i;for(let t=i>0?0:e.length-1,a=i>0?e.length:-1;t!=a;t+=i){let a=o.indexOf(e[t]);if(!(a<0||r.resolve(n+t,1).type!=s))if(a%2==0==i>0)c++;else{if(1==c)return{start:p,end:{from:n+t,to:n+t+1},matched:a>>1==l>>1};c--}}i>0&&(d+=e.length)}return h.done?{start:p,matched:!1}:null}(e,t,i,o,a.type,s,n)}function Pp(e,t,i,r,s,n){let o=r.parent,a={from:r.from,to:r.to},l=0,p=null==o?void 0:o.cursor();if(p&&(i<0?p.childBefore(r.from):p.childAfter(r.to)))do{if(i<0?p.to<=r.from:p.from>=r.to){if(0==l&&s.indexOf(p.type.name)>-1&&p.from<p.to)return{start:a,end:{from:p.from,to:p.to},matched:!0};if(vp(p.type,i,n))l++;else if(vp(p.type,-i,n)&&(l--,0==l))return{start:a,end:p.from==p.to?void 0:{from:p.from,to:p.to},matched:!1}}}while(i<0?p.prevSibling():p.nextSibling());return{start:a,matched:!1}}const kp=Object.create(null),xp=[Ba.none],Sp=[],_p=Object.create(null);for(let[vf,wf]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])_p[vf]=qp(kp,wf);function Ap(e,t){Sp.indexOf(e)>-1||Sp.push(e)}function qp(e,t){let i=null;for(let n of t.split(".")){let t=e[n]||Nl[n];t?"function"==typeof t?i?i=t(i):Ap(n):i?Ap(n):i=t:Ap(n)}if(!i)return 0;let r=t.replace(/ /g,"_"),s=Ba.define({id:xp.length,name:r,props:[yl({[r]:i})]});return xp.push(s),s.id}function $p(e,t){return({state:i,dispatch:r})=>{if(i.readOnly)return!1;let s=e(t,i);return!!s&&(r(i.update(s)),!0)}}const Tp=$p(Dp,0),Mp=$p(Rp,0),Cp=$p(((e,t)=>Rp(e,t,function(e){let t=[];for(let i of e.selection.ranges){let r=e.doc.lineAt(i.from),s=i.to<=r.to?r:e.doc.lineAt(i.to),n=t.length-1;n>=0&&t[n].to>r.from?t[n].to=s.to:t.push({from:r.from,to:s.to})}return t}(t))),0);function Ep(e,t=e.selection.main.head){let i=e.languageDataAt("commentTokens",t);return i.length?i[0]:{}}function Rp(e,t,i=t.selection.ranges){let r=i.map((e=>Ep(t,e.from).block));if(!r.every((e=>e)))return null;let s=i.map(((e,i)=>function(e,{open:t,close:i},r,s){let n,o,a=e.sliceDoc(r-50,r),l=e.sliceDoc(s,s+50),p=/\s*$/.exec(a)[0].length,h=/^\s*/.exec(l)[0].length,c=a.length-p;if(a.slice(c-t.length,c)==t&&l.slice(h,h+i.length)==i)return{open:{pos:r-p,margin:p&&1},close:{pos:s+h,margin:h&&1}};s-r<=100?n=o=e.sliceDoc(r,s):(n=e.sliceDoc(r,r+50),o=e.sliceDoc(s-50,s));let d=/^\s*/.exec(n)[0].length,u=/\s*$/.exec(o)[0].length,f=o.length-u-i.length;return n.slice(d,d+t.length)==t&&o.slice(f,f+i.length)==i?{open:{pos:r+d+t.length,margin:/\s/.test(n.charAt(d+t.length))?1:0},close:{pos:s-u-i.length,margin:/\s/.test(o.charAt(f-1))?1:0}}:null}(t,r[i],e.from,e.to)));if(2!=e&&!s.every((e=>e)))return{changes:t.changes(i.map(((e,t)=>s[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&s.some((e=>e))){let e=[];for(let t,i=0;i<s.length;i++)if(t=s[i]){let s=r[i],{open:n,close:o}=t;e.push({from:n.pos-s.open.length,to:n.pos+n.margin},{from:o.pos-o.margin,to:o.pos+s.close.length})}return{changes:e}}return null}function Dp(e,t,i=t.selection.ranges){let r=[],s=-1;for(let{from:n,to:o}of i){let e=r.length,i=1e9;for(let a=n;a<=o;){let e=t.doc.lineAt(a);if(e.from>s&&(n==o||o>e.from)){s=e.from;let n=Ep(t,a).line;if(!n)continue;let o=/^\s*/.exec(e.text)[0].length,l=o==e.length,p=e.text.slice(o,o+n.length)==n?o:-1;o<e.text.length&&o<i&&(i=o),r.push({line:e,comment:p,token:n,indent:o,empty:l,single:!1})}a=e.to+1}if(i<1e9)for(let t=e;t<r.length;t++)r[t].indent<r[t].line.text.length&&(r[t].indent=i);r.length==e+1&&(r[e].single=!0)}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:s,indent:n,empty:o,single:a}of r)!a&&o||e.push({from:t.from+n,insert:s+" "});let i=t.changes(e);return{changes:i,selection:t.selection.map(i,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:i,token:s}of r)if(i>=0){let r=t.from+i,n=r+s.length;" "==t.text[n-t.from]&&n++,e.push({from:r,to:n})}return{changes:e}}return null}function Qp(e,t){return li.create(e.ranges.map(t),e.mainIndex)}function jp(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function Xp({state:e,dispatch:t},i){let r=Qp(e.selection,i);return!r.eq(e.selection)&&(t(jp(e,r)),!0)}function Np(e,t){return li.cursor(t?e.to:e.from)}function Ip(e,t){return Xp(e,(i=>i.empty?e.moveByChar(i,t):Np(i,t)))}function Lp(e){return e.textDirectionAt(e.state.selection.main.head)==fn.LTR}const Bp=e=>Ip(e,!Lp(e)),Vp=e=>Ip(e,Lp(e));function Up(e,t){return Xp(e,(i=>i.empty?e.moveByGroup(i,t):Np(i,t)))}function zp(e,t,i){if(t.type.prop(i))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function Wp(e,t,i){let r,s,n=zl(e).resolveInner(t.head),o=i?Ia.closedBy:Ia.openedBy;for(let a=t.head;;){let t=i?n.childAfter(a):n.childBefore(a);if(!t)break;zp(e,t,o)?n=t:a=i?t.to:t.from}return s=n.type.prop(o)&&(r=i?wp(e,n.from,1):wp(e,n.to,-1))&&r.matched?i?r.end.to:r.end.from:i?n.to:n.from,li.cursor(s,i?-1:1)}function Hp(e,t){return Xp(e,(i=>{if(!i.empty)return Np(i,t);let r=e.moveVertically(i,t);return r.head!=i.head?r:e.moveToLineBoundary(i,t)}))}const Fp=e=>Hp(e,!1),Gp=e=>Hp(e,!0);function Kp(e){return Math.max(e.defaultLineHeight,Math.min(e.dom.clientHeight,innerHeight)-5)}function Zp(e,t){let{state:i}=e,r=Qp(i.selection,(i=>i.empty?e.moveVertically(i,t,Kp(e)):Np(i,t)));if(r.eq(i.selection))return!1;let s,n=e.coordsAtPos(i.selection.main.head),o=e.scrollDOM.getBoundingClientRect();return n&&n.top>o.top&&n.bottom<o.bottom&&n.top-o.top<=e.scrollDOM.scrollHeight-e.scrollDOM.scrollTop-e.scrollDOM.clientHeight&&(s=oa.scrollIntoView(r.main.head,{y:"start",yMargin:n.top-o.top})),e.dispatch(jp(i,r),{effects:s}),!0}const Yp=e=>Zp(e,!1),Jp=e=>Zp(e,!0);function eh(e,t,i){let r=e.lineBlockAt(t.head),s=e.moveToLineBoundary(t,i);if(s.head==t.head&&s.head!=(i?r.to:r.from)&&(s=e.moveToLineBoundary(t,i,!1)),!i&&s.head==r.from&&r.length){let i=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;i&&t.head!=r.from+i&&(s=li.cursor(r.from+i))}return s}const th=e=>Xp(e,(t=>eh(e,t,!0))),ih=e=>Xp(e,(t=>eh(e,t,!1)));function rh(e,t){let i=Qp(e.state.selection,(e=>{let i=t(e);return li.range(e.anchor,i.head,i.goalColumn)}));return!i.eq(e.state.selection)&&(e.dispatch(jp(e.state,i)),!0)}function sh(e,t){return rh(e,(i=>e.moveByChar(i,t)))}const nh=e=>sh(e,!Lp(e)),oh=e=>sh(e,Lp(e));function ah(e,t){return rh(e,(i=>e.moveByGroup(i,t)))}function lh(e,t){return rh(e,(i=>e.moveVertically(i,t)))}const ph=e=>lh(e,!1),hh=e=>lh(e,!0);function ch(e,t){return rh(e,(i=>e.moveVertically(i,t,Kp(e))))}const dh=e=>ch(e,!1),uh=e=>ch(e,!0),fh=e=>rh(e,(t=>eh(e,t,!0))),mh=e=>rh(e,(t=>eh(e,t,!1))),gh=({state:e,dispatch:t})=>(t(jp(e,{anchor:0})),!0),yh=({state:e,dispatch:t})=>(t(jp(e,{anchor:e.doc.length})),!0),Oh=({state:e,dispatch:t})=>(t(jp(e,{anchor:e.selection.main.anchor,head:0})),!0),bh=({state:e,dispatch:t})=>(t(jp(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function vh({state:e,dispatch:t},i){if(e.readOnly)return!1;let r="delete.selection",s=e.changeByRange((e=>{let{from:t,to:s}=e;if(t==s){let e=i(t);e<t?r="delete.backward":e>t&&(r="delete.forward"),t=Math.min(t,e),s=Math.max(s,e)}return t==s?{range:e}:{changes:{from:t,to:s},range:li.cursor(t)}}));return!s.changes.empty&&(t(e.update(s,{scrollIntoView:!0,userEvent:r})),!0)}function wh(e,t,i){if(e instanceof oa)for(let r of e.state.facet(oa.atomicRanges).map((t=>t(e))))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=i?r:e)}));return t}const Ph=(e,t)=>vh(e,(i=>{let r,s,{state:n}=e,o=n.doc.lineAt(i);if(!t&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(r=o.text.slice(0,i-o.from))){if("\t"==r[r.length-1])return i-1;let e=yr(r,n.tabSize)%sp(n)||sp(n);for(let t=0;t<e&&" "==r[r.length-1-t];t++)i--;s=i}else s=Vt(o.text,i-o.from,t,t)+o.from,s==i&&o.number!=(t?n.doc.lines:1)&&(s+=t?1:-1);return wh(e,s,t)})),kh=e=>Ph(e,!1),xh=e=>Ph(e,!0),Sh=(e,t)=>vh(e,(i=>{let r=i,{state:s}=e,n=s.doc.lineAt(r),o=s.charCategorizer(r);for(let e=null;;){if(r==(t?n.to:n.from)){r==i&&n.number!=(t?s.doc.lines:1)&&(r+=t?1:-1);break}let a=Vt(n.text,r-n.from,t)+n.from,l=n.text.slice(Math.min(r,a)-n.from,Math.max(r,a)-n.from),p=o(l);if(null!=e&&p!=e)break;" "==l&&r==i||(e=p),r=a}return wh(e,r,t)})),_h=e=>Sh(e,!1),Ah=e=>vh(e,(t=>{let i=e.lineBlockAt(t).to;return wh(e,t<i?i:Math.min(e.state.doc.length,t+1),!0)}));function qh(e){let t=[],i=-1;for(let r of e.selection.ranges){let s=e.doc.lineAt(r.from),n=e.doc.lineAt(r.to);if(r.empty||r.to!=n.from||(n=e.doc.lineAt(r.to-1)),i>=s.number){let e=t[t.length-1];e.to=n.to,e.ranges.push(r)}else t.push({from:s.from,to:n.to,ranges:[r]});i=n.number+1}return t}function $h(e,t,i){if(e.readOnly)return!1;let r=[],s=[];for(let n of qh(e)){if(i?n.to==e.doc.length:0==n.from)continue;let t=e.doc.lineAt(i?n.to+1:n.from-1),o=t.length+1;if(i){r.push({from:n.to,to:t.to},{from:n.from,insert:t.text+e.lineBreak});for(let t of n.ranges)s.push(li.range(Math.min(e.doc.length,t.anchor+o),Math.min(e.doc.length,t.head+o)))}else{r.push({from:t.from,to:n.from},{from:n.to,insert:e.lineBreak+t.text});for(let e of n.ranges)s.push(li.range(e.anchor-o,e.head-o))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:li.create(s,e.selection.mainIndex),userEvent:"move.line"})),!0)}function Th(e,t,i){if(e.readOnly)return!1;let r=[];for(let s of qh(e))i?r.push({from:s.from,insert:e.doc.slice(s.from,s.to)+e.lineBreak}):r.push({from:s.to,insert:e.lineBreak+e.doc.slice(s.from,s.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Mh=Ch(!1);function Ch(e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let r=t.changeByRange((i=>{let{from:r,to:s}=i,n=t.doc.lineAt(r),o=!e&&r==s&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let i,r=zl(e).resolveInner(t),s=r.childBefore(t),n=r.childAfter(t);return s&&n&&s.to<=t&&n.from>=t&&(i=s.type.prop(Ia.closedBy))&&i.indexOf(n.name)>-1&&e.doc.lineAt(s.to).from==e.doc.lineAt(n.from).from?{from:s.to,to:n.from}:null}(t,r);e&&(r=s=(s<=n.to?n:t.doc.lineAt(s)).to);let a=new ap(t,{simulateBreak:r,simulateDoubleBreak:!!o}),l=op(a,r);for(null==l&&(l=/^\s*/.exec(t.doc.lineAt(r).text)[0].length);s<n.to&&/\s/.test(n.text[s-n.from]);)s++;o?({from:r,to:s}=o):r>n.from&&r<n.from+100&&!/\S/.test(n.text.slice(0,r))&&(r=n.from);let p=["",np(t,l)];return o&&p.push(np(t,a.lineIndent(n.from,-1))),{changes:{from:r,to:s,insert:Mt.of(p)},range:li.cursor(r+1+p[1].length)}}));return i(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Eh(e,t){let i=-1;return e.changeByRange((r=>{let s=[];for(let o=r.from;o<=r.to;){let n=e.doc.lineAt(o);n.number>i&&(r.empty||r.to>n.from)&&(t(n,s,r),i=n.number),o=n.to+1}let n=e.changes(s);return{changes:s,range:li.range(n.mapPos(r.anchor,1),n.mapPos(r.head,1))}}))}const Rh=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>Xp(e,(t=>Wp(e.state,t,!Lp(e)))),shift:e=>rh(e,(t=>Wp(e.state,t,!Lp(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>Xp(e,(t=>Wp(e.state,t,Lp(e)))),shift:e=>rh(e,(t=>Wp(e.state,t,Lp(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>$h(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>Th(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>$h(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>Th(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let i=e.selection,r=null;return i.ranges.length>1?r=li.create([i.main]):i.main.empty||(r=li.create([li.cursor(i.main.head)])),!!r&&(t(jp(e,r)),!0)}},{key:"Mod-Enter",run:Ch(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let i=qh(e).map((({from:t,to:i})=>li.range(t,Math.min(i+1,e.doc.length))));return t(e.update({selection:li.create(i),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let i=Qp(e.selection,(t=>{var i;let r=zl(e).resolveInner(t.head,1);for(;!(r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from)&&(null===(i=r.parent)||void 0===i?void 0:i.parent);)r=r.parent;return li.range(r.to,r.from)}));return t(jp(e,i)),!0},preventDefault:!0},{key:"Mod-[",run:({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Eh(e,((t,i)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let s=yr(r,e.tabSize),n=0,o=np(e,Math.max(0,s-sp(e)));for(;n<r.length&&n<o.length&&r.charCodeAt(n)==o.charCodeAt(n);)n++;i.push({from:t.from+n,to:t.from+r.length,insert:o.slice(n)})})),{userEvent:"delete.dedent"})),!0)},{key:"Mod-]",run:({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(Eh(e,((t,i)=>{i.push({from:t.from,insert:e.facet(rp)})})),{userEvent:"input.indent"})),!0)},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=Object.create(null),r=new ap(e,{overrideIndentation:e=>{let t=i[e];return null==t?-1:t}}),s=Eh(e,((t,s,n)=>{let o=op(r,t.from);if(null==o)return;/\S/.test(t.text)||(o=0);let a=/^\s*/.exec(t.text)[0],l=np(e,o);(a!=l||n.from<t.from+a.length)&&(i[t.from]=o,s.push({from:t.from,to:t.from+a.length,insert:l}))}));return s.changes.empty||t(e.update(s,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,i=t.changes(qh(t).map((({from:e,to:i})=>(e>0?e--:i<t.doc.length&&i++,{from:e,to:i})))),r=Qp(t.selection,(t=>e.moveVertically(t,!0))).map(i);return e.dispatch({changes:i,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,i){let r=!1,s=Qp(e.selection,(t=>{let s=wp(e,t.head,-1)||wp(e,t.head,1)||t.head>0&&wp(e,t.head-1,1)||t.head<e.doc.length&&wp(e,t.head+1,-1);if(!s||!s.end)return t;r=!0;let n=s.start.from==t.head?s.end.to:s.end.from;return i?li.range(t.anchor,n):li.cursor(n)}));return!!r&&(t(jp(e,s)),!0)}(e,t,!1)},{key:"Mod-/",run:e=>{let t=Ep(e.state);return t.line?Tp(e):!!t.block&&Cp(e)}},{key:"Alt-A",run:Mp}].concat([{key:"ArrowLeft",run:Bp,shift:nh,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>Up(e,!Lp(e)),shift:e=>ah(e,!Lp(e))},{mac:"Cmd-ArrowLeft",run:ih,shift:mh},{key:"ArrowRight",run:Vp,shift:oh,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>Up(e,Lp(e)),shift:e=>ah(e,Lp(e))},{mac:"Cmd-ArrowRight",run:th,shift:fh},{key:"ArrowUp",run:Fp,shift:ph,preventDefault:!0},{mac:"Cmd-ArrowUp",run:gh,shift:Oh},{mac:"Ctrl-ArrowUp",run:Yp,shift:dh},{key:"ArrowDown",run:Gp,shift:hh,preventDefault:!0},{mac:"Cmd-ArrowDown",run:yh,shift:bh},{mac:"Ctrl-ArrowDown",run:Jp,shift:uh},{key:"PageUp",run:Yp,shift:dh},{key:"PageDown",run:Jp,shift:uh},{key:"Home",run:ih,shift:mh,preventDefault:!0},{key:"Mod-Home",run:gh,shift:Oh},{key:"End",run:th,shift:fh,preventDefault:!0},{key:"Mod-End",run:yh,shift:bh},{key:"Enter",run:Mh},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:kh,shift:kh},{key:"Delete",run:xh},{key:"Mod-Backspace",mac:"Alt-Backspace",run:_h},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Sh(e,!0)},{mac:"Mod-Backspace",run:e=>vh(e,(t=>{let i=e.lineBlockAt(t).from;return wh(e,t>i?i:Math.max(0,t-1),!1)}))},{mac:"Mod-Delete",run:Ah}].concat([{key:"Ctrl-b",run:Bp,shift:nh,preventDefault:!0},{key:"Ctrl-f",run:Vp,shift:oh},{key:"Ctrl-p",run:Fp,shift:ph},{key:"Ctrl-n",run:Gp,shift:hh},{key:"Ctrl-a",run:e=>Xp(e,(t=>li.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>rh(e,(t=>li.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>Xp(e,(t=>li.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>rh(e,(t=>li.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:xh},{key:"Ctrl-h",run:kh},{key:"Ctrl-k",run:Ah},{key:"Ctrl-Alt-h",run:_h},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:Mt.of(["",""])},range:li.cursor(e.from)})));return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let i=t.from,r=e.doc.lineAt(i),s=i==r.from?i-1:Vt(r.text,i-r.from,!1)+r.from,n=i==r.to?i+1:Vt(r.text,i-r.from,!0)+r.from;return{changes:{from:s,to:n,insert:e.doc.slice(i,n).append(e.doc.slice(s,i))},range:li.cursor(n)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Jp}].map((e=>({mac:e.key,run:e.run,shift:e.shift})))));function Dh(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,i=arguments[1];if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i)){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var s=i[r];"string"==typeof s?e.setAttribute(r,s):null!=s&&(e[r]=s)}t++}for(;t<arguments.length;t++)Qh(e,arguments[t]);return e}function Qh(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var i=0;i<t.length;i++)Qh(e,t[i])}}class jh{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class Xh{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let r=e,s=i.facet(Zh).markerFilter;s&&(r=s(r));let n=Es.set(r.map((e=>e.from==e.to||e.from==e.to-1&&i.doc.lineAt(e.from).to==e.from?Es.widget({widget:new ec(e),diagnostic:e}).range(e.from):Es.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity},diagnostic:e}).range(e.from,e.to))),!0);return new Xh(n,t,Nh(n))}}function Nh(e,t=null,i=0){let r=null;return e.between(i,1e9,((e,i,{spec:s})=>{if(!t||s.diagnostic==t)return r=new jh(e,i,s.diagnostic),!1})),r}function Ih(e,t){return!(!e.effects.some((e=>e.is(Bh)))&&!e.changes.touchesRange(t.pos))}function Lh(e,t){return e.field(zh,!1)?t:t.concat(Li.appendConfig.of([zh,oa.decorations.compute([zh],(e=>{let{selected:t,panel:i}=e.field(zh);return t&&i&&t.from!=t.to?Es.set([Wh.range(t.from,t.to)]):Es.none})),$a(Hh,{hideOn:Ih}),sc]))}const Bh=Li.define(),Vh=Li.define(),Uh=Li.define(),zh=Oi.define({create:()=>new Xh(Es.none,null,null),update(e,t){if(t.docChanged){let i=e.diagnostics.map(t.changes),r=null;if(e.selected){let s=t.changes.mapPos(e.selected.from,1);r=Nh(i,e.selected.diagnostic,s)||Nh(i,null,s)}e=new Xh(i,e.panel,r)}for(let i of t.effects)i.is(Bh)?e=Xh.init(i.value,e.panel,t.state):i.is(Vh)?e=new Xh(e.diagnostics,i.value?ic.open:null,e.selected):i.is(Uh)&&(e=new Xh(e.diagnostics,e.panel,i.value));return e},provide:e=>[Da.from(e,(e=>e.panel)),oa.decorations.from(e,(e=>e.diagnostics))]}),Wh=Es.mark({class:"cm-lintRange cm-lintRange-active"});function Hh(e,t,i){let{diagnostics:r}=e.state.field(zh),s=[],n=2e8,o=0;r.between(t-(i<0?1:0),t+(i>0?1:0),((e,r,{spec:a})=>{t>=e&&t<=r&&(e==r||(t>e||i>0)&&(t<r||i<0))&&(s.push(a.diagnostic),n=Math.min(e,n),o=Math.max(r,o))}));let a=e.state.facet(Zh).tooltipFilter;return a&&(s=a(s)),s.length?{pos:n,end:o,above:e.state.doc.lineAt(n).to<o,create:()=>({dom:Fh(e,s)})}:null}function Fh(e,t){return Dh("ul",{class:"cm-tooltip-lint"},t.map((t=>Jh(e,t,!1))))}const Gh=e=>{let t=e.state.field(zh,!1);return!(!t||!t.panel)&&(e.dispatch({effects:Vh.of(!1)}),!0)},Kh=sn.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(Zh);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){let e=Date.now();if(e<this.lintTime-10)setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Zh);Promise.all(t.map((e=>Promise.resolve(e(this.view))))).then((t=>{let i=t.reduce(((e,t)=>e.concat(t)));this.view.state.doc==e.doc&&this.view.dispatch(function(e,t){return{effects:Lh(e,[Bh.of(t)])}}(this.view.state,i))}),(e=>{Js(this.view.state,e)}))}}update(e){let t=e.state.facet(Zh);(e.docChanged||t!=e.startState.facet(Zh))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Zh=ci.define({combine:e=>Object.assign({sources:e.map((e=>e.source))},er(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null})),enables:Kh});function Yh(e){let t=[];if(e)e:for(let{name:i}of e){for(let e=0;e<i.length;e++){let r=i[e];if(/[a-zA-Z]/.test(r)&&!t.some((e=>e.toLowerCase()==r.toLowerCase()))){t.push(r);continue e}}t.push("")}return t}function Jh(e,t,i){var r;let s=i?Yh(t.actions):[];return Dh("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Dh("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(r=t.actions)||void 0===r?void 0:r.map(((i,r)=>{let n=r=>{r.preventDefault();let s=Nh(e.state.field(zh).diagnostics,t);s&&i.apply(e,s.from,s.to)},{name:o}=i,a=s[r]?o.indexOf(s[r]):-1,l=a<0?o:[o.slice(0,a),Dh("u",o.slice(a,a+1)),o.slice(a+1)];return Dh("button",{type:"button",class:"cm-diagnosticAction",onclick:n,onmousedown:n,"aria-label":` Action: ${o}${a<0?"":` (access key "${s[r]})"`}.`},l)})),t.source&&Dh("div",{class:"cm-diagnosticSource"},t.source))}class ec extends Ms{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Dh("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class tc{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Jh(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class ic{constructor(e){this.view=e,this.items=[];this.list=Dh("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)Gh(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:i}=this.items[this.selectedIndex],r=Yh(i.actions);for(let s=0;s<r.length;s++)if(r[s].toUpperCase().charCodeAt(0)==t.keyCode){let t=Nh(this.view.state.field(zh).diagnostics,i);t&&i.actions[s].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=Dh("div",{class:"cm-panel-lint"},this.list,Dh("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Gh(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(zh).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(zh),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,((e,n,{spec:o})=>{let a,l=-1;for(let t=i;t<this.items.length;t++)if(this.items[t].diagnostic==o.diagnostic){l=t;break}l<0?(a=new tc(this.view,o.diagnostic),this.items.splice(i,0,a),r=!0):(a=this.items[l],l>i&&(this.items.splice(i,l-i),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),s=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),i++}));i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new tc(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{e.top<t.top?this.list.scrollTop-=t.top-e.top:e.bottom>t.bottom&&(this.list.scrollTop+=e.bottom-t.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=Nh(this.view.state.field(zh).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:Uh.of(t)})}static open(e){return new ic(e)}}function rc(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const sc=oa.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:rc("#d11")},".cm-lintRange-warning":{backgroundImage:rc("orange")},".cm-lintRange-info":{backgroundImage:rc("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class nc{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=zl(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),r=t.text.slice(i-t.from,this.pos-t.from),s=r.search(hc(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function oc(e){let t=Object.keys(e).join(""),i=/\w/.test(t);return i&&(t=t.replace(/\w/g,"")),`[${i?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function ac(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[i,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),i=Object.create(null);for(let{label:s}of e){t[s[0]]=!0;for(let e=1;e<s.length;e++)i[s[e]]=!0}let r=oc(t)+oc(i)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let s=e.matchBefore(r);return s||e.explicit?{from:s?s.from:e.pos,options:t,validFor:i}:null}}class lc{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function pc(e){return e.selection.main.head}function hc(e,t){var i;let{source:r}=e,s=t&&"^"!=r[0],n="$"!=r[r.length-1];return s||n?new RegExp(`${s?"^":""}(?:${r})${n?"$":""}`,null!==(i=e.flags)&&void 0!==i?i:e.ignoreCase?"i":""):e}function cc(e,t){const i=t.completion.apply||t.completion.label;let r=t.source;var s,n,o,a;"string"==typeof i?e.dispatch((s=e.state,n=i,o=r.from,a=r.to,Object.assign(Object.assign({},s.changeByRange((e=>{if(e==s.selection.main)return{changes:{from:o,to:a,insert:n},range:li.cursor(o+n.length)};let t=a-o;return!e.empty||t&&s.sliceDoc(e.from-t,e.from)!=s.sliceDoc(o,a)?{range:e}:{changes:{from:e.from-t,to:e.from,insert:n},range:li.cursor(e.from-t+n.length)}}))),{userEvent:"input.complete"}))):i(e,t.completion,r.from,r.to)}const dc=new WeakMap;function uc(e){if(!Array.isArray(e))return e;let t=dc.get(e);return t||dc.set(e,t=ac(e)),t}class fc{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=Ft(e,t),r=Kt(i);this.chars.push(i);let s=e.slice(t,t+r),n=s.toUpperCase();this.folded.push(Ft(n==s?s.toLowerCase():n,0)),t+=r}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:r,precise:s,byWord:n}=this;if(1==t.length){let r=Ft(e,0);return r==t[0]?[0,0,Kt(r)]:r==i[0]?[-200,0,Kt(r)]:null}let o=e.indexOf(this.pattern);if(0==o)return[0,0,this.pattern.length];let a=t.length,l=0;if(o<0){for(let s=0,n=Math.min(e.length,200);s<n&&l<a;){let n=Ft(e,s);n!=t[l]&&n!=i[l]||(r[l++]=s),s+=Kt(n)}if(l<a)return null}let p=0,h=0,c=!1,d=0,u=-1,f=-1,m=/[a-z]/.test(e),g=!0;for(let y=0,O=Math.min(e.length,200),b=0;y<O&&h<a;){let r=Ft(e,y);o<0&&(p<a&&r==t[p]&&(s[p++]=y),d<a&&(r==t[d]||r==i[d]?(0==d&&(u=y),f=y+1,d++):d=0));let l,O=r<255?r>=48&&r<=57||r>=97&&r<=122?2:r>=65&&r<=90?1:0:(l=Gt(r))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;(!y||1==O&&m||0==b&&0!=O)&&(t[h]==r||i[h]==r&&(c=!0)?n[h++]=y:n.length&&(g=!1)),b=O,y+=Kt(r)}return h==a&&0==n[0]&&g?this.result((c?-200:0)-100,n,e):d==a&&0==u?[-200-e.length,0,f]:o>-1?[-700-e.length,o,o+this.pattern.length]:d==a?[-900-e.length,u,f]:h==a?this.result((c?-200:0)-100-700+(g?0:-1100),n,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,i){let r=[e-i.length],s=1;for(let n of t){let e=n+(this.astral?Kt(Ft(i,n)):1);s>1&&r[s-1]==n?r[s-1]=e:(r[s++]=n,r[s++]=e)}return r}}const mc=ci.define({combine:e=>er(e,{activateOnTyping:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>i=>function(e,t){return e?t?e+" "+t:e:t}(e(i),t(i)),addToOptions:(e,t)=>e.concat(t)})});function gc(e,t,i){if(e<=i)return{from:0,to:e};if(t<=e>>1){let e=Math.floor(t/i);return{from:e*i,to:(e+1)*i}}let r=Math.floor((e-t)/i);return{from:e-(r+1)*i,to:e-r*i}}class yc{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this};let i=e.state.field(t),{options:r,selected:s}=i.open,n=e.state.facet(mc);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,i){let r=document.createElement("span");r.className="cm-completionLabel";let{label:s}=e,n=0;for(let o=1;o<i.length;){let e=i[o++],t=i[o++];e>n&&r.appendChild(document.createTextNode(s.slice(n,e)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(s.slice(e,t))),a.className="cm-completionMatchedText",n=t}return n<s.length&&r.appendChild(document.createTextNode(s.slice(n))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(n),this.optionClass=n.optionClass,this.range=gc(r.length,s,n.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",(t=>{for(let i,s=t.target;s&&s!=this.dom;s=s.parentNode)if("LI"==s.nodeName&&(i=/-(\d+)$/.exec(s.id))&&+i[1]<r.length)return cc(e,r[+i[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(this.createListBox(r,i.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=gc(t.options.length,t.selected,this.view.state.facet(mc).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:i}=t.options[t.selected],{info:r}=i;if(!r)return;let s="string"==typeof r?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t)})).catch((e=>Js(this.view.state,e,"completion info"))):this.addInfoPane(s)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&function(e,t){let i=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.top<i.top?e.scrollTop-=i.top-r.top:r.bottom>i.bottom&&(e.scrollTop+=r.bottom-i.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect();if(r.top>Math.min(innerHeight,t.bottom)-10||r.bottom<Math.max(0,t.top)+10)return null;let s=Math.max(0,Math.min(r.top,innerHeight-i.height))-t.top,n=this.view.textDirection==fn.RTL,o=t.left,a=innerWidth-t.right;return n&&o<Math.min(i.width,a)?n=!1:!n&&a<Math.min(i.width,o)&&(n=!0),{top:s,left:n}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let s=i.from;s<i.to;s++){let{completion:i,match:n}=e[s];const o=r.appendChild(document.createElement("li"));o.id=t+"-"+s,o.setAttribute("role","option");let a=this.optionClass(i);a&&(o.className=a);for(let e of this.optionContent){let t=e(i,this.view.state,n);t&&o.appendChild(t)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}}function Oc(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class bc{constructor(e,t,i,r,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=r,this.selected=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new bc(this.options,Pc(t,e),this.tooltip,this.timestamp,e)}static build(e,t,i,r,s){let n=function(e,t){let i=[],r=0;for(let o of e)if(o.hasResult())if(!1===o.result.filter){let e=o.result.getMatch;for(let t of o.result.options){let s=[1e9-r++];if(e)for(let i of e(t))s.push(i);i.push(new lc(t,o,s))}}else{let e,r=new fc(t.sliceDoc(o.from,o.to));for(let t of o.result.options)(e=r.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),i.push(new lc(t,o,e)))}let s=[],n=null;for(let o of i.sort(xc))!n||n.label!=o.completion.label||n.detail!=o.completion.detail||null!=n.type&&null!=o.completion.type&&n.type!=o.completion.type||n.apply!=o.completion.apply?s.push(o):Oc(o.completion)>Oc(n)&&(s[s.length-1]=o),n=o.completion;return s}(e,t);if(!n.length)return null;let o=0;if(r&&r.selected){let e=r.options[r.selected].completion;for(let t=0;t<n.length;t++)if(n[t].completion==e){o=t;break}}return new bc(n,Pc(i,o),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:(a=Cc,e=>new yc(e,a)),above:s.aboveCursor},r?r.timestamp:Date.now(),o);var a}map(e){return new bc(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class vc{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new vc(kc,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,i=t.facet(mc),r=(i.override||t.languageDataAt("autocomplete",pc(t)).map(uc)).map((t=>(this.active.find((e=>e.source==t))||new _c(t,this.active.some((e=>0!=e.state))?1:0)).update(e,i)));r.length==this.active.length&&r.every(((e,t)=>e==this.active[t]))&&(r=this.active);let s=e.selection||r.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let i=0,r=0;;){for(;i<e.length&&!e[i].hasResult;)i++;for(;r<t.length&&!t[r].hasResult;)r++;let s=i==e.length,n=r==t.length;if(s||n)return s==n;if(e[i++].result!=t[r++].result)return!1}}(r,this.active)?bc.build(r,t,this.id,this.open,i):this.open&&e.docChanged?this.open.map(e.changes):this.open;!s&&r.every((e=>1!=e.state))&&r.some((e=>e.hasResult()))&&(r=r.map((e=>e.hasResult()?new _c(e.source,0):e)));for(let n of e.effects)n.is(Mc)&&(s=s&&s.setSelected(n.value,this.id));return r==this.active&&s==this.open?this:new vc(r,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:wc}}const wc={"aria-autocomplete":"list"};function Pc(e,t){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":e+"-"+t,"aria-controls":e}}const kc=[];function xc(e,t){let i=t.match[0]-e.match[0];return i||e.completion.label.localeCompare(t.completion.label)}function Sc(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class _c{constructor(e,t,i=-1){this.source=e,this.state=t,this.explicitPos=i}hasResult(){return!1}update(e,t){let i=Sc(e),r=this;i?r=r.handleUserEvent(e,i,t):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new _c(r.source,0));for(let s of e.effects)if(s.is(qc))r=new _c(r.source,1,s.value?pc(e.state):-1);else if(s.is($c))r=new _c(r.source,0);else if(s.is(Tc))for(let e of s.value)e.source==r.source&&(r=e);return r}handleUserEvent(e,t,i){return"delete"!=t&&i.activateOnTyping?new _c(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(pc(e.startState))?new _c(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new _c(this.source,this.state,e.mapPos(this.explicitPos))}}class Ac extends _c{constructor(e,t,i,r,s){super(e,2,t),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,t,i){var r;let s=e.changes.mapPos(this.from),n=e.changes.mapPos(this.to,1),o=pc(e.state);if((this.explicitPos<0?o<=s:o<this.from)||o>n||"delete"==t&&pc(e.startState)==this.from)return new _c(this.source,"input"==t&&i.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,i,r){if(!e)return!1;let s=t.sliceDoc(i,r);return"function"==typeof e?e(s,i,r,t):hc(e,!0).test(s)}(this.result.validFor,e.state,s,n)?new Ac(this.source,l,this.result,s,n):this.result.update&&(a=this.result.update(this.result,s,n,new nc(e.state,o,l>=0)))?new Ac(this.source,l,a,a.from,null!==(r=a.to)&&void 0!==r?r:pc(e.state)):new _c(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new _c(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Ac(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const qc=Li.define(),$c=Li.define(),Tc=Li.define({map:(e,t)=>e.map((e=>e.map(t)))}),Mc=Li.define(),Cc=Oi.define({create:()=>vc.start(),update:(e,t)=>e.update(t),provide:e=>[xa.from(e,(e=>e.tooltip)),oa.contentAttributes.from(e,(e=>e.attrs))]});function Ec(e,t="option"){return i=>{let r=i.state.field(Cc,!1);if(!r||!r.open||Date.now()-r.open.timestamp<75)return!1;let s,n=1;"page"==t&&(s=function(e,t){let i=e.plugin(wa);if(!i)return null;let r=i.manager.tooltips.indexOf(t);return r<0?null:i.manager.tooltipViews[r]}(i,r.open.tooltip))&&(n=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let o=r.open.selected+n*(e?1:-1),{length:a}=r.open.options;return o<0?o="page"==t?0:a-1:o>=a&&(o="page"==t?a-1:0),i.dispatch({effects:Mc.of(o)}),!0}}class Rc{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Dc=sn.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(Cc).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(Cc);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Cc)==t)return;let i=e.transactions.some((e=>(e.selection||e.docChanged)&&!Sc(e)));for(let s=0;s<this.running.length;s++){let t=this.running[s];if(i||t.updates.length+e.transactions.length>50&&Date.now()-t.time>1e3){for(let e of t.context.abortListeners)try{e()}catch(r){Js(this.view.state,r)}t.context.abortListeners=null,this.running.splice(s--,1)}else t.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let s of e.transactions)"input"==Sc(s)?this.composing=2:2==this.composing&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(Cc);for(let i of t.active)1!=i.state||this.running.some((e=>e.active.source==i.source))||this.startQuery(i)}startQuery(e){let{state:t}=this.view,i=pc(t),r=new nc(t,i,e.explicitPos==i),s=new Rc(e,r);this.running.push(s),Promise.resolve(e.source(r)).then((e=>{s.context.aborted||(s.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:$c.of(null)}),Js(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],i=this.view.state.facet(mc);for(let r=0;r<this.running.length;r++){let s=this.running[r];if(void 0===s.done)continue;if(this.running.splice(r--,1),s.done){let r=new Ac(s.active.source,s.active.explicitPos,s.done,s.done.from,null!==(e=s.done.to)&&void 0!==e?e:pc(s.updates.length?s.updates[0].startState:this.view.state));for(let e of s.updates)r=r.update(e,i);if(r.hasResult()){t.push(r);continue}}let n=this.view.state.field(Cc).active.find((e=>e.source==s.active.source));if(n&&1==n.state)if(null==s.done){let e=new _c(s.active.source,0);for(let t of s.updates)e=e.update(t,i);1!=e.state&&t.push(e)}else this.startQuery(n)}t.length&&this.view.dispatch({effects:Tc.of(t)})}},{eventHandlers:{blur(){let e=this.view.state.field(Cc,!1);e&&e.tooltip&&this.view.state.facet(mc).closeOnBlur&&this.view.dispatch({effects:$c.of(null)})},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:qc.of(!1)})),20),this.composing=0}}}),Qc=oa.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),jc=new class extends tr{};function Xc(e={}){return[Cc,mc.of(e),Dc,Ic,Qc]}jc.startSide=1,jc.endSide=-1;const Nc=[{key:"Ctrl-Space",run:e=>!!e.state.field(Cc,!1)&&(e.dispatch({effects:qc.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(Cc,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:$c.of(null)}),!0)}},{key:"ArrowDown",run:Ec(!0)},{key:"ArrowUp",run:Ec(!1)},{key:"PageDown",run:Ec(!0,"page")},{key:"PageUp",run:Ec(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(Cc,!1);return!(e.state.readOnly||!t||!t.open||Date.now()-t.open.timestamp<75)&&(cc(e,t.open.options[t.open.selected]),!0)}}],Ic=xi.highest(fa.computeN([mc],(e=>e.facet(mc).defaultKeymap?[Nc]:[])));function Lc(e){return e.from===e.to}function Bc(e){return[Xc({override:[(t=e,e=>{const i=t.map((e=>({label:e.name,type:"variable",info:e.info,detail:e.detail})));let r=zl(e.state).resolve(e.pos,-1),s=r.nextSibling;const n=Lc(r)||s&&s.from===e.pos&&Lc(s);if(e.explicit&&n)return{from:e.pos,options:i};const o={from:r.from,options:i};return"VariableName"!==r.name?null:o})]})];var t}const Vc=1024;let Uc=0;class zc{constructor(e,t){this.from=e,this.to=t}}class Wc{constructor(e={}){this.id=Uc++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Fc.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}Wc.closedBy=new Wc({deserialize:e=>e.split(" ")}),Wc.openedBy=new Wc({deserialize:e=>e.split(" ")}),Wc.group=new Wc({deserialize:e=>e.split(" ")}),Wc.contextHash=new Wc({perNode:!0}),Wc.lookAhead=new Wc({perNode:!0}),Wc.mounted=new Wc({perNode:!0});const Hc=Object.create(null);class Fc{constructor(e,t,i,r=0){this.name=e,this.props=t,this.id=i,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Hc,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new Fc(e.name||"",t,e.id,i);if(e.props)for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Wc.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let r of i.split(" "))t[r]=e[i];return e=>{for(let i=e.prop(Wc.group),r=-1;r<(i?i.length:0);r++){let s=t[r<0?e.name:i[r]];if(s)return s}}}}Fc.none=new Fc("",Object.create(null),0,8);class Gc{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let r=null;for(let t of e){let e=t(i);e&&(r||(r=Object.assign({},i.props)),r[e[0].id]=e[1])}t.push(r?new Fc(i.name,r,i.id,i.flags):i)}return new Gc(t)}}const Kc=new WeakMap,Zc=new WeakMap;var Yc;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(Yc||(Yc={}));class Jc{constructor(e,t,i,r,s){if(this.type=e,this.children=t,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[e,t]of s)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=this.prop(Wc.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let i of this.children){let e=i.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new hd(this.topNode,e)}cursorAt(e,t=0,i=0){let r=Kc.get(this)||this.topNode,s=new hd(r);return s.moveTo(e,t),Kc.set(this,s._tree),s}get topNode(){return new nd(this,0,0,null)}resolve(e,t=0){let i=sd(Kc.get(this)||this.topNode,e,t,!1);return Kc.set(this,i),i}resolveInner(e,t=0){let i=sd(Zc.get(this)||this.topNode,e,t,!0);return Zc.set(this,i),i}iterate(e){let{enter:t,leave:i,from:r=0,to:s=this.length}=e;for(let n=this.cursor((e.mode||0)|Yc.IncludeAnonymous);;){let e=!1;if(n.from<=s&&n.to>=r&&(n.type.isAnonymous||!1!==t(n))){if(n.firstChild())continue;e=!0}for(;e&&i&&!n.type.isAnonymous&&i(n),!n.nextSibling();){if(!n.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:fd(Fc.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,i)=>new Jc(this.type,e,t,i,this.propValues)),e.makeTree||((e,t,i)=>new Jc(Fc.none,e,t,i)))}static build(e){return function(e){var t;let{buffer:i,nodeSet:r,maxBufferLength:s=Vc,reused:n=[],minRepeatType:o=r.types.length}=e,a=Array.isArray(i)?new ed(i,i.length):i,l=r.types,p=0,h=0;function c(e,t,i,y,O){let{id:b,start:v,end:w,size:P}=a,k=h;for(;P<0;){if(a.next(),-1==P){let t=n[b];return i.push(t),void y.push(v-e)}if(-3==P)return void(p=b);if(-4==P)return void(h=b);throw new RangeError(`Unrecognized record size: ${P}`)}let x,S,_=l[b],A=v-e;if(w-v<=s&&(S=m(a.pos-t,O))){let t=new Uint16Array(S.size-S.skip),i=a.pos-S.size,s=t.length;for(;a.pos>i;)s=g(S.start,t,s);x=new td(t,w-S.start,r),A=S.start-e}else{let e=a.pos-P;a.next();let t=[],i=[],r=b>=o?b:-1,n=0,l=w;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-s&&(u(t,i,v,n,a.end,l,r,k),n=t.length,l=a.end),a.next()):c(v,e,t,i,r);if(r>=0&&n>0&&n<t.length&&u(t,i,v,n,v,l,r,k),t.reverse(),i.reverse(),r>-1&&n>0){let e=d(_);x=fd(_,t,i,0,t.length,0,w-v,e,e)}else x=f(_,t,i,w-v,k-w)}i.push(x),y.push(A)}function d(e){return(t,i,r)=>{let s,n,o=0,a=t.length-1;if(a>=0&&(s=t[a])instanceof Jc){if(!a&&s.type==e&&s.length==r)return s;(n=s.prop(Wc.lookAhead))&&(o=i[a]+s.length+n)}return f(e,t,i,r,o)}}function u(e,t,i,s,n,o,a,l){let p=[],h=[];for(;e.length>s;)p.push(e.pop()),h.push(t.pop()+i-n);e.push(f(r.types[a],p,h,o-n,l-o)),t.push(n-i)}function f(e,t,i,r,s=0,n){if(p){let e=[Wc.contextHash,p];n=n?[e].concat(n):[e]}if(s>25){let e=[Wc.lookAhead,s];n=n?[e].concat(n):[e]}return new Jc(e,t,i,r,n)}function m(e,t){let i=a.fork(),r=0,n=0,l=0,p=i.end-s,h={size:0,start:0,skip:0};e:for(let s=i.pos-e;i.pos>s;){let e=i.size;if(i.id==t&&e>=0){h.size=r,h.start=n,h.skip=l,l+=4,r+=4,i.next();continue}let a=i.pos-e;if(e<0||a<s||i.start<p)break;let c=i.id>=o?4:0,d=i.start;for(i.next();i.pos>a;){if(i.size<0){if(-3!=i.size)break e;c+=4}else i.id>=o&&(c+=4);i.next()}n=d,r+=e,l+=c}return(t<0||r==e)&&(h.size=r,h.start=n,h.skip=l),h.size>4?h:void 0}function g(e,t,i){let{id:r,start:s,end:n,size:l}=a;if(a.next(),l>=0&&r<o){let o=i;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)i=g(e,t,i)}t[--i]=o,t[--i]=n-e,t[--i]=s-e,t[--i]=r}else-3==l?p=r:-4==l&&(h=r);return i}let y=[],O=[];for(;a.pos>0;)c(e.start||0,e.bufferStart||0,y,O,-1);let b=null!==(t=e.length)&&void 0!==t?t:y.length?O[0]+y[0].length:0;return new Jc(l[e.topID],y.reverse(),O.reverse(),b)}(e)}}Jc.empty=new Jc(Fc.none,[],[],0);class ed{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ed(this.buffer,this.index)}}class td{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return Fc.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],r=this.set.types[t],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),i==(e+=4))return s;let n=[];for(;e<i;)n.push(this.childString(e)),e=this.buffer[e+3];return s+"("+n.join(",")+")"}findChild(e,t,i,r,s){let{buffer:n}=this,o=-1;for(let a=e;a!=t&&!(id(s,r,n[a+1],n[a+2])&&(o=a,i>0));a=n[a+3]);return o}slice(e,t,i,r){let s=this.buffer,n=new Uint16Array(t-e);for(let o=e,a=0;o<t;)n[a++]=s[o++],n[a++]=s[o++]-i,n[a++]=s[o++]-i,n[a++]=s[o++]-e;return new td(n,r-i,this.set)}}function id(e,t,i,r){switch(e){case-2:return i<t;case-1:return r>=t&&i<t;case 0:return i<t&&r>t;case 1:return i<=t&&r>t;case 2:return r>t;case 4:return!0}}function rd(e,t){let i=e.childBefore(t);for(;i;){let t=i.lastChild;if(!t||t.to!=i.to)break;t.type.isError&&t.from==t.to?(e=i,i=t.prevSibling):i=t}return e}function sd(e,t,i,r){for(var s;e.from==e.to||(i<1?e.from>=t:e.from>t)||(i>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof nd&&e.index<0?null:e.parent;if(!t)return e;e=t}let n=r?0:Yc.IgnoreOverlays;if(r)for(let o=e,a=o.parent;a;o=a,a=o.parent)o instanceof nd&&o.index<0&&(null===(s=a.enter(t,i,n))||void 0===s?void 0:s.from)!=o.from&&(e=a);for(;;){let r=e.enter(t,i,n);if(!r)return e;e=r}}class nd{constructor(e,t,i,r){this._tree=e,this.from=t,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,r,s=0){for(let n=this;;){for(let{children:o,positions:a}=n._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],p=a[e]+n.from;if(id(r,i,p,p+l.length))if(l instanceof td){if(s&Yc.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,i-p,r);if(o>-1)return new pd(new ld(n,l,e,p),null,o)}else if(s&Yc.IncludeAnonymous||!l.type.isAnonymous||cd(l)){let o;if(!(s&Yc.IgnoreMounts)&&l.props&&(o=l.prop(Wc.mounted))&&!o.overlay)return new nd(o.tree,p,e,n);let a=new nd(l,p,e,n);return s&Yc.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,i,r)}}if(s&Yc.IncludeAnonymous||!n.type.isAnonymous)return null;if(e=n.index>=0?n.index+t:t<0?-1:n._parent._tree.children.length,n=n._parent,!n)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let r;if(!(i&Yc.IgnoreOverlays)&&(r=this._tree.prop(Wc.mounted))&&r.overlay){let i=e-this.from;for(let{from:e,to:s}of r.overlay)if((t>0?e<=i:e<i)&&(t<0?s>=i:s>i))return new nd(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new hd(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return sd(this,e,t,!1)}resolveInner(e,t=0){return sd(this,e,t,!0)}enterUnfinishedNodesBefore(e){return rd(this,e)}getChild(e,t=null,i=null){let r=od(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return od(this,e,t,i)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return ad(this,e)}}function od(e,t,i,r){let s=e.cursor(),n=[];if(!s.firstChild())return n;if(null!=i)for(;!s.type.is(i);)if(!s.nextSibling())return n;for(;;){if(null!=r&&s.type.is(r))return n;if(s.type.is(t)&&n.push(s.node),!s.nextSibling())return null==r?n:[]}}function ad(e,t,i=t.length-1){for(let r=e.parent;i>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[i]&&t[i]!=r.name)return!1;i--}}return!0}class ld{constructor(e,t,i,r){this.parent=e,this.buffer=t,this.index=i,this.start=r}}class pd{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,i);return s<0?null:new pd(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&Yc.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new pd(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new pd(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new pd(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new hd(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let n=i.buffer[this.index+1],o=i.buffer[this.index+2];e.push(i.slice(r,s,n,o)),t.push(0)}return new Jc(this.type,e,t,this.to-this.from)}resolve(e,t=0){return sd(this,e,t,!1)}resolveInner(e,t=0){return sd(this,e,t,!0)}enterUnfinishedNodesBefore(e){return rd(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let r=od(this,e,t,i);return r.length?r[0]:null}getChildren(e,t=null,i=null){return od(this,e,t,i)}get node(){return this}matchContext(e){return ad(this,e)}}class hd{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof nd)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof nd?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,i);return!(s<0)&&(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?!(i&Yc.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Yc.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Yc.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let e=i<0?0:this.stack[i]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(e)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:i}=r)}else({index:t,_parent:i}=this._tree);for(;i;({index:t,_parent:i}=i))if(t>-1)for(let r=t+e,s=e<0?-1:i._tree.children.length;r!=s;r+=e){let e=i._tree.children[r];if(this.mode&Yc.IncludeAnonymous||e instanceof td||!e.type.isAnonymous||cd(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let n=e;n;n=n._parent)if(n.index==r){if(r==this.index)return n;t=n,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)t=new pd(this.buffer,t,this.stack[r]);return this.bufferNode=new pd(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return ad(this.node,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return ad(this.node,e,r);let n=i[t.buffer[this.stack[s]]];if(!n.isAnonymous){if(e[r]&&e[r]!=n.name)return!1;r--}}return!0}}function cd(e){return e.children.some((e=>e instanceof td||!e.type.isAnonymous||cd(e)))}const dd=new WeakMap;function ud(e,t){if(!e.isAnonymous||t instanceof td||t.type!=e)return 1;let i=dd.get(t);if(null==i){i=1;for(let r of t.children){if(r.type!=e||!(r instanceof Jc)){i=1;break}i+=ud(e,r)}dd.set(t,i)}return i}function fd(e,t,i,r,s,n,o,a,l){let p=0;for(let u=r;u<s;u++)p+=ud(e,t[u]);let h=Math.ceil(1.5*p/8),c=[],d=[];return function t(i,r,s,o,a){for(let p=s;p<o;){let s=p,u=r[p],f=ud(e,i[p]);for(p++;p<o;p++){let t=ud(e,i[p]);if(f+t>=h)break;f+=t}if(p==s+1){if(f>h){let e=i[s];t(e.children,e.positions,0,e.children.length,r[s]+a);continue}c.push(i[s])}else{let t=r[p-1]+i[p-1].length-u;c.push(fd(e,i,r,s,p,u,t,null,l))}d.push(u+a-n)}}(t,i,r,s,0),(a||l)(c,d,o)}class md{startParse(e,t,i){return"string"==typeof e&&(e=new gd(e)),i=i?i.length?i.map((e=>new zc(e.from,e.to))):[new zc(0,0)]:[new zc(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let r=this.startParse(e,t,i);for(;;){let e=r.advance();if(e)return e}}}class gd{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Wc({perNode:!0});class yd{constructor(e,t,i,r,s,n,o,a,l,p=0,h){this.p=e,this.stack=t,this.state=i,this.reducePos=r,this.pos=s,this.score=n,this.buffer=o,this.bufferBase=a,this.curContext=l,this.lookAhead=p,this.parent=h}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let r=e.parser.context;return new yd(e,[],t,i,i,0,[],0,r?new Od(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=65535&e,{parser:r}=this.p,s=r.dynamicPrecedence(i);if(s&&(this.score+=s),0==t)return this.pushState(r.getGoto(this.state,i,!0),this.reducePos),i<r.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.reduceContext(i,this.reducePos);let n=this.stack.length-3*(t-1)-(262144&e?6:0),o=this.stack[n-2],a=this.stack[n-1],l=this.bufferBase+this.buffer.length-a;if(i<r.minRepeatTerm||131072&e){let e=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,o,e,l+4,!0)}if(262144&e)this.state=this.stack[n];else{let e=this.stack[n-3];this.state=r.getGoto(e,i,!0)}for(;this.stack.length>n;)this.stack.pop();this.reduceContext(i,o)}storeNode(e,t,i,r=4,s=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==i)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=i)}}if(s&&this.pos!=i){let s=this.buffer.length;if(s>0&&0!=this.buffer[s-4])for(;s>0&&this.buffer[s-2]>i;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,r>4&&(r-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=i,this.buffer[s+3]=r}else this.buffer.push(e,t,i,r)}shift(e,t,i){let r=this.pos;if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let s=e,{parser:n}=this.p;(i>this.pos||t<=n.maxNode)&&(this.pos=i,n.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(t,r),t<=n.maxNode&&this.buffer.push(t,r,i,4)}else this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4)}apply(e,t,i){65536&e?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),r=e.bufferBase+t;for(;e&&r==e.bufferBase;)e=e.parent;return new yd(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new wd(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==(65536&i))return!0;if(0==i)return!1;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let r,s=0;s<t.length;s+=2)(r=t[s+1])!=this.state&&this.p.parser.hasAction(r,e)&&i.push(t[s],r);if(this.stack.length<120)for(let e=0;i.length<8&&e<t.length;e+=2){let r=t[e+1];i.some(((e,t)=>1&t&&e==r))||i.push(t[e],r)}t=i}let i=[];for(let r=0;r<t.length&&i.length<4;r+=2){let e=t[r+1];if(e==this.state)continue;let s=this.split();s.pushState(e,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[r],this.pos),s.score-=200,i.push(s)}return i}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if(0==(65536&e))return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let i=e>>19,r=65535&e,s=this.stack.length-3*i;if(s<0||t.getGoto(this.stack[s],r,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Od(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Od{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var bd,vd;(vd=bd||(bd={}))[vd.Insert=200]="Insert",vd[vd.Delete=190]="Delete",vd[vd.Reduce=100]="Reduce",vd[vd.MaxNext=4]="MaxNext",vd[vd.MaxInsertStackDepth=300]="MaxInsertStackDepth",vd[vd.DampenInsertStackDepth=120]="DampenInsertStackDepth";class wd{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,i=e>>19;0==i?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(i-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class Pd{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Pd(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new Pd(this.stack,this.pos,this.index)}}class kd{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const xd=new kd;class Sd{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=xd,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!r)return null;let e=this.ranges[--r];s-=i.from-e.to,i=e}for(;t<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];s+=e.from-i.to,i=e}return s}peek(e){let t,i,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,i=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;for(;r.to<=t;)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),i=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),i}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(null==i||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=xd,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return i}}class _d{constructor(e,t){this.data=e,this.id=t}token(e,t){!function(e,t,i,r){let s=0,n=1<<r,{parser:o}=i.p,{dialect:a}=o;e:for(;0!=(n&e[s]);){let i=e[s+1];for(let r=s+3;r<i;r+=2)if((e[r+1]&n)>0){let i=e[r];if(a.allows(i)&&(-1==t.token.value||t.token.value==i||o.overrides(i,t.token.value))){t.acceptToken(i);break}}for(let r=t.next,n=0,o=e[s+2];n<o;){let a=n+o>>1,l=i+a+(a<<1),p=e[l],h=e[l+1];if(r<p)o=a;else{if(!(r>=h)){s=e[l+2],t.advance();continue e}n=a+1}}break}}(this.data,e,t,this.id)}}function Ad(e,t=Uint16Array){if("string"!=typeof e)return e;let i=null;for(let r=0,s=0;r<e.length;){let n=0;for(;;){let t=e.charCodeAt(r++),i=!1;if(126==t){n=65535;break}t>=92&&t--,t>=34&&t--;let s=t-32;if(s>=46&&(s-=46,i=!0),n+=s,i)break;n*=46}i?i[s++]=n:i=new t(n)}return i}_d.prototype.contextual=_d.prototype.fallback=_d.prototype.extend=!1;const qd="undefined"!=typeof process&&{VITE_OPEN:"false",VITE_PORT:"3000",VITE_PROJECT:"",VITE_PROJECT_NAME:"Dante Cloud",VITE_API_URL:"http://192.168.101.10:8847/",VITE_CAPTCHA:"HUTOOL_LINE",VITE_SECRET_KEY:"8b026adcaa59468fd47ef361c623ce10",VITE_AUTO_REFRESH_TOKEN:"true",VITE_MULTI_TENANCY_ID:"",VITE_USE_CRYPTO:"true",VITE_USE_WEBSOCKET:"true",VITE_USE_OIDC:"true",VITE_OAUTH2_CLIENT_ID:"14a9cf797931430896ad13a6b1855611",VITE_OAUTH2_CLIENT_SECRET:"a05fe1fc50ed42a4990c6c6fc4bec398",VITE_OAUTH2_REDIRECT_URI:"http://192.168.101.10:3000/authorization-code",VITE_USER_NODE_ENV:"production"}&&/\bparse\b/.test({VITE_OPEN:"false",VITE_PORT:"3000",VITE_PROJECT:"",VITE_PROJECT_NAME:"Dante Cloud",VITE_API_URL:"http://192.168.101.10:8847/",VITE_CAPTCHA:"HUTOOL_LINE",VITE_SECRET_KEY:"8b026adcaa59468fd47ef361c623ce10",VITE_AUTO_REFRESH_TOKEN:"true",VITE_MULTI_TENANCY_ID:"",VITE_USE_CRYPTO:"true",VITE_USE_WEBSOCKET:"true",VITE_USE_OIDC:"true",VITE_OAUTH2_CLIENT_ID:"14a9cf797931430896ad13a6b1855611",VITE_OAUTH2_CLIENT_SECRET:"a05fe1fc50ed42a4990c6c6fc4bec398",VITE_OAUTH2_REDIRECT_URI:"http://192.168.101.10:3000/authorization-code",VITE_USER_NODE_ENV:"production"}.LOG);let $d=null;var Td,Md,Cd,Ed;function Rd(e,t,i){let r=e.cursor(Yc.IncludeAnonymous);for(r.moveTo(t);;)if(!(i<0?r.childBefore(t):r.childAfter(t)))for(;;){if((i<0?r.to<t:r.from>t)&&!r.type.isError)return i<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(i<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return i<0?0:e.length}}(Md=Td||(Td={}))[Md.Margin=25]="Margin";class Dd{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Rd(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Rd(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],r=this.index[t];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[r],n=this.start[t]+i.positions[r];if(n>e)return this.nextStart=n,null;if(s instanceof Jc){if(n==e){if(n<this.safeFrom)return null;let e=n+s.length;if(e<=this.safeTo){let t=s.prop(Wc.lookAhead);if(!t||e+t<this.fragment.to)return s}}this.index[t]++,n+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(n),this.index.push(0))}else this.index[t]++,this.nextStart=n+s.length}}}class Qd{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new kd))}getActions(e){let t=0,i=null,{parser:r}=e.p,{tokenizers:s}=r,n=r.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let l=0;l<s.length;l++){if(0==(1<<l&n))continue;let r=s[l],p=this.tokens[l];if((!i||r.fallback)&&((r.contextual||p.start!=e.pos||p.mask!=n||p.context!=o)&&(this.updateCachedToken(p,r,e),p.mask=n,p.context=o),p.lookAhead>p.end+25&&(a=Math.max(p.lookAhead,a)),0!=p.value)){let s=t;if(p.extended>-1&&(t=this.addActions(e,p.extended,p.end,t)),t=this.addActions(e,p.value,p.end,t),!r.extend&&(i=p,t>s))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),i||e.pos!=this.stream.end||(i=new kd,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new kd,{pos:i,p:r}=e;return t.start=i,t.end=Math.min(i+1,r.stream.end),t.value=i==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,i){if(t.token(this.stream.reset(i.pos,e),i),e.value>-1){let{parser:t}=i.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let s=t.specializers[r](this.stream.read(e.start,e.end),i);if(s>=0&&i.p.parser.dialect.allows(s>>1)){0==(1&s)?e.value=s>>1:e.extended=s>>1;break}}}else e.value=0,e.end=Math.min(i.p.stream.end,i.pos+1)}putAction(e,t,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=i,r}addActions(e,t,i,r){let{state:s}=e,{parser:n}=e.p,{data:o}=n;for(let a=0;a<2;a++)for(let e=n.stateSlot(s,a?2:1);;e+=3){if(65535==o[e]){if(1!=o[e+1]){0==r&&2==o[e+1]&&(r=this.putAction(Ld(o,e+2),t,i,r));break}e=Ld(o,e+2)}o[e]==t&&(r=this.putAction(Ld(o,e+1),t,i,r))}return r}}(Ed=Cd||(Cd={}))[Ed.Distance=5]="Distance",Ed[Ed.MaxRemainingPerStep=3]="MaxRemainingPerStep",Ed[Ed.MinBufferLengthPrune=500]="MinBufferLengthPrune",Ed[Ed.ForceReduceLimit=10]="ForceReduceLimit",Ed[Ed.CutDepth=15e3]="CutDepth",Ed[Ed.CutTo=9e3]="CutTo";class jd{constructor(e,t,i,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new Sd(t,r),this.tokens=new Qd(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[yd.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>4*e.bufferLength?new Dd(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,i=this.stacks,r=this.minStackPos,s=this.stacks=[];for(let n=0;n<i.length;n++){let o=i[n];for(;;){if(this.tokens.mainToken=null,o.pos>r)s.push(o);else{if(this.advanceStack(o,s,i))continue;{e||(e=[],t=[]),e.push(o);let i=this.tokens.getMainToken(o);t.push(i.value,i.end)}}break}}if(!s.length){let t=e&&function(e){let t=null;for(let i of e){let e=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=e&&i.pos>e)&&i.p.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i)}return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let i=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,s);if(i)return this.stackToTree(i.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(s.length>e)for(s.sort(((e,t)=>t.score-e.score));s.length>e;)s.pop();s.some((e=>e.reducePos>r))&&this.recovering--}else if(s.length>1)e:for(let n=0;n<s.length-1;n++){let e=s[n];for(let t=n+1;t<s.length;t++){let i=s[t];if(e.sameState(i)||e.buffer.length>500&&i.buffer.length>500){if(!((e.score-i.score||e.buffer.length-i.buffer.length)>0)){s.splice(n--,1);continue e}s.splice(t--,1)}}}this.minStackPos=s[0].pos;for(let n=1;n<s.length;n++)s[n].pos<this.minStackPos&&(this.minStackPos=s[n].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let r=e.pos,{parser:s}=this;qd&&this.stackID(e);if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,i=t?e.curContext.hash:0;for(let n=this.fragments.nodeAt(r);n;){let r=this.parser.nodeSet.types[n.type.id]==n.type?s.getGoto(e.state,n.type.id):-1;if(r>-1&&n.length&&(!t||(n.prop(Wc.contextHash)||0)==i))return e.useNode(n,r),!0;if(!(n instanceof Jc)||0==n.children.length||n.positions[0]>0)break;let o=n.children[0];if(!(o instanceof Jc&&0==n.positions[0]))break;n=o}}let n=s.stateSlot(e.state,4);if(n>0)return e.reduce(n),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let o=this.tokens.getActions(e);for(let a=0;a<o.length;){let s=o[a++],n=o[a++],l=o[a++],p=a==o.length||!i,h=p?e:e.split();if(h.apply(s,n,l),p)return!0;h.pos>r?t.push(h):i.push(h)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Xd(e,t),!0}}runRecovery(e,t,i){let r=null,s=!1;for(let n=0;n<e.length;n++){let o=e[n],a=t[n<<1],l=t[1+(n<<1)],p=qd?this.stackID(o)+" -> ":"";if(o.deadEnd){if(s)continue;if(s=!0,o.restart(),this.advanceFully(o,i))continue}let h=o.split(),c=p;for(let e=0;h.forceReduce()&&e<10;e++){if(this.advanceFully(h,i))break;qd&&(c=this.stackID(h)+" -> ")}for(let e of o.recoverByInsert(a))this.advanceFully(e,i);this.stream.end>o.pos?(l==o.pos&&(l++,a=0),o.recoverByDelete(a,l),Xd(o,i)):(!r||r.score<o.score)&&(r=o)}return r}stackToTree(e){return e.close(),Jc.build({buffer:Pd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=($d||($d=new WeakMap)).get(e);return t||$d.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Xd(e,t){for(let i=0;i<t.length;i++){let r=t[i];if(r.pos==e.pos&&r.sameState(e))return void(t[i].score<e.score&&(t[i]=e))}t.push(e)}class Nd{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||0==this.disabled[e]}}class Id extends md{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let i=Object.keys(e.topRules).map((t=>e.topRules[t][1])),r=[];for(let o=0;o<t.length;o++)r.push([]);function s(e,t,i){r[e].push([t,t.deserialize(String(i))])}if(e.nodeProps)for(let o of e.nodeProps){let e=o[0];"string"==typeof e&&(e=Wc[e]);for(let t=1;t<o.length;){let i=o[t++];if(i>=0)s(i,e,o[t++]);else{let r=o[t+-i];for(let n=-i;n>0;n--)s(o[t++],e,r);t++}}}this.nodeSet=new Gc(t.map(((t,s)=>Fc.define({name:s>=this.minRepeatTerm?void 0:t,id:s,props:r[s],top:i.indexOf(s)>-1,error:0==s,skipped:e.skippedNodes&&e.skippedNodes.indexOf(s)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Vc;let n=Ad(e.tokenData);if(this.context=e.context,this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let o=0;o<e.specialized.length;o++)this.specialized[o]=e.specialized[o].term,this.specializers[o]=e.specialized[o].get;this.states=Ad(e.states,Uint32Array),this.data=Ad(e.stateData),this.goto=Ad(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new _d(n,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let r=new jd(this,e,t,i);for(let s of this.wrappers)r=s(r,e,t,i);return r}getGoto(e,t,i=!1){let r=this.goto;if(t>=r[0])return-1;for(let s=r[t+1];;){let t=r[s++],n=1&t,o=r[s++];if(n&&i)return o;for(let i=s+(t>>1);s<i;s++)if(r[s]==e)return o;if(n)return-1}}hasAction(e,t){let i=this.data;for(let r=0;r<2;r++)for(let s,n=this.stateSlot(e,r?2:1);;n+=3){if(65535==(s=i[n])){if(1!=i[n+1]){if(2==i[n+1])return Ld(i,n+2);break}s=i[n=Ld(i,n+2)]}if(s==t||0==s)return Ld(i,n+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])return!1;i=Ld(this.data,i+2)}if(t==Ld(this.data,i+1))return!0}}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=Ld(this.data,i+2)}if(0==(1&this.data[i+2])){let e=this.data[i+1];t.some(((t,i)=>1&i&&t==e))||t.push(this.data[i],e)}}return t}overrides(e,t){let i=Bd(this.data,this.tokenPrecTable,t);return i<0||Bd(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(Id.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let i=e.tokenizers.find((e=>e.from==t));return i?i.to:t}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map((()=>!1));if(e)for(let s of e.split(" ")){let e=t.indexOf(s);e>=0&&(i[e]=!0)}let r=null;for(let s=0;s<t.length;s++)if(!i[s])for(let e,i=this.dialects[t[s]];65535!=(e=this.data[i++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[e]=1;return new Nd(e,i,r)}static deserialize(e){return new Id(e)}}function Ld(e,t){return e[t]|e[t+1]<<16}function Bd(e,t,i){for(let r,s=t;65535!=(r=e[s]);s++)if(r==i)return s-t;return-1}const Vd={__proto__:null,for:10,in:18,return:23,if:26,then:28,else:30,some:34,every:36,satisfies:43,or:46,and:50,between:58,instance:82,of:85,days:93,time:95,duration:97,years:99,months:101,date:103,list:109,context:115,function:122,string:141,length:143,upper:145,case:147,lower:149,substring:151,before:153,after:155,starts:157,with:159,ends:161,contains:163,insert:165,index:167,distinct:169,values:171,met:173,by:175,overlaps:177,finished:179,started:181,day:183,year:185,week:187,month:189,get:191,value:193,entries:195,start:205,position:207,decimal:209,sep:211,separator:213,grouping:215,null:218,true:344,false:344,"?":232,external:248,method:265,signature:267,not:273},Ud=Id.deserialize({version:14,states:"!#UO]QPOOO&hQPOOO'sQPO'#FiO]QPO'#DOO*[QPO'#DOO,zQPO'#DrOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpO,zQPO'#EqOOQO'#F{'#F{OOQO'#Fz'#FzOOQO'#Es'#EsO-PQPO'#EvO-kQPO'#EwO0ZQPO'#ExO-PQPO'#EuOOQO'#Eu'#EuOOQO'#Fk'#FkO0bQPO'#FQOOQO'#GQ'#GQOOQO'#Fj'#FjOOQO'#FZ'#FZQ]QPOOO0pQPO'#C`O]QPO'#ChO0pQPO'#ClO0uQPO'#DsO0zQPO'#DsO1PQPO'#DsO1UQPO'#DsO1^QPO'#DsO1cQPO'#DsO1hQPO'#DsO1mQPO'#DsO1rQPO'#DsO1wQPO'#DsO1|QPO'#DsO2RQPO'#DsO2WQPO'#DsO2`QPO'#ErOOQO'#Er'#ErO2hQPO'#EyO2mQPO'#CzO5hQPO'#FqOOQO'#C|'#C|O5sQPO'#FXQOQPOOO5zQPOOO]QPO,59bO]QPO,59jO]QPO,59jO]QPO,59jO0pQPO,5:YO]QPO,5:[O8lQPO'#FwOOQO,5:^,5:^OOQO,5<T,5<TO]QPO,59^O]QPO,59`O]QPO,59bO;lQPO,59bO;sQPO,59pO;xQPO,59jOB]QPO,5;YOOQO,5;],5;]OOQO'#Cd'#CdOGqQPO'#DYOKoQPO'#EnOOQO'#GP'#GPOKtQPO,5;bOMQQPO'#CdOM_QPO,5;cOMfQPO'#FzONsQPO'#FyO! QQPO,5;dOOQO,5;a,5;aOOQO'#FS'#FSO! VQPO'#FRO! [QPO'#GSO! dQPO,5;lO! iQPO'#FTOOQO-E9X-E9XO! nQPO'#FmOOQO'#Cb'#CbO! vQPO'#CcO! {QPO,58zO!!QQPO,59SO!!XQPO'#FpOOQO'#Co'#CoO!!aQPO'#CpO!!fQPO,59WO!!kQPO,5:_OOQO,5:_,5:_O!!pQPO,5:_O!!xQPO,5:_O!!}QPO,5;^O!#SQPO,5;eO]QPO'#F^O!#eQPO,5<]O]QPOOO!'XQPO1G.|O!+^QPO1G/UO!+hQPO1G/UO!/jQPO1G/UOOQO1G/t1G/tO!/tQPO1G/vOOQO'#Ed'#EdO!/{QPO'#EcO!0QQPO'#FxOOQO'#Eb'#EbOOQO'#El'#ElO!0YQPO,5<cO!0_QPO'#EeO!0dQPO'#EeO!3tQPO1G.xO!7sQPO1G.zO!9bQPO1G.|O-kQPO1G.|OOQO1G.|1G.|O!9iQPO1G/[O0pQPO'#F_O!:QQPO,59tOOQO,5;Y,5;YO-PQPO1G0|OOQO1G0}1G0}O]QPO'#FcO!>OQPO,5<eOOQO1G1O1G1OO]QPO,5;mO!>ZQPO'#FeO!>fQPO,5<nOOQO1G1W1G1WOOQO,5;o,5;oO0pQPO'#F[O!>nQPO,5<XO!>vQPO,58}O]QPO1G.fO!AfQPO1G.nO0pQPO'#F]O!DUQPO,5<[O]QPO,59[O]QPO1G.rO!D^QPO1G/yOOQO1G/y1G/yOOQO1G0x1G0xO!DcQPO'#E{O!DnQPO'#GROOQO'#Ez'#EzO!DvQPO1G1POOQO,5;x,5;xOOQO-E9[-E9[O!D{QPOOOOQO7+%b7+%bO]QPO,5:}O!EQQPO'#FbO!E`QPO,5<dOOQO1G1}1G1}OOQO,5;P,5;PO]QPO7+$hO!EhQPO,5;cO!ErQPO7+$hOOQO'#DX'#DXO!EwQPO'#DZO!E|QPO'#DZO!FRQPO'#DZO!FWQQO'#DcO!F]QQO'#DfO!FbQQO'#DjOOQO7+$v7+$vOOQO,5;y,5;yOOQO-E9]-E9]O!FgQPO7+&hO!FrQPO,5;}OOQO-E9a-E9aO!GPQPO1G1XOOQO,5<P,5<POOQO-E9c-E9cOOQO,5;v,5;vOOQO-E9Y-E9YO!H[QPO'#CfOOQO1G.i1G.iO!HiQPO7+$QO# [QPO7+$YOOQO,5;w,5;wOOQO-E9Z-E9ZO# cQPO1G.vO# mQPO7+$^OOQO7+%e7+%eO!9iQPO,5;gO!EQQPO'#FdO#$hQPO,5<mO#$pQPO7+&kO#$wQPO1G0iOOQO,5;|,5;|OOQO-E9`-E9`O#(jQPO<<HSOOQO<<HS<<HSO#(}QPO,59uO#)SQPO,59uO#)XQPO,59uO#)^QPO,59}O0pQPO,5:QO#)uQQO,5:UOOQO<<JS<<JSO]QPO,59QO]QPO<<GtOOQO1G1R1G1ROOQO,5<O,5<OOOQO-E9b-E9bO#)|QPO'#E}OOQO<<JV<<JVO]QPO<<JVO#,wQPO1G/aOOQO1G/a1G/aO#,|QQO'#DYO#-XQQO1G/iO#-^QPO'#DiO#-cQQO'#FsOOQO'#Dh'#DhO#-kQQO1G/lOOQO'#Dm'#DmO#-pQQO'#FuOOQO'#Dl'#DlO#-xQQO1G/pO#-}QPO1G.lO#.XQPOAN=`OOQOAN?qAN?qOOQO7+${7+${O#1SQQO,59tOOQO7+%T7+%TO#)^QPO,5:TO0pQPO'#F`O#1_QQO,5<_OOQO7+%W7+%WO#)^QPO'#FaO#1gQQO,5<aO#1oQQO7+%[OOQO1G/o1G/oOOQO,5;z,5;zOOQO-E9^-E9^OOQO,5;{,5;{OOQO-E9_-E9_O!9iQPO<<HvOOQOAN>bAN>bO#1tQPO,5;YO#1{QPO'#CdO#2SQPO7+$YO#)^QPO<<HvO#4vQPO'#DOO!>vQPO,59bO!>vQPO,59jO!>vQPO,59jO!>vQPO,59jO!>vQPO,59^O!>vQPO,59`O#7jQPO,59bO#8lQPO1G.|O#:TQPO1G/UO#:_QPO1G/UO#;gQPO1G.xO#<rQPO1G.zO!>vQPO1G.fO#=VQPO1G.nO!AfQPO1G.nO#=VQPO1G.nO!>vQPO1G.rO!>vQPO7+$hO#?uQPO7+$QO#A^QPO7+$YO#AeQPO7+$^O#ArQPO7+&kO#BtQPO<<HSO!>vQPO<<GtO#CXQPO'#E}O!>vQPO<<JVO#CfQPOAN=`O#CsQQO7+%[O#CxQPO7+$YO!>vQPO'#DOO#DPQPO'#CzO#D^QPO,58zO#DcQPO,59SO#DjQPO,59SO#DqQPO,59SO#DxQPO,59WO#D}QPO1G.|O#EUQPO1G1PO#EZQQO1G/pO0pQPO'#C`O]QPO'#ChO]QPO'#ChO]QPO'#ChO0pQPO'#ClO!AfQPO,59bO!AfQPO,59jO!AfQPO,59jO!AfQPO,59jO!AfQPO,59^O!AfQPO,59`O]QPO,59bO#G{QPO,59bO!#SQPO,5;eO#HSQPO1G.|O#L_QPO1G/UO#LiQPO1G/UO#LpQPO1G.xO#MgQPO1G.zO!AfQPO1G.fO!AfQPO1G.rO!AfQPO7+$hO$ [QPO7+$QO$$YQPO7+$^O$'WQPO7+&kO$'_QPO<<HSO#)uQQO,5:UP!AfQPO<<GtO$'uQPO'#E}O!AfQPO<<JVP$*sQPOAN=`O$.cQPO'#DOO#=VQPO,59bO#=VQPO,59jO#=VQPO,59jO#=VQPO,59jO#=VQPO,59^O#=VQPO,59`O$1VQPO,59bO$1^QPO1G.|O$2{QPO1G/UO$3VQPO1G/UO$4_QPO1G.xO$5mQPO1G.zO#=VQPO1G.fO#=VQPO1G.rO#=VQPO7+$hO$6TQPO7+$QO$6hQPO7+$^O$6{QPO7+&kO$7SQPO<<HSP#=VQPO<<GtO$7jQPO'#E}O#=VQPO<<JVP$7}QPOAN=`O#=VQPO'#DOO$8bQPO'#CzO$8uQPO,58zO$8zQPO,59WO$9PQPO1G.|O$9WQPO1G1PO!AfQPO'#DOO$;cQPO'#DOO$<PQPO'#EyO$<UQPO'#CzO$?SQPO,58zO$?XQPO,59WO$?^QPO1G.|O$?eQPO1G1PO$?jQQO'#DjO0pQPO'#C`O0pQPO'#ClO]QPO,59bO!#SQPO,5;eO0pQPO'#C`O0pQPO'#ClO]QPO,59bO!#SQPO,5;eO$?oQPO'#EyO$?tQPO'#Ey",stateData:"$?y~O$[OSPOSQOS~OThO]iOajObjOl`Oo^OsROtSO!PyO!QyO!RkO!TxO!WpO!_zO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$pUO$qVO$rWO~OThO]iOajObjOl`Oo^OsRO!PyO!QyO!RkO!TxO!WpO!_zO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$pUO$qVO$rWO~Ot!OO#|!QO~P#{OX!_Og![Oi!]Ok!ROl!ROm!^Oo!XOs!SOt!SOu!TOv!TOw!UOy!`O!e!WO$f!VO~O$w!ZOT$]X]$]Xa$]Xb$]X!P$]X!Q$]X!R$]X!T$]X!W$]X!_$]X!c$]X!h$]X!j$]X!l$]X!m$]X!p$]X!r$]X!t$]X!u$]X!v$]X!x$]X!z$]X!{$]X!|$]X!}$]X#P$]X#Q$]X#R$]X#a$]X#h$]X#s$]X$Y$]X$`$]X$p$]X$q$]X$r$]X~P&rOThO]iOajObjOl`Oo^OsROtSO!PyO!QyO!RkO!TxO!WpO!_zO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$p!bO$qVO$rWO~Oo!XO~Ot!fO!PyO!QyO!TxO$`!dO$pUO$qVO$rWO~OThO]iOajObjOl`Oo^OsROtSO!PyO!QyO!RkO!TxO!WpO!_zO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`!iO$pUO$qVO$rWO~O!c$mP~P-kO#x!sO$`!dO$qVO#r$vP~O$`!dO~Oi#OO~O!i#PO~O!k#PO~O!n#PO!o#PO~O!q#PO~O!s#PO~O!n#PO~Oz#PO~O!w#PO~O!y#PO~Oz#QO~Oz#RO~O#S#PO#T#PO~Oi#SOo#fX~Oo#TO~O$YnX$cnXTnX]nXanXbnX!PnX!QnX!RnX!TnX!WnX!_nX!cnX!hnX!jnX!lnX!mnX!pnX!rnX!tnX!unX!vnX!xnX!znX!{nX!|nX!}nX#PnX#QnX#RnX#anX#hnX#snX$`nX$pnX$qnX$rnX$wnXqnX^nX#rnXenXZnX~P&rO$c#UO$Y$eXq$eX~O$Y#{X~P*[Oo#WO~OThO]iOajObjOl`Oo^OsROtSO!PyO!QyO!RkO!TxO!WpO!_zO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$pUO$qVO$rWO~O#Y#eO#[#fO#_#fO$`&`Oq$mP~P6POThO]iOajObjOl`OsROtSO!PyO!QyO!RkO!TxO!WpO!_zO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$pUO$qVO$rWO~Oo#jO~P9POz#lO~Oo!XOy!`O!e!WO$f!VOTraXra]raarabragrairakralramrasratrauravrawra!Pra!Qra!Rra!Tra!Wra!_ra!cra!hra!jra!lra!mra!pra!rra!tra!ura!vra!xra!zra!{ra!|ra!}ra#Pra#Qra#Rra#ara#hra#sra$Yra$`ra$pra$qra$rra$wra$craqra^ra#rraZra$bra_raera~OX#bXX#bag#bXg#bai#bXi#bak#bXk#bal#bXl#bam#bXm#bao#bXo#bas#bXs#bat#bXt#bau#bXu#bav#bXv#baw#bXw#bay#bXy#ba!e#bX!e#ba$f#bX$f#ba$c#bX$c#ba$b#ba_#bX_#baZ#bXZ#ba~OT#bXT#ba]#bX]#baa#bXa#bab#bXb#ba!P#bX!P#ba!Q#bX!Q#ba!R#bX!R#ba!T#bX!T#ba!W#bX!W#ba!_#bX!_#ba!c#bX!c#ba!h#bX!h#ba!j#bX!j#ba!l#bX!l#ba!m#bX!m#ba!p#bX!p#ba!r#bX!r#ba!t#bX!t#ba!u#bX!u#ba!v#bX!v#ba!x#bX!x#ba!z#bX!z#ba!{#bX!{#ba!|#bX!|#ba!}#bX!}#ba#P#bX#P#ba#Q#bX#Q#ba#R#bX#R#ba#a#bX#a#ba#h#bX#h#ba#s#bX#s#ba$Y#bX$Y#ba$`#bX$`#ba$p#bX$p#ba$q#bX$q#ba$r#bX$r#ba$w#bX$w#baq#bXq#ba^#bX^#ba#r#bX#r#bae#bXe#ba~P?vO$f#mO$b|XT|XX|X]|Xa|Xb|Xg|Xi|Xk|Xl|Xm|Xo|Xs|Xt|Xu|Xv|Xw|Xy|X!P|X!Q|X!R|X!T|X!W|X!_|X!c|X!e|X!h|X!j|X!l|X!m|X!p|X!r|X!t|X!u|X!v|X!x|X!z|X!{|X!||X!}|X#P|X#Q|X#R|X#a|X#h|X#s|X$Y|X$`|X$p|X$q|X$r|X$w|X$c|Xq|X^|X#r|XZ|X_|Xe|X~O$p#oO~O$b#pO~OX#gXg#gXi#gXk#gXl#gXm#gXo#gXq#gXs#gXt#gXu#gXv#gXw#gXy#gX!e#gX$f#gX$c#gX~O$bWX$fWX!c#gX~PKyOq#qO~P&rOX$nXg$nXi$nXk$nXl$nXm$nXo$nXq$nXs$nXt$nXu$nXv$nXw$nXy$nX!e$nX$b$sX$f$nX!c$nX$c$nX~O$c#rO!c$mXq$mX~P&rO!c#tO~O$h#uO~O$c#vO#r$vX~O#r#xO~O#y#yO~O$c#zOZ$aX~OX#|O~OZ#}O~O^$OO~P&rO$c$POe$dX~OX$RO~Oe$SO~O!S$TO~O#O$UO#P$UO~O#O$UO~O!P$VO~O#Y#eO#[#fO#_#fO$`!dOq$uP~O$c#UO$Y$eaq$ea~Oo!XOy!`O!e!WO$f!VOTjiXji]jiajibjigjiijikjiljimji!Pji!Qji!Rji!Tji!Wji!_ji!cji!hji!jji!lji!mji!pji!rji!tji!uji!vji!xji!zji!{ji!|ji!}ji#Pji#Qji#Rji#aji#hji#sji$Yji$`ji$pji$qji$rji$wji$cjiqji^ji#rjiejiZji~Os!SOt!SOu!TOv!TOw!UO~P!#pOo!XOw!UOy!`O!e!WO$f!VOTriXri]riaribrigriirikrilrimrisritri!Pri!Qri!Rri!Tri!Wri!_ri!cri!hri!jri!lri!mri!pri!rri!tri!uri!vri!xri!zri!{ri!|ri!}ri#Pri#Qri#Rri#ari#hri#sri$Yri$`ri$pri$qri$rri$wri$criqri^ri#rrieriZri~Ou!TOv!TO~P!'lOurivri~P!'lOo!XOy!`O!e!WO$f!VOTriXri]riaribrigriirikrilrimrisritriurivri!Pri!Qri!Rri!Tri!Wri!_ri!cri!hri!jri!lri!mri!pri!rri!tri!uri!vri!xri!zri!{ri!|ri!}ri#Pri#Qri#Rri#ari#hri#sri$Yri$`ri$pri$qri$rri$wri$criqri^ri#rriZri_rieri~Owri$bri~P!+rO!c$_O~P&rO$h$`O~O$c$aOq$lX~Oq$cO~O#Z$dO~O#]$dO#^$dO~Oo!XOy!`O!e!WO$f!VOTfi]fiafibfigfi!Pfi!Qfi!Rfi!Tfi!Wfi!_fi!cfi!hfi!jfi!lfi!mfi!pfi!rfi!tfi!ufi!vfi!xfi!zfi!{fi!|fi!}fi#Pfi#Qfi#Rfi#afi#hfi#sfi$Yfi$`fi$pfi$qfi$rfi$wfi$cfiqfi^fi#rfiefiZfi~OX!_Oi!]Ok!ROl!ROm!^Os!SOt!SOu!TOv!TOw!UO~P!0lOo!XOy!`O!e!WO$f!VOThi]hiahibhighiihi!Phi!Qhi!Rhi!Thi!Whi!_hi!chi!hhi!jhi!lhi!mhi!phi!rhi!thi!uhi!vhi!xhi!zhi!{hi!|hi!}hi#Phi#Qhi#Rhi#ahi#hhi#shi$Yhi$`hi$phi$qhi$rhi$whi$chiqhi^hi#rhiehiZhi~OX!_Ok!ROl!ROm!^Os!SOt!SOu!TOv!TOw!UO~P!4hOX!_Og![Ok!ROl!ROm!^Oo!XOs!SOt!SOu!TOv!TOw!UOy!`O!e!WO$f!VO~Oi$eO~P!8dO!O$iO!R$jO!T$kO!W$lO!Z$mO!_$nO$`!dO~O$f#mO$b|aT|aX|a]|aa|ab|ag|ai|ak|al|am|ao|as|at|au|av|aw|ay|a!P|a!Q|a!R|a!T|a!W|a!_|a!c|a!e|a!h|a!j|a!l|a!m|a!p|a!r|a!t|a!u|a!v|a!x|a!z|a!{|a!||a!}|a#P|a#Q|a#R|a#a|a#h|a#s|a$Y|a$`|a$p|a$q|a$r|a$w|a$c|aq|a^|a#r|aZ|a_|ae|a~O$c#rO!c$maq$ma~O#x!sO$`!dO$qVO~O$c#vO#r$va~O$c#zOZ$aa~OT']O]'^Oa'aOb'aOl`Oo^Os'ROt&cO!PyO!QyO!RkO!TxO!WpO!_(nO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$pUO$qVO$rWO~OT(yO]'_Oa(zOb(zOl`Oo^Os(lOt(mO!PyO!QyO!RkO!TxO!WpO!_)OO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$pUO$qVO$rWO~O$c$POe$da~O!Q%SO~O$h%TOq#oX$c#oX~O$c%UOq$uX~Oq%WO~Oq!PO~O#Y#eO#[#fO#_#fO$`!dO~O$c$aOq$la~Oq#qO$cnX~P&rOq%]O~Oi%^O~Oi%_O~Oi%`O~O!X%aO~O!X%bO~O!X%cO~Oq%dO!c%dO!e%dO~O!c$Va$c$Vaq$Va~P&rO#r#ui$c#ui~P&rOX&jOg&hOi&iOk&dOl&dOm'hOo!XOs&eOt&eOu&fOv&fOw&gOy!`O!e!WO$f!VO~O$b%eOZYX$cYX~P!GZOTSq]SqaSqbSq!PSq!QSq!RSq!TSq!WSq!_Sq!cSq!hSq!jSq!lSq!mSq!pSq!rSq!tSq!uSq!vSq!xSq!zSq!{Sq!|Sq!}Sq#PSq#QSq#RSq#aSq#hSq#sSq$YSq$`Sq$pSq$qSq$rSq$wSq$cSqqSq^Sq#rSqeSqZSq~P&rOX'iOg'fOi'gOk'bOl'bOm({Oo!XOs'cOt'cOu'dOv'dOw'eOy!`O!e!WO$f!VOT[q][qa[qb[q!P[q!Q[q!R[q!T[q!W[q!_[q!c[q!h[q!j[q!l[q!m[q!p[q!r[q!t[q!u[q!v[q!x[q!z[q!{[q!|[q!}[q#P[q#Q[q#R[q#a[q#h[q#s[q$Y[q$`[q$p[q$q[q$r[q$w[q$c[qq[q^[q#r[qe[qZ[q~O_%fO~P!KdOedi$cdi~P&rOT`q]`qa`qb`q!P`q!Q`q!R`q!T`q!W`q!_`q!c`q!h`q!j`q!l`q!m`q!p`q!r`q!t`q!u`q!v`q!x`q!z`q!{`q!|`q!}`q#P`q#Q`q#R`q#a`q#h`q#s`q$Y`q$``q$p`q$q`q$r`q$w`q$c`qq`q^`q#r`qe`qZ`q~P&rO$c%UOq$ua~O#p%lO~P]Oq#Vi$c#Vi~P&rOo!XOy!`O!e!WO$f!VOTjyXjy]jyajybjygjyijykjyljymjy!Pjy!Qjy!Rjy!Tjy!Wjy!_jy!cjy!hjy!jjy!ljy!mjy!pjy!rjy!tjy!ujy!vjy!xjy!zjy!{jy!|jy!}jy#Pjy#Qjy#Rjy#ajy#hjy#sjy$Yjy$`jy$pjy$qjy$rjy$wjy$cjyqjy^jy#rjyejyZjy~Os!SOt!SOu!TOv!TOw!UO~P#%RO!P%mO~O!S%mO~O!P%nO~O!O$iO!R$jO!T$kO!W$lO!Z$mO!_(tO$`!dO~O!U$iP~P#)^OT#qX]#qXa#qXb#qX!P#qX!Q#qX!R#qX!T#qX!W#qX!_#qX!c#qX!h#qX!j#qX!l#qX!m#qX!p#qX!r#qX!t#qX!u#qX!v#qX!x#qX!z#qX!{#qX!|#qX!}#qX#P#qX#Q#qX#R#qX#a#qX#h#qX#s#qX$Y#qX$`#qX$p#qX$q#qX$r#qX$w#qX$c#qXq#qX^#qX#r#qXe#qXZ#qX~P&rO!Q%|O~O$f#mO!U|X$c|X~O!U&OO~O$h&PO~O$c&QO!U$gX~O!U&SO~O$c&TO!U$iX~O!U&VO~OZYi$cYi~P&rOT[!R][!Ra[!Rb[!R!P[!R!Q[!R!R[!R!T[!R!W[!R!_[!R!c[!R!h[!R!j[!R!l[!R!m[!R!p[!R!r[!R!t[!R!u[!R!v[!R!x[!R!z[!R!{[!R!|[!R!}[!R#P[!R#Q[!R#R[!R#a[!R#h[!R#s[!R$Y[!R$`[!R$p[!R$q[!R$r[!R$w[!R$c[!Rq[!R^[!R#r[!Re[!RZ[!R~P&rO$f#mO!U|a$c|a~O$c&QO!U$ga~O$c&TO!U$ia~O$j&]O~O$b#bX~P?vO$hWX~PKyO_[q~P!KdOT']O]'^Oa'aOb'aOl`Oo^Os'ROt&cO!PyO!QyO!RkO!TxO!WpO!_(nO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$qVO$rWO~O$p&_O~P#2ZOT']O]'^Oa'aOb'aOl`Os'ROt&cO!PyO!QyO!RkO!TxO!WpO!_(nO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$pUO$qVO$rWO~Oo#jO~P#4}Oo!XOy!`O!e!WO$f!VOXjiZjigjiijikjiljimji$bji$cji~Os&eOt&eOu&fOv&fOw&gO~P#7qOo!XOw&gOy!`O!e!WO$f!VOXriZrigriirikrilrimrisritri$bri$cri~Ou&fOv&fO~P#9POurivri~P#9POX&jOi&iOk&dOl&dOm'hOo!XOs&eOt&eOu&fOv&fOw&gOy!`O!e!WO$f!VO~OZfigfi$bfi$cfi~P#:iOX&jOk&dOl&dOm'hOo!XOs&eOt&eOu&fOv&fOw&gOy!`O!e!WO$f!VO~OZhighiihi$bhi$chi~P#;wOT(uO]'`Oa(vOb(vOl`Oo^Os(fOt'|O!PyO!QyO!RkO!TxO!WpO!_(}O!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$pUO$qVO$rWO~OZSq$bSq$cSq~P!GZOX(TOg(ROi(SOk'}Ol'}Om(wOo!XOs(OOt(OOu(POv(POw(QOy!`O!e!WO$f!VOZ[q$b[q$c[q~O_&{O~P#@SOZ`q$b`q$c`q~P!GZO#p&}O~P!>vOo!XOy!`O!e!WO$f!VOXjyZjygjyijykjyljymjy$bjy$cjy~Os&eOt&eOu&fOv&fOw&gO~P#AyOZ#qX$b#qX$c#qX~P!GZOZ[!R$b[!R$c[!R~P!GZO$j&bO~O_[q~P#@SOZnX$bnX$cnX~P!GZOZ&pO~O^&qO~P&rO^&rO~P&rO^&sO~P&rOe&tO~Oi&uO~P!8dOq&yO~O!U'PO~OT(yO]'_Oa(zOb(zOl`Os(lOt(mO!PyO!QyO!RkO!TxO!WpO!_)OO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$pUO$qVO$rWO~Oo#jO~P#E`Os'cOt'cOu'dOv'dOw'eO_ji~P!#pOo!XOw'eOy!`O!e!WO$f!VOTriXri]ri_riaribrigriirikrilrimrisritri!Pri!Qri!Rri!Tri!Wri!_ri!cri!hri!jri!lri!mri!pri!rri!tri!uri!vri!xri!zri!{ri!|ri!}ri#Pri#Qri#Rri#ari#hri#sri$Yri$`ri$pri$qri$rri$wri$criqri^ri#rrieriZri~Ou'dOv'dO~P#HjOw'eO~P!+rOX'iOi'gOk'bOl'bOm({Os'cOt'cOu'dOv'dOw'eO_fi~P!0lOX'iOk'bOl'bOm({Os'cOt'cOu'dOv'dOw'eO_hi~P!4hOX'iOg'fOi'gOk'bOl'bOm({Oo!XOs'cOt'cOu'dOv'dOw'eOy!`O!e!WO$f!VO~OTSq]Sq_SqaSqbSq!PSq!QSq!RSq!TSq!WSq!_Sq!cSq!hSq!jSq!lSq!mSq!pSq!rSq!tSq!uSq!vSq!xSq!zSq!{Sq!|Sq!}Sq#PSq#QSq#RSq#aSq#hSq#sSq$YSq$`Sq$pSq$qSq$rSq$wSq$cSqqSq^Sq#rSqeSqZSq~P#NZOT`q]`q_`qa`qb`q!P`q!Q`q!R`q!T`q!W`q!_`q!c`q!h`q!j`q!l`q!m`q!p`q!r`q!t`q!u`q!v`q!x`q!z`q!{`q!|`q!}`q#P`q#Q`q#R`q#a`q#h`q#s`q$Y`q$``q$p`q$q`q$r`q$w`q$c`qq`q^`q#r`qe`qZ`q~P#NZO#p'zO~P!AfOs'cOt'cOu'dOv'dOw'eO_jy~P#%ROT#qX]#qX_#qXa#qXb#qX!P#qX!Q#qX!R#qX!T#qX!W#qX!_#qX!c#qX!h#qX!j#qX!l#qX!m#qX!p#qX!r#qX!t#qX!u#qX!v#qX!x#qX!z#qX!{#qX!|#qX!}#qX#P#qX#Q#qX#R#qX#a#qX#h#qX#s#qX$Y#qX$`#qX$p#qX$q#qX$r#qX$w#qX$c#qXq#qX^#qX#r#qXe#qXZ#qX~P#NZOX'iOg'fOi'gOk'bOl'bOm({Oo!XOs'cOt'cOu'dOv'dOw'eOy!`O!e!WO$f!VO~Q[!RT(uO]'`Oa(vOb(vOl`Oo^Os(fOt'|O!PyO!QyO!RkO!TxO!WpO!_(}O!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$qVO$rWO~O$p&_O~P$+vOT(uO]'`Oa(vOb(vOl`Os(fOt'|O!PyO!QyO!RkO!TxO!WpO!_(}O!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$pUO$qVO$rWO~Oo#jO~P$.jOs(OOt(OOu(POv(POw(QO_ji~P#7qOo!XOw(QOy!`O!e!WO$f!VOXriZri_rigriirikrilrimrisritri$bri$cri~Ou(POv(PO~P$1tOurivri~P$1tOX(TOi(SOk'}Ol'}Om(wOo!XOs(OOt(OOu(POv(POw(QOy!`O!e!WO$f!VO~OZfi_figfi$bfi$cfi~P$3aOX(TOk'}Ol'}Om(wOo!XOs(OOt(OOu(POv(POw(QOy!`O!e!WO$f!VO~OZhi_highiihi$bhi$chi~P$4rOg(ROZSq_Sq$bSq$cSq~P$3aOg(ROZ`q_`q$b`q$c`q~P$3aO#p(dO~P#=VOs(OOt(OOu(POv(POw(QO_jy~P#AyOg(ROZ#qX_#qX$b#qX$c#qX~P$3aOg(ROZ[!R_[!R$b[!R$c[!R~P$3aOg(ROZnX_nX$bnX$cnX~P$3aOZ(ZO~Oe([O~Oi(]O~P!8dOq(`O~Ol`Oo^O!PyO!QyO!RkO!TxO!WpO!c]O!e_O!hlO!jmO!lmO!mnO!poO!roO!tqO!urO!vsO!xtO!znO!{tO!|tO!}uO#PvO#QvO#RwO#aZO#hbO#scO$`[O$qVO$rWO~OT(yO]'_Oa(zOb(zOs(lOt(mO!_)OO$p!bO~P$9]Oo'jO~OTnX]nX_nXanXbnX!PnX!QnX!RnX!TnX!WnX!_nX!cnX!hnX!jnX!lnX!mnX!pnX!rnX!tnX!unX!vnX!xnX!znX!{nX!|nX!}nX#PnX#QnX#RnX#anX#hnX#snX$YnX$`nX$pnX$qnX$rnX$wnX$cnXqnX^nX#rnXenXZnX~P#NZOZ'pO~Oe'qO~Oi'rO~P!8dOq'uO~O!X'wO~Oo(xO~Oo(|O~O",goto:"FU$wPPPP$xP&w'T'^P(hP$xPPP$xPP(k(wP$xP$xP$xPPP)QP)`P$xPPPPP$xPP)i*O*WPPPPPPP*WPP*WP*c*f*WP*l*r$xP$xP$x*yPPPPPPPPPPPPPPPPPPPPPPPPPPPP,x,{-R-^PPPPPP,xP-g/i-g-g1o$xP$x3q$x5p5p7o7{P8UPP5p8b8h1kPPP8lP8o8u8{9R9X9c9i9o9u9{:RPPP:X:]?YPAXPPA_AePAjPAmPAqC`Cc$xCiPPPEo?YE{FR$ybOPRS^_gi!O!R!S!T!U!W!X![!]!^!_#U#W#j#r#u#|#}$O$R$S$`$e%W%e%f%l&c&d&e&f&g&h&i&j&p&q&r&s&t&u&y&{&}'R'^'_'`'b'c'd'e'f'g'h'i'p'q'r'u'x'z'|'}(O(P(Q(R(S(T(Z([(](`(b(d(f(l(m(w({Q!xhQ'T']Q(h(uR(p(yW!uh'](u(yR$x#zb!e]^_`#j#l#p%T&]S!oc#vY!wh#z'](u(yY!|j$P'a(v(zQ#]!V^#_!X#T$a%U'j(x(|Q$p#m[%o%a%c&P&T&b'wT%q%b&QR${#|Q!}jQ'X'aQ(i(vR(q(zW!zj'a(v(zR%O$PU|P#W#jW#k!_&j'i(TR$[#UQ!PPQ$^#WR$g#jQ$o#lQ%g%TQ%p%aU%u%c&T'wQ&W&PT&^&]&b[!g]^_`#j#pc$h#l%T%a%c&P&T&]&b'wR%t%bQ%r%bR&X&QQ%x%cR'['wS%v%c'wR&Z&T$yTOPRS^_gi!O!R!S!T!U!W!X![!]!^!_#U#W#j#r#u#|#}$O$R$S$`$e%W%e%f%l&c&d&e&f&g&h&i&j&p&q&r&s&t&u&y&{&}'R'^'_'`'b'c'd'e'f'g'h'i'p'q'r'u'x'z'|'}(O(P(Q(R(S(T(Z([(](`(b(d(f(l(m(w({R#d!XQ#a!XR%Y$aS#`!X$aZ$W#T%U'j(x(|_#_!X#T$a%U'j(x(|%PYOPRS]^_`gi!O!R!S!T!U!W!X![!]!^!_#U#W#j#p#r#u#|#}$O$R$S$`$e%W%e%f%l&c&d&e&f&g&h&i&j&p&q&r&s&t&u&y&{&}'R'^'_'`'b'c'd'e'f'g'h'i'p'q'r'u'x'z'|'}(O(P(Q(R(S(T(Z([(](`(b(d(f(l(m(w({%OYOPRS]^_`gi!O!R!S!T!U!W!X![!]!^!_#U#W#j#p#r#u#|#}$O$R$S$`$e%W%e%f%l&c&d&e&f&g&h&i&j&p&q&r&s&t&u&y&{&}'R'^'_'`'b'c'd'e'f'g'h'i'p'q'r'u'x'z'|'}(O(P(Q(R(S(T(Z([(](`(b(d(f(l(m(w({T!oc#v%PXOPRS]^_`gi!O!R!S!T!U!W!X![!]!^!_#U#W#j#p#r#u#|#}$O$R$S$`$e%W%e%f%l&c&d&e&f&g&h&i&j&p&q&r&s&t&u&y&{&}'R'^'_'`'b'c'd'e'f'g'h'i'p'q'r'u'x'z'|'}(O(P(Q(R(S(T(Z([(](`(b(d(f(l(m(w({$yaOPRS^_gi!O!R!S!T!U!W!X![!]!^!_#U#W#j#r#u#|#}$O$R$S$`$e%W%e%f%l&c&d&e&f&g&h&i&j&p&q&r&s&t&u&y&{&}'R'^'_'`'b'c'd'e'f'g'h'i'p'q'r'u'x'z'|'}(O(P(Q(R(S(T(Z([(](`(b(d(f(l(m(w({$ydOPRS^_gi!O!R!S!T!U!W!X![!]!^!_#U#W#j#r#u#|#}$O$R$S$`$e%W%e%f%l&c&d&e&f&g&h&i&j&p&q&r&s&t&u&y&{&}'R'^'_'`'b'c'd'e'f'g'h'i'p'q'r'u'x'z'|'}(O(P(Q(R(S(T(Z([(](`(b(d(f(l(m(w({Q$Z#TQ'Z'jQ(k(xR(s(|W$X#T'j(x(|R%h%UW%k%W&y'u(`X%{%l&}'z(dQ!qcR$v#vT!pc#vR!PPQgOR!tgQ#{!uR$y#{Q$Q!zR%P$QQ#V|R$]#VQ#n!eS$q#n%}R%}%oQ&R%rR&Y&RQ&U%vR&[&UQ$b#aR%Z$bQ#s!lR$t#sQ%V$XR%i%VQ#w!qR$w#wTfOgSQOgW{P!_#U#Wb!aRS!O&c'R'|(f(l(mQ!j^S!l_!XQ!yiQ#X!RQ#Y!SQ#Z!TW#[!U&g'e(QQ#^!WQ#g![Q#h!]Q#i!^Q$f#jQ$s#rQ$u#uQ$z#|Q$|#}Q$}$OQ%Q$RQ%R$SQ%X$`Q%[$eS%j%W%lQ%y%eQ%z%fQ&a&rQ&k&dQ&l&eQ&m&fQ&n&hQ&o&iQ&v&pQ&w&qQ&x&tQ&z&uS&|&y&}Q'O&{Q'Q&sQ'S&jQ'U'^Q'V'_Q'W'`Q'Y'hQ'k'bQ'l'cQ'm'dQ'n'fQ'o'gQ's'pQ't'qQ'v'rS'y'u'zQ'{'xQ(U'}Q(V(OQ(W(PQ(X(RQ(Y(SQ(^(ZQ(_([Q(a(]S(c(`(dQ(e(bQ(g(TQ(j(wQ(o'iR(r({$yeOPRS^_gi!O!R!S!T!U!W!X![!]!^!_#U#W#j#r#u#|#}$O$R$S$`$e%W%e%f%l&c&d&e&f&g&h&i&j&p&q&r&s&t&u&y&{&}'R'^'_'`'b'c'd'e'f'g'h'i'p'q'r'u'x'z'|'}(O(P(Q(R(S(T(Z([(](`(b(d(f(l(m(w({X!vh'](u(yX!{j'a(v(zV}P#W#jR%s%bT%w%c'w$Q!YQT{!a!j!l!y#X#Y#Z#[#^#g#h#i$f$s$u$z$|$}%Q%R%X%[%j%y%z&a&k&l&m&n&o&v&w&x&z&|'O'Q'S'U'V'W'Y'k'l'm'n'o's't'v'y'{(U(V(W(X(Y(^(_(a(c(e(g(j(o(rR!cXR#b!XQ!m_R#c!X$rZOPRSgi!O!R!S!T!U!W!X![!]!^!_#U#W#r#u#|#}$O$R$S$`$e%W%e%f%l&c&d&e&f&g&h&i&j&p&q&r&s&t&u&y&{&}'R'^'_'`'b'c'd'e'f'g'h'i'p'q'r'u'x'z'|'}(O(P(Q(R(S(T(Z([(](`(b(d(f(l(m(w({U!g]`#pV!k^_#jW!h]^_#jQ!n`R$r#pX$Y#T'j(x(|R!rc",nodeNames:" LineComment BlockComment Expressions ForExpression for InExpressions InExpression Name in IterationContext return IfExpression if then else QuantifiedExpression some every InExpressions InExpression satisfies Disjunction or Conjunction and Comparison CompareOp CompareOp between PositiveUnaryTest ( PositiveUnaryTests ) ArithmeticExpression ArithOp ArithOp ArithOp ArithOp ArithOp InstanceOf instance of Type QualifiedName SpecialType days time duration years months date > ListType list < ContextType context ContextEntryTypes ContextEntryType FunctionType function ArgumentTypes ArgumentType PathExpression ] FilterExpression [ FunctionInvocation SpecialFunctionName string length upper case lower substring before after starts with ends contains insert index distinct values met by overlaps finished started day year week month get value entries NamedParameters NamedParameter ParameterName SpecialParameterName start position decimal sep separator grouping PositionalParameters null NumericLiteral StringLiteral BooleanLiteral DateTimeLiteral DateTimeConstructor VariableName ? SimplePositiveUnaryTest Interval ParenthesizedExpression List FunctionDefinition FormalParameters FormalParameter external FunctionBody } { Context ContextEntry Key SpecialKey method signature UnaryTests Wildcard not",maxTerm:177,nodeProps:[["group",-18,4,12,16,22,24,26,34,40,64,66,68,115,116,117,119,120,121,128,"Expression",-5,109,110,111,112,113,"Expression Literal"],["closedBy",31,")",67,"]",127,"}"],["openedBy",33,"(",65,"[",126,"{"]],skippedNodes:[0,1,2],repeatNodeCount:11,tokenData:"+Y~R|XY#{Y^#{pq#{qr$prs${tu%oxy&yyz'Oz{'T{|'b|}'g}!O'l!O!P'y!P!Q(c!Q![)n![!]*P!]!^*U!^!_*Z!_!`$v!`!a*j!a!b%o!c!}%o!}#O*t#P#Q*y#Q#R']#R#S%o#T#o%o#o#p+O#q#r+T#y#z#{$f$g#{#BY#BZ#{$IS$I_#{$I`$Ib%o$I|$JO#{$JT$JU#{$KV$KW#{$Kh%#t%o&/x&Et%o&FU&FV#{&FV;'S%o;'S;:j&s?&r?Ah%o?BY?Mn%o~$QY$[~X^#{pq#{#y#z#{$f$g#{#BY#BZ#{$IS$I_#{$I|$JO#{$JT$JU#{$KV$KW#{&FU&FV#{~$sP!_!`$v~${Ok~~%QU$q~OY${Zr${rs%ds#O${#O#P%i#P~${~%iO$q~~%lPO~${~%t_$`~tu%o!Q![%o!a!b%o!c!}%o#R#S%o#T#o%o1p4U%o$I`$Ib%o$Je$Jg%o$Kh%#t%o&/x&Et%o&FV;'S%o;'S;:j&s?&r?Ah%o?BY?Mn%o~&vP;=`<%l%o~'OOo~~'TOq~~'YPu~z{']~'bOw~~'gOs~~'lO$c~R'qPtP!`!a'tQ'yO$jQ~(OQ$f~!O!P(U!Q![(Z~(ZO$b~~(`P$p~!Q![(Z~(hQv~z{(n!P!Q)c~(qROz(nz{(z{~(n~(}TOz(nz{(z{!P(n!P!Q)^!Q~(n~)cOQ~~)hQP~OY)cZ~)c~)sQ$p~!O!P)y!Q![)n~)|P!Q![(Z~*UO$h~~*ZO$w~R*bP!XQlP!_!`*eP*jOlPR*qP!UQlP!_!`*e~*yO!e~~+OO!c~~+TO#s~~+YO#r~",tokenizers:[0,1],topRules:{Expressions:[0,3],UnaryTests:[1,134]},dynamicPrecedences:{24:-1,68:-1,151:-1},specialized:[{term:154,get:e=>Vd[e]||-1}],tokenPrec:0}),zd=yl({VariableName:Nl.variableName,NumericLiteral:Nl.number,QualifiedName:Nl.name,Name:Nl.name,BooleanLiteral:Nl.bool,StringLiteral:Nl.string,LineComment:Nl.lineComment,BlockComment:Nl.blockComment,"( )":Nl.paren,BuiltInFunctionName:Nl.function(Nl.variableName),BuiltInType:Nl.function(Nl.variableName),ListType:Nl.function(Nl.variableName),ContextType:Nl.function(Nl.variableName),FunctionType:Nl.function(Nl.variableName),DateAndTime:Nl.function(Nl.variableName),"DateTimeConstructor!":Nl.function(Nl.variableName),"for in return null":Nl.atom,List:Nl.list,Interval:Nl.list}),Wd=Ud.configure({props:[zd]}),Hd=Ul.define({parser:Wd});var Fd=[function(e,t={}){return Zh.of({source:e,config:t})}((function(e){const t=[];if(0===e.state.doc.length)return t;return zl(e.state).iterate({enter:e=>{if(e.type.isError){const i=e.toString(),r=/\((.*?)\)/.exec(i),s=r&&r[1];let n;n=s?"unexpected "+s:"expression expected",t.push({from:e.from,to:e.to,severity:"error",message:n,source:"syntaxError"})}}}),t}))];var Gd=[oa.theme({"& .cm-content":{padding:"0px"},"& .cm-line":{padding:"0px"},"&.cm-editor.cm-focused":{outline:"none"}}),oa.baseTheme({"& .variableName":{color:"#10f"},"& .number":{color:"#164"},"& .string":{color:"#a11"},"& .function":{color:"#aa3731",fontWeight:"bold"},"& .atom":{color:"#708"}}),function(e,t){let i,r=[bp];return e instanceof fp&&(e.module&&r.push(oa.styleModule.of(e.module)),i=e.themeType),(null==t?void 0:t.fallback)?r.push(gp.of(e)):i?r.push(mp.computeN([oa.darkTheme],(t=>t.facet(oa.darkTheme)==("dark"==i)?[e]:[]))):r.push(mp.of(e)),r}(fp.define([{tag:Nl.variableName,class:"variableName"},{tag:Nl.name,class:"variableName"},{tag:Nl.number,class:"number"},{tag:Nl.string,class:"string"},{tag:Nl.function(Nl.variableName),class:"function"},{tag:Nl.atom,class:"atom"}]))];function Kd({container:e,onChange:t=(()=>{}),onKeyDown:i=(()=>{}),onLint:r=(()=>{}),readOnly:s=!1,value:n="",variables:o=[]}){const a=oa.updateListener.of((e=>{e.docChanged&&t(e.state.doc.toString())})),l=oa.updateListener.of((e=>{const t=e.transactions.flatMap((e=>e.effects)).filter((e=>e.is(Bh)));if(!t.length)return;const i=t.flatMap((e=>e.value));r(i)})),p=oa.domEventHandlers({keydown:i}),h=[fa.of([...Rh]),a,p,new tp(Hd,[]),Bc(o),Gd,Fd,l];return s&&h.push(oa.editable.of(!1)),this._cmEditor=new oa({state:Ji.create({doc:n,extensions:h}),parent:e}),this}Kd.prototype.setValue=function(e){this._cmEditor.dispatch({changes:{from:0,to:this._cmEditor.state.doc.length,insert:e}})},Kd.prototype.focus=function(e){const t=this._cmEditor;if(t.focus(),"number"==typeof e){const i=t.state.doc.length;t.dispatch({selection:{anchor:e<=i?e:i}})}},Kd.prototype.getSelection=function(){return this._cmEditor.state.selection};function Zd(e){return`bio-properties-panel-${e}`}function Yd(e){const{id:t,element:i,items:r=[],component:s,label:n="<empty>",open:o,onAdd:a,onRemove:l,autoFocusEntry:p,compareFn:c,...d}=e,[u,f]=ae(!!o),m=!!r.length,g=!ht(u)&&u,y=ht(i)!==i,O=function(e,t,i=!1){const r=ce(e.slice());if(i)r.current=e.slice(),t&&r.current.sort(t);else{const i=r.current;for(const r of e)i.includes(r)||(t?i.unshift(r):i.push(r));r.current=i.filter((t=>e.includes(t)))}return r.current}(r,c,g||y),b=function(e=[],t){const i=ht(e.slice())||[];if(t)return[];return i?e.filter((e=>!i.includes(e))):[]}(r,y);return pe((()=>{u&&!m&&f(!1)}),[u,m]),Ze("div",{"data-entry-id":t,class:h("bio-properties-panel-entry","bio-properties-panel-list-entry",m?"":"empty",u?"open":""),children:[Ze("div",{class:"bio-properties-panel-list-entry-header",onClick:()=>m&&f(!u),children:[Ze("div",{title:n,class:h("bio-properties-panel-list-entry-header-title",u&&"open"),children:n}),Ze("div",{class:"bio-properties-panel-list-entry-header-buttons",children:[Ze("button",{title:"Create new list item",onClick:function(e){e.stopPropagation(),a(),u||f(!0)},class:"bio-properties-panel-add-entry",children:[Ze(Je,{}),m?null:Ze("span",{class:"bio-properties-panel-add-entry-label",children:"Create"})]}),m&&Ze("div",{title:`List contains ${r.length} item${1!=r.length?"s":""}`,class:"bio-properties-panel-list-badge",children:r.length}),m&&Ze("button",{title:"Toggle list item",class:"bio-properties-panel-arrow",children:Ze(Ye,{class:u?"bio-properties-panel-arrow-down":"bio-properties-panel-arrow-right"})})]})]}),m&&Ze(Jd,{...d,autoFocusEntry:p,component:s,element:i,id:t,items:O,newItems:b,onRemove:l,open:u})]})}function Jd(e){const{autoFocusEntry:t,component:r,element:s,id:n,items:o,newItems:a,onRemove:l,open:p,...d}=e,u=function(e=[]){const t=de((()=>new Map),e);return e=>{let i=t.get(e);return i||(i=Math.random().toString().slice(-6),t.set(e,i)),i}}(),f=a[0];return pe((()=>{if(f&&t){const e=c(`[data-entry-id="${n}"]`),r=c("boolean"==typeof t?".bio-properties-panel-input":t,e);r&&(i(r.select)?r.select():i(r.focus)&&r.focus())}}),[f,t,n]),Ze("ol",{class:h("bio-properties-panel-list-entry-items",p?"open":""),children:o.map(((e,t)=>{const i=u(e);return Ze("li",{class:"bio-properties-panel-list-entry-item",children:[Ze(r,{...d,element:s,id:n,index:t,item:e,open:e===f}),l&&Ze("button",{type:"button",title:"Delete item",class:"bio-properties-panel-remove-entry bio-properties-panel-remove-list-entry",onClick:()=>l&&l(e),children:Ze(et,{})})]},i)}))})}function eu(e){const{id:t,label:i,onChange:r,options:s=[],value:n,disabled:o}=e,a=ct(t),[l,p]=ae(n);return pe((()=>{n!==l&&p(n)}),[n]),Ze("div",{class:"bio-properties-panel-select",children:[Ze("label",{for:ru(t),class:"bio-properties-panel-label",children:i}),Ze("select",{ref:a,id:ru(t),name:t,class:"bio-properties-panel-input",onInput:e=>{(({target:e})=>{r(e.value)})(e),p(e.target.value)},value:l,disabled:o,children:s.map(((e,t)=>Ze("option",{value:e.value,disabled:e.disabled,children:e.label},t)))})]})}function tu(e){const{element:t,id:i,description:r,label:s,getValue:n,setValue:o,getOptions:a,disabled:l}=e,p=n(t),c=a(t),d=at(i);return Ze("div",{class:h("bio-properties-panel-entry",d?"has-error":""),"data-entry-id":i,children:[Ze(eu,{id:i,label:s,value:p,onChange:o,options:c,disabled:l},t),d&&Ze("div",{class:"bio-properties-panel-error",children:d}),Ze(_t,{forId:i,element:t,value:r})]})}function iu(e){return e&&!!e.value}function ru(e){return`bio-properties-panel-${e}`}function su(e){const{debounce:t,disabled:i,element:r,getValue:s,id:n,onBlur:o,onFocus:a,setValue:l}=e,p=s(r),[h,c]=ae(p),d=de((()=>t((({target:e})=>l(e.value.length?e.value:void 0)))),[l,t]);return pe((()=>{p!==h&&c(p)}),[p]),Ze("div",{class:"bio-properties-panel-simple",children:Ze("input",{id:nu(n),type:"text",name:n,spellCheck:"false",autoComplete:"off",disabled:i,class:"bio-properties-panel-input",onInput:e=>{d(e),c(e.target.value)},"aria-label":h||"<empty>",onFocus:a,onBlur:o,value:h},r)})}function nu(e){return`bio-properties-panel-${e}`}function ou(e){const{id:t,label:i,rows:r=2,debounce:s,onInput:n,value:o="",disabled:a,monospace:l}=e,[p,c]=ae(o),d=ct(t),u=de((()=>s((({target:e})=>n(e.value.length?e.value:void 0)))),[n,s]);return pe((()=>{o!==p&&c(o)}),[o]),Ze("div",{class:"bio-properties-panel-textarea",children:[Ze("label",{for:pu(t),class:"bio-properties-panel-label",children:i}),Ze("textarea",{ref:d,id:pu(t),name:t,spellCheck:"false",class:h("bio-properties-panel-input",l?"bio-properties-panel-input-monospace":""),onInput:e=>{u(e),c(e.target.value)},onFocus:e.onFocus,onBlur:e.onBlur,rows:r,value:p,disabled:a})]})}function au(e){const{element:t,id:i,description:r,debounce:s,label:n,getValue:o,setValue:a,rows:l,monospace:p,disabled:c}=e,d=o(t),u=at(i);return Ze("div",{class:h("bio-properties-panel-entry",u?"has-error":""),"data-entry-id":i,children:[Ze(ou,{id:i,label:n,value:d,onInput:a,rows:l,debounce:s,monospace:p,disabled:c},t),u&&Ze("div",{class:"bio-properties-panel-error",children:u}),Ze(_t,{forId:i,element:t,value:r})]})}function lu(e){return e&&!!e.value}function pu(e){return`bio-properties-panel-${e}`}function hu(e){const{debounce:t,disabled:i=!1,id:r,label:s,onInput:n,value:o=""}=e,[a,l]=ae(o||""),p=ct(r),h=de((()=>t((({target:e})=>n(e.value.length?e.value:void 0)))),[n,t]);return pe((()=>{o!==a&&l(o)}),[o]),Ze("div",{class:"bio-properties-panel-textfield",children:[Ze("label",{for:uu(r),class:"bio-properties-panel-label",children:s}),Ze("input",{ref:p,id:uu(r),type:"text",name:r,spellCheck:"false",autoComplete:"off",disabled:i,class:"bio-properties-panel-input",onInput:e=>{h(e),l(e.target.value)},onFocus:e.onFocus,onBlur:e.onBlur,value:a})]})}function cu(e){const{element:t,id:r,description:s,debounce:n,disabled:o,label:a,getValue:l,setValue:p,validate:c}=e,[d,u]=ae(null),f=at(r),[m,g]=ae(null);let y=l(t);const O=ht(y);pe((()=>{if(i(c)){const e=c(y)||null;g(e)}}),[y]);O===y&&m&&(y=d);const b=f||m;return Ze("div",{class:h("bio-properties-panel-entry",b?"has-error":""),"data-entry-id":r,children:[Ze(hu,{debounce:n,disabled:o,id:r,label:a,onInput:e=>{let t=null;i(c)&&(t=c(e)||null),t?u(e):p(e),g(t)},value:y},t),b&&Ze("div",{class:"bio-properties-panel-error",children:b}),Ze(_t,{forId:r,element:t,value:s})]})}function du(e){return e&&!!e.value}function uu(e){return`bio-properties-panel-${e}`}_e(((e,t)=>{const{value:i,onInput:r,onFeelToggle:s,onLint:n=(()=>{}),disabled:o,variables:a}=e,l=ce(),[p,c]=ae(),[d,u]=ae(i||"");!function(e,t){const[i,r]=ae(void 0);t.current=de((()=>({focus:t=>{e?e.focus(t):r(t)}})),[e]),pe((()=>{void 0!==i&&e&&(e.focus(i),r(!1))}),[e,i])}(p,t);const f=function(e){const t=ce(e);return t.current=e,ue(((...e)=>t.current(...e)),[])}((e=>{r(e),u(e)}));pe((()=>{let e;return e=new Kd({container:l.current,onChange:f,onKeyDown:t=>{if("Backspace"!==t.key||!e)return;const i=e.getSelection(),r=i.ranges[i.mainIndex];0===r.from&&0===r.to&&s()},onLint:n,value:d,variables:a}),c(e),()=>{n([]),l.current.innerHTML="",c(null)}}),[a]),pe((()=>{p&&i!==d&&(p.setValue(i),u(i))}),[i]);return Ze("div",{class:h("bio-properties-panel-feel-editor-container",o?"disabled":null),children:Ze("div",{name:e.name,class:h("bio-properties-panel-input",d?"edited":null),ref:l,onClick:()=>{t.current.focus()}})})})),_e(((e,t)=>{const{id:i,disabled:r,onInput:s,value:n}=e,o=ce();return t.current={focus:e=>{const t=o.current;t&&(t.focus(),"number"==typeof e&&(e>n.length&&(e=n.length),t.setSelectionRange(e,e)))}},Ze("input",{id:Zd(i),type:"text",ref:o,name:i,spellCheck:"false",autoComplete:"off",disabled:r,class:"bio-properties-panel-input",onInput:e=>s(e.target.value),onFocus:e.onFocus,onBlur:e.onBlur,value:n||""})})),_e(((e,t)=>{const{id:i,disabled:r,onInput:s,value:n}=e,o=ce();return t.current={focus:()=>{const e=o.current;e&&(e.focus(),e.setSelectionRange(0,0))}},Ze("textarea",{id:Zd(i),type:"text",ref:o,name:i,spellCheck:"false",autoComplete:"off",disabled:r,class:"bio-properties-panel-input",onInput:e=>s(e.target.value),onFocus:e.onFocus,onBlur:e.onBlur,value:n||""})}));function fu(i){return function(r){if(!1!==i){var s=e(i)?i:300;return t(r,s)}return r}}fu.$inject=["config.debounceInput"];var mu={debounceInput:["factory",fu]},gu={};Object.defineProperty(gu,"__esModule",{value:!0});var yu=p;function Ou(e){return(vu(e,"zeebe:IoMapping")||[])[0]}function bu(e){return function(e,t){var i=Ou(e);return i&&i.get(t)||[]}(e,"inputParameters")}function vu(e,t,i){var r=function(e,t){var i=[],r=e.get("extensionElements");if(void 0!==r){var s=r.get("values");void 0!==s&&(i=yu.filter(s,(function(e){return function(e,t){return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}(e,t)})))}return i}(e,t);return i?(r[0]||{})[i]||[]:r}function wu(e){for(var t=[],i=e;i.$parent;)t.push(i.$parent),i=i.$parent;return t}function Pu(e,t,i){i=i||0,yu.isArray(e)||(e=[e]),yu.forEach(e,(function(e,r){var s=t(e,r,i);yu.isArray(s)&&s.length&&Pu(s,t,i+1)}))}function ku(e,t,i){var r=!i||-1===e.indexOf(t);return r&&e.push(t),r}function xu(e,t,i){var r=[],s=[];return Pu(e,(function(e,n,o){ku(r,e,t);var a=e.flowElements;if((-1===i||o<i)&&a&&ku(s,a,t))return a})),r}function Su(e,t){return xu(e,!t,-1)}function _u(e,t){var i,r,s=yu.findIndex(e,(function(e){return e.name===t.name&&e.scope===t.scope}));s>=0?e[s].origin=(i=e[s].origin,r=t.origin,i.concat(r)):e.push(t)}function Au(e,t,i){var r,s,n,o,a=(r=i,s=t,n=wu(e),o=yu.find(n,(function(e){return function(e,t){return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}(e,"bpmn:SubProcess")&&function(e,t){return yu.find(bu(e),(function(e){return e.target===t}))}(e,s)})),o||r);return{name:t,origin:[e],scope:a}}var qu=[function(e){var t=e.elements,i=e.processVariables;return yu.isArray(t)||(t=[t]),yu.forEach(t,(function(e){var t=function(e){return(Ou(e)||{}).inputParameters}(e);yu.forEach(t,(function(t){var r=Au(e,t.target,e);_u(i,r)}))})),i},function(e){var t=e.elements,i=e.processVariables;return yu.isArray(t)||(t=[t]),yu.forEach(t,(function(e){var t=e.loopCharacteristics,r=t&&function(e){const t=vu(e,"zeebe:LoopCharacteristics")[0];return t&&t.inputElement}(t);if(r){var s=Au(e,r,e);_u(i,s)}})),i},function(e){var t=e.elements,i=e.containerElement,r=e.processVariables;return yu.isArray(t)||(t=[t]),yu.forEach(t,(function(e){var t=function(e){return(Ou(e)||{}).outputParameters}(e);yu.forEach(t,(function(t){var s=Au(e,t.target,i);_u(r,s)}))})),r},function(e){var t=e.elements,i=e.containerElement,r=e.processVariables;return yu.isArray(t)||(t=[t]),yu.forEach(t,(function(e){var t=e.loopCharacteristics,s=t&&function(e){const t=vu(e,"zeebe:LoopCharacteristics")[0];return t&&t.outputCollection}(t);if(s){var n=Au(e,s,i);_u(r,n)}})),r},function(e){var t=e.elements,i=e.containerElement,r=e.processVariables;return yu.isArray(t)||(t=[t]),yu.forEach(t,(function(e){var t=function(e){return(vu(e,"zeebe:CalledDecision")||[])[0]}(e);if(t){var s=t.resultVariable;if(s){var n=Au(e,s,i);_u(r,n)}}})),r}];function $u(e){var t=[],i=Su([e],!1);return yu.forEach(qu,(function(r){r({elements:i,containerElement:e,processVariables:t})})),t}function Tu(e,t){var i,r=$u(t),s=function(e,t){var i=Su(t);return yu.find(i,(function(t){return t.id===e}))}(e,t),n=yu.filter(r,(function(e){return e.scope.id===s.id})),o=wu(s),a=yu.filter(r,(function(e){return yu.find(o,(function(t){return t.id===e.scope.id}))}));return i=a,n.concat(i)}function Mu(e){return e&&e.businessObject||e}function Cu(e,t){var i=Mu(e);return i&&"function"==typeof i.$instanceOf&&i.$instanceOf(t)}gu.getProcessVariables=$u,gu.getVariablesForElement=function(e){return Tu(function(e){const t=Mu(e);if(Cu(e,"bpmn:Participant"))return t.processRef.id;return t.id}(e),function(e){const t=Mu(e);if(Cu(t,"bpmn:Participant"))return t.processRef;if(Cu(t,"bpmn:Process"))return t;let i=t;for(;i.$parent&&!Cu(i,"bpmn:Process");)i=i.$parent;return i}(e))},gu.getVariablesForScope=Tu;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});var Ru=p;function Du(e){var t=function(e){return Qu(e,"camunda:FormData")[0]}(e);return t&&t.get("fields")||[]}function Qu(e,t,i){var r=function(e,t){var i=[],r=e.get("extensionElements");if(void 0!==r){var s=r.get("values");void 0!==s&&(i=Ru.filter(s,(function(e){return function(e,t){return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}(e,t)})))}return i}(e,t);return i?(r[0]||{})[i]||[]:r}function ju(e,t){var i=function(e){return(Qu(e,"camunda:InputOutput")||[])[0]}(e);return i&&i.get(t)||[]}function Xu(e){for(var t=[],i=e;i.$parent;)t.push(i.$parent),i=i.$parent;return t}function Nu(e,t,i){i=i||0,Ru.isArray(e)||(e=[e]),Ru.forEach(e,(function(e,r){var s=t(e,r,i);Ru.isArray(s)&&s.length&&Nu(s,t,i+1)}))}function Iu(e,t,i){var r=!i||-1===e.indexOf(t);return r&&e.push(t),r}function Lu(e,t,i){var r=[],s=[];return Nu(e,(function(e,n,o){Iu(r,e,t);var a=e.flowElements;if((-1===i||o<i)&&a&&Iu(s,a,t))return a})),r}function Bu(e,t){return Lu(e,!t,-1)}function Vu(e,t){var i,r,s=Ru.findIndex(e,(function(e){return e.name===t.name&&e.scope===t.scope}));s>=0?e[s].origin=(i=e[s].origin,r=t.origin,i.concat(r)):e.push(t)}function Uu(e,t,i){var r,s,n,o,a=(r=i,s=t,n=Xu(e),o=Ru.find(n,(function(e){return function(e,t){return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}(e,"bpmn:SubProcess")&&function(e,t){return Ru.find(function(e){return ju(e,"inputParameters")}(e),(function(e){return e.name===t}))}(e,s)})),o||r);return{name:t,origin:[e],scope:a}}function zu(e,t){var i=e.eventDefinitions;return i&&t?Ru.filter(i,(function(e){return function(e,t){return e&&"function"==typeof e.$instanceOf&&e.$instanceOf(t)}(e,t)})):i}var Wu=[function(e){var t=e.elements,i=e.containerElement,r=e.processVariables;return Ru.isArray(t)||(t=[t]),Ru.forEach(t,(function(e){var t=function(e){return ju(e,"outputParameters")}(e);Ru.forEach(t,(function(t){var s=Uu(e,t.name,i);Vu(r,s)}))})),r},function(e){var t=e.elements,i=e.containerElement,r=e.processVariables;return Ru.isArray(t)||(t=[t]),Ru.forEach(t,(function(e){var t=function(e){return e.get("camunda:resultVariable")}(e);if(t){var s=Uu(e,t,i);Vu(r,s)}})),r},function(e){var t=e.elements,i=e.containerElement,r=e.processVariables;return Ru.isArray(t)||(t=[t]),Ru.forEach(t,(function(e){var t=Du(e);Ru.forEach(t,(function(t){var s=Uu(e,t.id,i);Vu(r,s)}))})),r},function(e){var t=e.elements,i=e.containerElement,r=e.processVariables;return Ru.isArray(t)||(t=[t]),Ru.forEach(t,(function(e){var t=function(e){return Qu(e,"camunda:Out")}(e);Ru.forEach(t,(function(t){if(!t.local){var s=Uu(e,t.target,i);Vu(r,s)}}))})),r},function(e){var t=e.elements,i=e.containerElement,r=e.processVariables,s=function(e,t){var s=Uu(e,t,i);Vu(r,s)};return Ru.isArray(t)||(t=[t]),Ru.forEach(t,(function(e){var t=function(e){return zu(e,"bpmn:ErrorEventDefinition")}(e);Ru.forEach(t,(function(t){var i=t.get("errorCodeVariable"),r=t.get("errorMessageVariable");i&&s(e,i),r&&s(e,r)}));var i=function(e){return zu(e,"bpmn:EscalationEventDefinition")}(e);Ru.forEach(i,(function(t){var i=t.get("escalationCodeVariable");i&&s(e,i)}))})),r}];function Hu(e){var t=[],i=Bu([e],!1);return Ru.forEach(Wu,(function(r){r({elements:i,containerElement:e,processVariables:t})})),t}Eu.getProcessVariables=Hu;var Fu=Eu.getVariablesForScope=function(e,t){var i,r=Hu(t),s=function(e,t){var i=Bu(t);return Ru.find(i,(function(t){return t.id===e}))}(e,t),n=Ru.filter(r,(function(e){return e.scope.id===s.id})),o=Xu(s),a=Ru.filter(r,(function(e){return Ru.find(o,(function(t){return t.id===e.scope.id}))}));return i=a,n.concat(i)},Gu={exports:{}},Ku={exports:{}},Zu=function e(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;var r,s,n;if(Array.isArray(t)){if((r=t.length)!=i.length)return!1;for(s=r;0!=s--;)if(!e(t[s],i[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();if((r=(n=Object.keys(t)).length)!==Object.keys(i).length)return!1;for(s=r;0!=s--;)if(!Object.prototype.hasOwnProperty.call(i,n[s]))return!1;for(s=r;0!=s--;){var o=n[s];if(!e(t[o],i[o]))return!1}return!0}return t!=t&&i!=i};Ku.exports=Zu,Gu.exports=lf,Gu.exports.default=lf;const Yu={type:"object",allOf:[{required:["name","id","appliesTo","properties"],properties:{name:{$id:"#/name",type:"string",description:"The name of the element template."},id:{$id:"#/id",type:"string",description:"The identifier of the element template."},description:{$id:"#/description",type:"string",description:"The description of the element template."},version:{$id:"#/version",type:"integer",description:"Optional version of the template. If you add a version to a template it will be considered unique based on its ID and version. Two templates can have the same ID if their version is different."},isDefault:{$id:"#/isDefault",type:"boolean",description:"Indicates whether the element template is a default template."},appliesTo:{$id:"#/appliesTo",type:"array",description:"List of BPMN types the template can be applied to.",default:[],items:{$id:"#/appliesTo/items",type:"string",pattern:"^[\\w\\d]+:[\\w\\d]+$",allOf:[{examples:["bpmn:Task","bpmn:ServiceTask","bpmn:SequenceFlow","bpmn:Process","bpmn:StartEvent","bpmn:Gateway"]}],errorMessage:{pattern:'invalid item for "appliesTo", should contain namespaced property, example: "bpmn:Task"'}}},elementType:{$id:"#/elementType",type:"object",description:"The BPMN type the element will be transformed into.",default:{},required:["value"],properties:{value:{$id:"#/elementType/value",type:"string",pattern:"^[\\w\\d]+:[\\w\\d]+$",allOf:[{examples:["bpmn:ServiceTask","bpmn:UserTask","bpmn:StartEvent","bpmn:ExclusiveGateway","bpmn:ParallelGateway"]}],errorMessage:{pattern:'invalid item for "elementType", should contain namespaced property, example: "bpmn:Task"'}}},errorMessage:{required:{value:"missing elementType value"}}},metadata:{$id:"#/metadata",type:"object",description:"Some custom properties for further configuration.",default:{}},entriesVisible:{$id:"#/entriesVisible",type:"boolean",description:"Select whether non-template entries are visible in the properties panel."},groups:{$id:"#/groups",type:"array",description:"Custom fields can be ordered together via groups.",allOf:[{examples:[[{id:"group-1",label:"My Group"}]]}],items:{$id:"#/groups/group",type:"object",default:{},required:["id","label"],properties:{id:{$id:"#/groups/group/id",type:"string",description:"The id of the custom group"},label:{$id:"#/groups/group/label",type:"string",description:"The label of the custom group"}},errorMessage:{required:{id:'missing id for group "${0#}"',label:'missing label for group "${0#}"'}}}},documentationRef:{$id:"#/documentationRef",type:"string",pattern:"^(https|http)://.*",errorMessage:{pattern:'Malformed documentation URL, must match "^(https|http)://.*"'}}},errorMessage:{required:{name:"missing template name",id:"missing template id",appliesTo:"missing appliesTo=[]",properties:"missing properties=[]"}}}],properties:{properties:{$ref:"#/definitions/properties",$id:"#/properties"},scopes:{$id:"#/scopes",type:"array",description:"Special scoped bindings that allow you to configure nested elements.",allOf:[{examples:[[{type:"bpmn:Error",id:"Error_1",properties:[{value:"error-code",binding:{type:"property",name:"errorCode"}},{value:"error-message",binding:{type:"property",name:"camunda:errorMessage"}},{value:"error-name",binding:{type:"property",name:"name"}}]}]]}],items:{$id:"#/scopes/item",type:"object",default:{},properties:{type:{$id:"#scopes/item/type",type:"string",description:"The type of a scope.",enum:["camunda:Connector","bpmn:Error"],errorMessage:"invalid scope type ${0}; must be any of { camunda:Connector, bpmn:Error }"},properties:{$id:"#/scopes/properties",description:"List of properties of a scope.",default:[],allOf:[{$ref:"#/definitions/properties/allOf/0"},{$ref:"#/definitions/properties/allOf/1"}]}},required:["type","properties"],allOf:[{if:{properties:{type:{enum:["bpmn:Error"]}},required:["type"]},then:{required:["id"],errorMessage:"invalid scope ${0/type}, missing id"}}],errorMessage:{required:{type:"invalid scope, missing type",properties:"invalid scope ${0/type}, missing properties=[]"}}}}}},Ju={allOf:[{type:"array",description:"List of properties of the element template.",allOf:[{examples:[[{label:"Name",type:"String",binding:{type:"property",name:"name"}}]]}],items:{type:"object",default:{},allOf:[{if:{properties:{type:{const:"Dropdown"}},required:["type"]},then:{required:["choices"],errorMessage:'must provide choices=[] with "Dropdown" type'}}],properties:{id:{type:"string",description:"Unique identifier of the property."},value:{$id:"#/properties/property/value",type:["string","boolean"],description:"The value of a control field."},description:{$id:"#/properties/property/description",type:"string",description:"The description of a control field."},label:{$id:"#/properties/property/label",type:"string",description:"The label of a control field."},type:{$id:"#/properties/property/type",type:"string",description:"The type of a control field."},editable:{$id:"#/properties/property/editable",type:"boolean",description:"Indicates whether a control field is editable or not."},choices:{$id:"#/properties/property/choices",type:"array",description:"The choices for dropdown fields.",default:[],items:{$id:"#/properties/property/choices/item",type:"object",default:{},properties:{name:{$id:"#/properties/property/choices/item/name",type:"string",description:"The name of a choice."},value:{$id:"#/properties/property/choices/item/value",type:"string",description:"The value of a choice."}},required:["value","name"],errorMessage:{required:'{ name, value } must be specified for "Dropdown" choices'}}},constraints:{$id:"#/properties/property/constraints",type:"object",description:"The validation constraints of a control field.",allOf:[{examples:[{notEmpty:!0}]}],properties:{notEmpty:{$id:"#/properties/property/constraints/notEmpty",type:"boolean",description:"The control field must not be empty."},minLength:{$id:"#/properties/property/constraints/minLength",type:"number",description:"The minimal length of a control field value."},maxLength:{$id:"#/properties/property/constraints/maxLength",type:"number",description:"The maximal length for a control field value."},pattern:{$id:"#/properties/property/constraints/pattern",description:"A regular expression pattern for a constraint.",oneOf:[{type:"object",default:{},properties:{value:{$id:"#/properties/property/constraints/pattern/value",type:"string",description:"The regular expression of a pattern."},message:{$id:"#/properties/property/constraints/pattern/message",type:"string",description:"The validation message of a pattern."}}},{type:"string"}]}}},group:{$id:"#/properties/property/group",type:"string",description:"The custom group of a control field."},condition:{$id:"#/condition",type:"object",description:"Condition to activate the binding.",allOf:[{examples:[{type:"simple",property:"httpMethod",equals:"GET"},{type:"simple",property:"httpMethod",oneOf:["POST","PUT","DELETE"]}]}],required:["property"],properties:{type:{$id:"#/condition/type",const:"simple",description:"The type of the condition.",default:"simple"},property:{$id:"#/condition/property",type:"string",description:"The id of the property to check."}},oneOf:[{properties:{equals:{type:["string","number","boolean"]}},required:["equals"]},{properties:{oneOf:{type:"array",items:{type:["string","number"]}}},required:["oneOf"]}],errorMessage:{required:{property:"missing property name for condition"}}}}}},{$schema:"http://json-schema.org/draft-07/schema",type:"array",description:"List of properties of the element template.",items:{type:"object",default:{},required:["binding"],allOf:[{if:{properties:{binding:{properties:{type:{const:"property"}},required:["type"]}},required:["binding"]},then:{properties:{type:{enum:["String","Text","Hidden","Dropdown","Boolean"],errorMessage:'invalid property type ${0} for binding type "property"; must be any of { String, Text, Hidden, Dropdown, Boolean }'}}}},{if:{properties:{binding:{properties:{type:{const:"camunda:executionListener"}},required:["type"]}},required:["binding"]},then:{properties:{type:{enum:["Hidden"],errorMessage:'invalid property type ${1/type} for binding type "camunda:executionListener"; must be "Hidden"'}}}},{if:{properties:{binding:{properties:{type:{enum:["camunda:property","camunda:outputParameter","camunda:in","camunda:in:businessKey","camunda:out","camunda:errorEventDefinition"]}},required:["type"]}},required:["binding"]},then:{properties:{type:{enum:["String","Hidden","Dropdown"],errorMessage:"invalid property type ${0} for binding type ${1/binding/type}; must be any of { String, Hidden, Dropdown }"}}}},{if:{properties:{binding:{properties:{type:{enum:["camunda:inputParameter","camunda:field"]}},required:["type"]}},required:["binding"]},then:{properties:{type:{enum:["String","Text","Hidden","Dropdown"],errorMessage:"invalid property type ${0} for binding type ${1/binding/type}; must be any of { String, Text, Hidden, Dropdown }"}}}}],properties:{binding:{$id:"#/properties/property/binding",type:"object",description:"Specifying how the property is mapped to BPMN or Camunda extension elements and attributes.",required:["type"],allOf:[{if:{properties:{type:{enum:["property","camunda:property","camunda:inputParameter","camunda:field"]}},required:["type"]},then:{required:["name"],errorMessage:"property.binding ${0/type} requires name"}},{if:{properties:{type:{const:"camunda:outputParameter"}},required:["type"]},then:{required:["source"],errorMessage:"property.binding ${0/type} requires source"}},{if:{properties:{type:{const:"camunda:in"}},required:["type"]},then:{anyOf:[{required:["variables"]},{required:["target"]}],errorMessage:"property.binding ${0/type} requires variables, target, or both"}},{if:{properties:{type:{const:"camunda:out"}},required:["type"]},then:{oneOf:[{required:["variables"],not:{anyOf:[{required:["source"]},{required:["sourceExpression"]}]}},{required:["source"],not:{anyOf:[{required:["variables"]},{required:["sourceExpression"]}]}},{required:["sourceExpression"],not:{anyOf:[{required:["variables"]},{required:["source"]}]}},{required:["variables","sourceExpression"],not:{required:["source"]}},{required:["variables","source"],not:{required:["sourceExpression"]}}],errorMessage:"property.binding ${0/type} requires one of the following: variables, sourceExpression, source, (sourceExpression and variables), or (source and variables)"}},{if:{properties:{type:{const:"camunda:errorEventDefinition"}},required:["type"]},then:{oneOf:[{required:["errorRef"]}],errorMessage:"property.binding ${0/type} requires errorRef"}},{examples:[{type:"property",name:"name"},{type:"camunda:property",name:"property"},{type:"camunda:inputParameter",name:"input"},{type:"camunda:outputParameter",source:"output"},{type:"camunda:in",target:"target"},{type:"camunda:in:businessKey"},{type:"camunda:out",source:"output"},{type:"camunda:executionListener",event:"start"},{type:"camunda:field",name:"field"},{type:"camunda:errorEventDefinition",errorRef:"error"},{type:"camunda:errorEventDefinition",errorRef:"error"}]}],properties:{type:{$id:"#/properties/property/binding/type",type:"string",enum:["property","camunda:property","camunda:inputParameter","camunda:outputParameter","camunda:in","camunda:out","camunda:in:businessKey","camunda:executionListener","camunda:field","camunda:errorEventDefinition"],description:"The type of a property binding.",errorMessage:"invalid property.binding type ${0}; must be any of { property, camunda:property, camunda:inputParameter, camunda:outputParameter, camunda:in, camunda:out, camunda:in:businessKey, camunda:executionListener, camunda:field, camunda:errorEventDefinition }"},name:{$id:"#/properties/property/binding/name",type:"string",description:"The name of a property binding."},event:{$id:"#/properties/property/binding/event",type:"string",description:"The event type of a property binding (camunda:executionListener)."},scriptFormat:{$id:"#/properties/property/binding/scriptFormat",type:"string",description:"The script format of a property binding (camunda:outputParameter, camunda:inputParameter)."},source:{$id:"#/properties/property/binding/source",type:"string",description:"The source value of a property binding (camunda:outputParameter, camunda:out)."},target:{$id:"#/properties/property/binding/target",type:"string",description:"The target value of a property binding (camunda:in)."},expression:{$id:"#/properties/property/binding/expression",type:"boolean",description:"Indicates whether the control field value is an expression (camunda:in, camunda:field)."},variables:{$id:"#/properties/property/binding/variables",type:"string",enum:["all","local"],description:"The variable mapping of a property binding (camunda:in)."},sourceExpression:{$id:"#/properties/property/binding/sourceExpression",type:"string",description:"The string containing the expression for the source attribute (camunda:out)."}}}},errorMessage:{required:'missing binding for property "${0#}"'}}}]},ef={type:"array",description:"List of properties of the element template.",allOf:[{examples:[[{label:"Name",type:"String",binding:{type:"property",name:"name"}}]]}],items:{type:"object",default:{},allOf:[{if:{properties:{type:{const:"Dropdown"}},required:["type"]},then:{required:["choices"],errorMessage:'must provide choices=[] with "Dropdown" type'}}],properties:{id:{type:"string",description:"Unique identifier of the property."},value:{$id:"#/properties/property/value",type:["string","boolean"],description:"The value of a control field."},description:{$id:"#/properties/property/description",type:"string",description:"The description of a control field."},label:{$id:"#/properties/property/label",type:"string",description:"The label of a control field."},type:{$id:"#/properties/property/type",type:"string",description:"The type of a control field."},editable:{$id:"#/properties/property/editable",type:"boolean",description:"Indicates whether a control field is editable or not."},choices:{$id:"#/properties/property/choices",type:"array",description:"The choices for dropdown fields.",default:[],items:{$id:"#/properties/property/choices/item",type:"object",default:{},properties:{name:{$id:"#/properties/property/choices/item/name",type:"string",description:"The name of a choice."},value:{$id:"#/properties/property/choices/item/value",type:"string",description:"The value of a choice."}},required:["value","name"],errorMessage:{required:'{ name, value } must be specified for "Dropdown" choices'}}},constraints:{$id:"#/properties/property/constraints",type:"object",description:"The validation constraints of a control field.",allOf:[{examples:[{notEmpty:!0}]}],properties:{notEmpty:{$id:"#/properties/property/constraints/notEmpty",type:"boolean",description:"The control field must not be empty."},minLength:{$id:"#/properties/property/constraints/minLength",type:"number",description:"The minimal length of a control field value."},maxLength:{$id:"#/properties/property/constraints/maxLength",type:"number",description:"The maximal length for a control field value."},pattern:{$id:"#/properties/property/constraints/pattern",description:"A regular expression pattern for a constraint.",oneOf:[{type:"object",default:{},properties:{value:{$id:"#/properties/property/constraints/pattern/value",type:"string",description:"The regular expression of a pattern."},message:{$id:"#/properties/property/constraints/pattern/message",type:"string",description:"The validation message of a pattern."}}},{type:"string"}]}}},group:{$id:"#/properties/property/group",type:"string",description:"The custom group of a control field."},condition:{$id:"#/condition",type:"object",description:"Condition to activate the binding.",allOf:[{examples:[{type:"simple",property:"httpMethod",equals:"GET"},{type:"simple",property:"httpMethod",oneOf:["POST","PUT","DELETE"]}]}],required:["property"],properties:{type:{$id:"#/condition/type",const:"simple",description:"The type of the condition.",default:"simple"},property:{$id:"#/condition/property",type:"string",description:"The id of the property to check."}},oneOf:[{properties:{equals:{type:["string","number","boolean"]}},required:["equals"]},{properties:{oneOf:{type:"array",items:{type:["string","number"]}}},required:["oneOf"]}],errorMessage:{required:{property:"missing property name for condition"}}}}}},tf={$schema:"http://json-schema.org/draft-07/schema",type:"array",description:"List of properties of the element template.",items:{type:"object",default:{},required:["binding"],allOf:[{if:{properties:{binding:{properties:{type:{const:"property"}},required:["type"]}},required:["binding"]},then:{properties:{type:{enum:["String","Text","Hidden","Dropdown","Boolean"],errorMessage:'invalid property type ${0} for binding type "property"; must be any of { String, Text, Hidden, Dropdown, Boolean }'}}}},{if:{properties:{binding:{properties:{type:{const:"camunda:executionListener"}},required:["type"]}},required:["binding"]},then:{properties:{type:{enum:["Hidden"],errorMessage:'invalid property type ${1/type} for binding type "camunda:executionListener"; must be "Hidden"'}}}},{if:{properties:{binding:{properties:{type:{enum:["camunda:property","camunda:outputParameter","camunda:in","camunda:in:businessKey","camunda:out","camunda:errorEventDefinition"]}},required:["type"]}},required:["binding"]},then:{properties:{type:{enum:["String","Hidden","Dropdown"],errorMessage:"invalid property type ${0} for binding type ${1/binding/type}; must be any of { String, Hidden, Dropdown }"}}}},{if:{properties:{binding:{properties:{type:{enum:["camunda:inputParameter","camunda:field"]}},required:["type"]}},required:["binding"]},then:{properties:{type:{enum:["String","Text","Hidden","Dropdown"],errorMessage:"invalid property type ${0} for binding type ${1/binding/type}; must be any of { String, Text, Hidden, Dropdown }"}}}}],properties:{binding:{$id:"#/properties/property/binding",type:"object",description:"Specifying how the property is mapped to BPMN or Camunda extension elements and attributes.",required:["type"],allOf:[{if:{properties:{type:{enum:["property","camunda:property","camunda:inputParameter","camunda:field"]}},required:["type"]},then:{required:["name"],errorMessage:"property.binding ${0/type} requires name"}},{if:{properties:{type:{const:"camunda:outputParameter"}},required:["type"]},then:{required:["source"],errorMessage:"property.binding ${0/type} requires source"}},{if:{properties:{type:{const:"camunda:in"}},required:["type"]},then:{anyOf:[{required:["variables"]},{required:["target"]}],errorMessage:"property.binding ${0/type} requires variables, target, or both"}},{if:{properties:{type:{const:"camunda:out"}},required:["type"]},then:{oneOf:[{required:["variables"],not:{anyOf:[{required:["source"]},{required:["sourceExpression"]}]}},{required:["source"],not:{anyOf:[{required:["variables"]},{required:["sourceExpression"]}]}},{required:["sourceExpression"],not:{anyOf:[{required:["variables"]},{required:["source"]}]}},{required:["variables","sourceExpression"],not:{required:["source"]}},{required:["variables","source"],not:{required:["sourceExpression"]}}],errorMessage:"property.binding ${0/type} requires one of the following: variables, sourceExpression, source, (sourceExpression and variables), or (source and variables)"}},{if:{properties:{type:{const:"camunda:errorEventDefinition"}},required:["type"]},then:{oneOf:[{required:["errorRef"]}],errorMessage:"property.binding ${0/type} requires errorRef"}},{examples:[{type:"property",name:"name"},{type:"camunda:property",name:"property"},{type:"camunda:inputParameter",name:"input"},{type:"camunda:outputParameter",source:"output"},{type:"camunda:in",target:"target"},{type:"camunda:in:businessKey"},{type:"camunda:out",source:"output"},{type:"camunda:executionListener",event:"start"},{type:"camunda:field",name:"field"},{type:"camunda:errorEventDefinition",errorRef:"error"},{type:"camunda:errorEventDefinition",errorRef:"error"}]}],properties:{type:{$id:"#/properties/property/binding/type",type:"string",enum:["property","camunda:property","camunda:inputParameter","camunda:outputParameter","camunda:in","camunda:out","camunda:in:businessKey","camunda:executionListener","camunda:field","camunda:errorEventDefinition"],description:"The type of a property binding.",errorMessage:"invalid property.binding type ${0}; must be any of { property, camunda:property, camunda:inputParameter, camunda:outputParameter, camunda:in, camunda:out, camunda:in:businessKey, camunda:executionListener, camunda:field, camunda:errorEventDefinition }"},name:{$id:"#/properties/property/binding/name",type:"string",description:"The name of a property binding."},event:{$id:"#/properties/property/binding/event",type:"string",description:"The event type of a property binding (camunda:executionListener)."},scriptFormat:{$id:"#/properties/property/binding/scriptFormat",type:"string",description:"The script format of a property binding (camunda:outputParameter, camunda:inputParameter)."},source:{$id:"#/properties/property/binding/source",type:"string",description:"The source value of a property binding (camunda:outputParameter, camunda:out)."},target:{$id:"#/properties/property/binding/target",type:"string",description:"The target value of a property binding (camunda:in)."},expression:{$id:"#/properties/property/binding/expression",type:"boolean",description:"Indicates whether the control field value is an expression (camunda:in, camunda:field)."},variables:{$id:"#/properties/property/binding/variables",type:"string",enum:["all","local"],description:"The variable mapping of a property binding (camunda:in)."},sourceExpression:{$id:"#/properties/property/binding/sourceExpression",type:"string",description:"The string containing the expression for the source attribute (camunda:out)."}}}},errorMessage:{required:'missing binding for property "${0#}"'}}},rf=new RegExp("^[\\w\\d]+:[\\w\\d]+$","u"),sf=new RegExp("^(https|http)://.*","u"),nf={required:"missingProperty",dependencies:"property",dependentRequired:"property"},of=Ku.exports;function af(e,{dataPath:t="",parentData:i,parentDataProperty:r,rootData:s=e}={}){let n=null,o=0;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.name){const e={keyword:"required",dataPath:t,schemaPath:"#/allOf/0/required",params:{missingProperty:"name"},message:"should have required property 'name'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.id){const e={keyword:"required",dataPath:t,schemaPath:"#/allOf/0/required",params:{missingProperty:"id"},message:"should have required property 'id'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.appliesTo){const e={keyword:"required",dataPath:t,schemaPath:"#/allOf/0/required",params:{missingProperty:"appliesTo"},message:"should have required property 'appliesTo'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.properties){const e={keyword:"required",dataPath:t,schemaPath:"#/allOf/0/required",params:{missingProperty:"properties"},message:"should have required property 'properties'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.name&&"string"!=typeof e.name){const e={keyword:"type",dataPath:t+"/name",schemaPath:"#/allOf/0/properties/name/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.id&&"string"!=typeof e.id){const e={keyword:"type",dataPath:t+"/id",schemaPath:"#/allOf/0/properties/id/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.description&&"string"!=typeof e.description){const e={keyword:"type",dataPath:t+"/description",schemaPath:"#/allOf/0/properties/description/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.version){let i=e.version;if("number"!=typeof i||i%1||isNaN(i)){const e={keyword:"type",dataPath:t+"/version",schemaPath:"#/allOf/0/properties/version/type",params:{type:"integer"},message:"should be integer"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.isDefault&&"boolean"!=typeof e.isDefault){const e={keyword:"type",dataPath:t+"/isDefault",schemaPath:"#/allOf/0/properties/isDefault/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.appliesTo){let i=e.appliesTo;if(Array.isArray(i)){const e=i.length;for(let r=0;r<e;r++){let e=i[r];if("string"==typeof e){if(!rf.test(e)){const e={keyword:"pattern",dataPath:t+"/appliesTo/"+r,schemaPath:"#/allOf/0/properties/appliesTo/items/pattern",params:{pattern:"^[\\w\\d]+:[\\w\\d]+$"},message:'should match pattern "^[\\w\\d]+:[\\w\\d]+$"'};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/appliesTo/"+r,schemaPath:"#/allOf/0/properties/appliesTo/items/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={pattern:[]},i={};for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/appliesTo/"+r&&o.keyword in e&&0===o.schemaPath.indexOf("#/allOf/0/properties/appliesTo/items")&&/^\/[^\/]*$/.test(o.schemaPath.slice(36))&&(e[o.keyword].push(o),o.emUsed=!0);for(const a in e)if(e[a].length){const s={keyword:"errorMessage",dataPath:t+"/appliesTo/"+r,schemaPath:"#/allOf/0/properties/appliesTo/items/errorMessage",params:{errors:e[a]},message:a in i?i[a]():Yu.allOf[0].properties.appliesTo.items.errorMessage[a]};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}}}else{const e={keyword:"type",dataPath:t+"/appliesTo",schemaPath:"#/allOf/0/properties/appliesTo/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.elementType){let i=e.elementType;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.value){const e={keyword:"required",dataPath:t+"/elementType",schemaPath:"#/allOf/0/properties/elementType/required",params:{missingProperty:"value"},message:"should have required property 'value'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.value){let e=i.value;if("string"==typeof e){if(!rf.test(e)){const e={keyword:"pattern",dataPath:t+"/elementType/value",schemaPath:"#/allOf/0/properties/elementType/properties/value/pattern",params:{pattern:"^[\\w\\d]+:[\\w\\d]+$"},message:'should match pattern "^[\\w\\d]+:[\\w\\d]+$"'};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/elementType/value",schemaPath:"#/allOf/0/properties/elementType/properties/value/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={pattern:[]},i={};for(const s of n)"errorMessage"!==s.keyword&&!s.emUsed&&s.dataPath===t+"/elementType/value"&&s.keyword in e&&0===s.schemaPath.indexOf("#/allOf/0/properties/elementType/properties/value")&&/^\/[^\/]*$/.test(s.schemaPath.slice(49))&&(e[s.keyword].push(s),s.emUsed=!0);for(const s in e)if(e[s].length){const r={keyword:"errorMessage",dataPath:t+"/elementType/value",schemaPath:"#/allOf/0/properties/elementType/properties/value/errorMessage",params:{errors:e[s]},message:s in i?i[s]():Yu.allOf[0].properties.elementType.properties.value.errorMessage[s]};null===n?n=[r]:n.push(r),o++}const r=[];for(const t of n)t.emUsed||r.push(t);n=r,o=r.length}}}else{const e={keyword:"type",dataPath:t+"/elementType",schemaPath:"#/allOf/0/properties/elementType/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:{value:[]}},i={required:{}};let r,s;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/elementType"&&o.keyword in e&&0===o.schemaPath.indexOf("#/allOf/0/properties/elementType")&&/^\/[^\/]*$/.test(o.schemaPath.slice(32))&&(r=nf[o.keyword],s=e[o.keyword][o.params[r]],s&&(s.push(o),o.emUsed=!0));for(const l in e)for(const r in e[l])if(s=e[l][r],s.length){const e=i[l]&&i[l][r],a={keyword:"errorMessage",dataPath:t+"/elementType",schemaPath:"#/allOf/0/properties/elementType/errorMessage",params:{errors:s},message:e?e():Yu.allOf[0].properties.elementType.errorMessage[l][r]};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}}if(void 0!==e.metadata){let i=e.metadata;if(!i||"object"!=typeof i||Array.isArray(i)){const e={keyword:"type",dataPath:t+"/metadata",schemaPath:"#/allOf/0/properties/metadata/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.entriesVisible&&"boolean"!=typeof e.entriesVisible){const e={keyword:"type",dataPath:t+"/entriesVisible",schemaPath:"#/allOf/0/properties/entriesVisible/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.groups){let i=e.groups;if(Array.isArray(i)){const e=i.length;for(let r=0;r<e;r++){let e=i[r];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.id){const e={keyword:"required",dataPath:t+"/groups/"+r,schemaPath:"#/allOf/0/properties/groups/items/required",params:{missingProperty:"id"},message:"should have required property 'id'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.label){const e={keyword:"required",dataPath:t+"/groups/"+r,schemaPath:"#/allOf/0/properties/groups/items/required",params:{missingProperty:"label"},message:"should have required property 'label'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.id&&"string"!=typeof e.id){const e={keyword:"type",dataPath:t+"/groups/"+r+"/id",schemaPath:"#/allOf/0/properties/groups/items/properties/id/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.label&&"string"!=typeof e.label){const e={keyword:"type",dataPath:t+"/groups/"+r+"/label",schemaPath:"#/allOf/0/properties/groups/items/properties/label/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/groups/"+r,schemaPath:"#/allOf/0/properties/groups/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:{id:[],label:[]}},i={required:{id:function(){return'missing id for group "'+JSON.stringify(r)+'"'},label:function(){return'missing label for group "'+JSON.stringify(r)+'"'}}};let s,a;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/groups/"+r&&o.keyword in e&&0===o.schemaPath.indexOf("#/allOf/0/properties/groups/items")&&/^\/[^\/]*$/.test(o.schemaPath.slice(33))&&(s=nf[o.keyword],a=e[o.keyword][o.params[s]],a&&(a.push(o),o.emUsed=!0));for(const p in e)for(const s in e[p])if(a=e[p][s],a.length){const e=i[p]&&i[p][s],l={keyword:"errorMessage",dataPath:t+"/groups/"+r,schemaPath:"#/allOf/0/properties/groups/items/errorMessage",params:{errors:a},message:e?e():Yu.allOf[0].properties.groups.items.errorMessage[p][s]};null===n?n=[l]:n.push(l),o++}const l=[];for(const t of n)t.emUsed||l.push(t);n=l,o=l.length}}}else{const e={keyword:"type",dataPath:t+"/groups",schemaPath:"#/allOf/0/properties/groups/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.documentationRef){let i=e.documentationRef;if("string"==typeof i){if(!sf.test(i)){const e={keyword:"pattern",dataPath:t+"/documentationRef",schemaPath:"#/allOf/0/properties/documentationRef/pattern",params:{pattern:"^(https|http)://.*"},message:'should match pattern "^(https|http)://.*"'};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/documentationRef",schemaPath:"#/allOf/0/properties/documentationRef/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={pattern:[]},i={};for(const s of n)"errorMessage"!==s.keyword&&!s.emUsed&&s.dataPath===t+"/documentationRef"&&s.keyword in e&&0===s.schemaPath.indexOf("#/allOf/0/properties/documentationRef")&&/^\/[^\/]*$/.test(s.schemaPath.slice(37))&&(e[s.keyword].push(s),s.emUsed=!0);for(const s in e)if(e[s].length){const r={keyword:"errorMessage",dataPath:t+"/documentationRef",schemaPath:"#/allOf/0/properties/documentationRef/errorMessage",params:{errors:e[s]},message:s in i?i[s]():Yu.allOf[0].properties.documentationRef.errorMessage[s]};null===n?n=[r]:n.push(r),o++}const r=[];for(const t of n)t.emUsed||r.push(t);n=r,o=r.length}}}if(o>0){const e={required:{name:[],id:[],appliesTo:[],properties:[]}},i={required:{}};let r,s;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t&&o.keyword in e&&0===o.schemaPath.indexOf("#/allOf/0")&&/^\/[^\/]*$/.test(o.schemaPath.slice(9))&&(r=nf[o.keyword],s=e[o.keyword][o.params[r]],s&&(s.push(o),o.emUsed=!0));for(const l in e)for(const r in e[l])if(s=e[l][r],s.length){const e=i[l]&&i[l][r],a={keyword:"errorMessage",dataPath:t,schemaPath:"#/allOf/0/errorMessage",params:{errors:s},message:e?e():Yu.allOf[0].errorMessage[l][r]};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.properties){let i=e.properties;if(Array.isArray(i)){const e=i.length;for(let r=0;r<e;r++){let e=i[r];const s=o;let h=!0;const c=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.type&&!of(e.type,"Dropdown")){const e={};null===n?n=[e]:n.push(e),o++}var a=c===o;if(o=s,null!==n&&(s?n.length=s:n=null),a){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.choices){const e={keyword:"required",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/0/items/allOf/0/then/required",params:{missingProperty:"choices"},message:"should have required property 'choices'"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const s of n)"errorMessage"===s.keyword||s.emUsed||s.dataPath!==t+"/properties/"+r&&(0!==s.dataPath.indexOf(t+"/properties/"+r)||"/"!==s.dataPath[t+"/properties/"+r.length])||0!==s.schemaPath.indexOf("#/definitions/properties/allOf/0/items/allOf/0/then")||"/"!==s.schemaPath["#/definitions/properties/allOf/0/items/allOf/0/then".length]||(e.push(s),s.emUsed=!0);if(e.length){const i={keyword:"errorMessage",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/0/items/allOf/0/then/errorMessage",params:{errors:e},message:'must provide choices=[] with "Dropdown" type'};null===n?n=[i]:n.push(i),o++}const i=[];for(const t of n)t.emUsed||i.push(t);n=i,o=i.length}h=a=i===o}if(!h){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/0/items/allOf/0/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.id&&"string"!=typeof e.id){const e={keyword:"type",dataPath:t+"/properties/"+r+"/id",schemaPath:"#/definitions/properties/allOf/0/items/properties/id/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.value){let i=e.value;if("string"!=typeof i&&"boolean"!=typeof i){const e={keyword:"type",dataPath:t+"/properties/"+r+"/value",schemaPath:"#/definitions/properties/allOf/0/items/properties/value/type",params:{type:Ju.allOf[0].items.properties.value.type},message:"should be string,boolean"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.description&&"string"!=typeof e.description){const e={keyword:"type",dataPath:t+"/properties/"+r+"/description",schemaPath:"#/definitions/properties/allOf/0/items/properties/description/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.label&&"string"!=typeof e.label){const e={keyword:"type",dataPath:t+"/properties/"+r+"/label",schemaPath:"#/definitions/properties/allOf/0/items/properties/label/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.type&&"string"!=typeof e.type){const e={keyword:"type",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/0/items/properties/type/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.editable&&"boolean"!=typeof e.editable){const e={keyword:"type",dataPath:t+"/properties/"+r+"/editable",schemaPath:"#/definitions/properties/allOf/0/items/properties/editable/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.choices){let i=e.choices;if(Array.isArray(i)){const e=i.length;for(let s=0;s<e;s++){let e=i[s];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.value){const e={keyword:"required",dataPath:t+"/properties/"+r+"/choices/"+s,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/required",params:{missingProperty:"value"},message:"should have required property 'value'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.name){const e={keyword:"required",dataPath:t+"/properties/"+r+"/choices/"+s,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/required",params:{missingProperty:"name"},message:"should have required property 'name'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.name&&"string"!=typeof e.name){const e={keyword:"type",dataPath:t+"/properties/"+r+"/choices/"+s+"/name",schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/properties/name/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.value&&"string"!=typeof e.value){const e={keyword:"type",dataPath:t+"/properties/"+r+"/choices/"+s+"/value",schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/properties/value/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/choices/"+s,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:[]},i={};for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/properties/"+r+"/choices/"+s&&o.keyword in e&&0===o.schemaPath.indexOf("#/definitions/properties/allOf/0/items/properties/choices/items")&&/^\/[^\/]*$/.test(o.schemaPath.slice(63))&&(e[o.keyword].push(o),o.emUsed=!0);for(const l in e)if(e[l].length){const a={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/choices/"+s,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/errorMessage",params:{errors:e[l]},message:l in i?i[l]():Ju.allOf[0].items.properties.choices.items.errorMessage[l]};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/choices",schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.constraints){let i=e.constraints;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0!==i.notEmpty&&"boolean"!=typeof i.notEmpty){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/notEmpty",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/notEmpty/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.minLength&&"number"!=typeof i.minLength){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/minLength",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/minLength/type",params:{type:"number"},message:"should be number"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.maxLength&&"number"!=typeof i.maxLength){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/maxLength",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/maxLength/type",params:{type:"number"},message:"should be number"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.pattern){let e=i.pattern;const s=o;let a=!1,p=null;const h=o;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.value&&"string"!=typeof e.value){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/pattern/value",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/0/properties/value/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.message&&"string"!=typeof e.message){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/pattern/message",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/0/properties/message/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/pattern",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/0/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}(l=h===o)&&(a=!0,p=0);const c=o;if("string"!=typeof e){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/pattern",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/1/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}var l;if((l=c===o)&&a?(a=!1,p=[p,1]):l&&(a=!0,p=1),a)o=s,null!==n&&(s?n.length=s:n=null);else{const e={keyword:"oneOf",dataPath:t+"/properties/"+r+"/constraints/pattern",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf",params:{passingSchemas:p},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.group&&"string"!=typeof e.group){const e={keyword:"type",dataPath:t+"/properties/"+r+"/group",schemaPath:"#/definitions/properties/allOf/0/items/properties/group/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.condition){let i=e.condition;const s=o;let a=!1,l=null;const h=o;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.equals){const e={keyword:"required",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/0/required",params:{missingProperty:"equals"},message:"should have required property 'equals'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.equals){let e=i.equals;if("string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e){const e={keyword:"type",dataPath:t+"/properties/"+r+"/condition/equals",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/0/properties/equals/type",params:{type:Ju.allOf[0].items.properties.condition.oneOf[0].properties.equals.type},message:"should be string,number,boolean"};null===n?n=[e]:n.push(e),o++}}}(p=h===o)&&(a=!0,l=0);const c=o;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.oneOf){const e={keyword:"required",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/1/required",params:{missingProperty:"oneOf"},message:"should have required property 'oneOf'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.oneOf){let e=i.oneOf;if(Array.isArray(e)){const i=e.length;for(let s=0;s<i;s++){let i=e[s];if("string"!=typeof i&&"number"!=typeof i){const e={keyword:"type",dataPath:t+"/properties/"+r+"/condition/oneOf/"+s,schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/1/properties/oneOf/items/type",params:{type:Ju.allOf[0].items.properties.condition.oneOf[1].properties.oneOf.items.type},message:"should be string,number"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/condition/oneOf",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/1/properties/oneOf/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}}var p;if((p=c===o)&&a?(a=!1,l=[l,1]):p&&(a=!0,l=1),a)o=s,null!==n&&(s?n.length=s:n=null);else{const e={keyword:"oneOf",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf",params:{passingSchemas:l},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.property){const e={keyword:"required",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/required",params:{missingProperty:"property"},message:"should have required property 'property'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.type&&!of(i.type,"simple")){const e={keyword:"const",dataPath:t+"/properties/"+r+"/condition/type",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/properties/type/const",params:{allowedValue:"simple"},message:"should be equal to constant"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.property&&"string"!=typeof i.property){const e={keyword:"type",dataPath:t+"/properties/"+r+"/condition/property",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/properties/property/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:{property:[]}},i={required:{}};let s,a;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/properties/"+r+"/condition"&&o.keyword in e&&0===o.schemaPath.indexOf("#/definitions/properties/allOf/0/items/properties/condition")&&/^\/[^\/]*$/.test(o.schemaPath.slice(59))&&(s=nf[o.keyword],a=e[o.keyword][o.params[s]],a&&(a.push(o),o.emUsed=!0));for(const p in e)for(const s in e[p])if(a=e[p][s],a.length){const e=i[p]&&i[p][s],l={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/errorMessage",params:{errors:a},message:e?e():Ju.allOf[0].items.properties.condition.errorMessage[p][s]};null===n?n=[l]:n.push(l),o++}const l=[];for(const t of n)t.emUsed||l.push(t);n=l,o=l.length}}}else{const e={keyword:"type",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/0/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/properties",schemaPath:"#/definitions/properties/allOf/0/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}if(Array.isArray(i)){const e=i.length;for(let r=0;r<e;r++){let e=i[r];const s=o;let a=!0;const l=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.binding){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.binding){let t=e.binding;if(t&&"object"==typeof t&&!Array.isArray(t))if(void 0===t.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==t.type&&!of(t.type,"property")){const e={};null===n?n=[e]:n.push(e),o++}}var h=l===o;if(o=s,null!==n&&(s?n.length=s:n=null),h){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.type){let i=e.type;if("String"!==i&&"Text"!==i&&"Hidden"!==i&&"Dropdown"!==i&&"Boolean"!==i){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/0/then/properties/type/enum",params:{allowedValues:Ju.allOf[1].items.allOf[0].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/properties/"+r+"/type"&&(0!==i.dataPath.indexOf(t+"/properties/"+r+"/type")||"/"!==i.dataPath[t+"/properties/"+r+"/type".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/0/then/properties/type")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/allOf/0/then/properties/type".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/0/then/properties/type/errorMessage",params:{errors:e},message:"invalid property type "+JSON.stringify(i)+' for binding type "property"; must be any of { String, Text, Hidden, Dropdown, Boolean }'};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}}a=h=i===o}if(!a){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/allOf/0/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const p=o;let x=!0;const S=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.binding){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.binding){let t=e.binding;if(t&&"object"==typeof t&&!Array.isArray(t))if(void 0===t.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==t.type&&!of(t.type,"camunda:executionListener")){const e={};null===n?n=[e]:n.push(e),o++}}var c=S===o;if(o=p,null!==n&&(p?n.length=p:n=null),c){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.type){if("Hidden"!==e.type){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/1/then/properties/type/enum",params:{allowedValues:Ju.allOf[1].items.allOf[1].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const i=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/properties/"+r+"/type"&&(0!==e.dataPath.indexOf(t+"/properties/"+r+"/type")||"/"!==e.dataPath[t+"/properties/"+r+"/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/1/then/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/allOf/1/then/properties/type".length]||(i.push(e),e.emUsed=!0);if(i.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/1/then/properties/type/errorMessage",params:{errors:i},message:"invalid property type "+JSON.stringify(e&&e.type)+' for binding type "camunda:executionListener"; must be "Hidden"'};null===n?n=[s]:n.push(s),o++}const s=[];for(const e of n)e.emUsed||s.push(e);n=s,o=s.length}}x=c=i===o}if(!x){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/allOf/1/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const _=o;let A=!0;const q=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.binding){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.binding){let t=e.binding;if(t&&"object"==typeof t&&!Array.isArray(t))if(void 0===t.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==t.type){let e=t.type;if("camunda:property"!==e&&"camunda:outputParameter"!==e&&"camunda:in"!==e&&"camunda:in:businessKey"!==e&&"camunda:out"!==e&&"camunda:errorEventDefinition"!==e){const e={};null===n?n=[e]:n.push(e),o++}}}var d=q===o;if(o=_,null!==n&&(_?n.length=_:n=null),d){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.type){let i=e.type;if("String"!==i&&"Hidden"!==i&&"Dropdown"!==i){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/2/then/properties/type/enum",params:{allowedValues:Ju.allOf[1].items.allOf[2].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const s=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/properties/"+r+"/type"&&(0!==e.dataPath.indexOf(t+"/properties/"+r+"/type")||"/"!==e.dataPath[t+"/properties/"+r+"/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/2/then/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/allOf/2/then/properties/type".length]||(s.push(e),e.emUsed=!0);if(s.length){const a={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/2/then/properties/type/errorMessage",params:{errors:s},message:"invalid property type "+JSON.stringify(i)+" for binding type "+JSON.stringify(e&&e.binding&&e.binding.type)+"; must be any of { String, Hidden, Dropdown }"};null===n?n=[a]:n.push(a),o++}const a=[];for(const e of n)e.emUsed||a.push(e);n=a,o=a.length}}A=d=i===o}if(!A){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/allOf/2/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const $=o;let T=!0;const M=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.binding){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.binding){let t=e.binding;if(t&&"object"==typeof t&&!Array.isArray(t))if(void 0===t.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==t.type){let e=t.type;if("camunda:inputParameter"!==e&&"camunda:field"!==e){const e={};null===n?n=[e]:n.push(e),o++}}}var u=M===o;if(o=$,null!==n&&($?n.length=$:n=null),u){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.type){let i=e.type;if("String"!==i&&"Text"!==i&&"Hidden"!==i&&"Dropdown"!==i){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/3/then/properties/type/enum",params:{allowedValues:Ju.allOf[1].items.allOf[3].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const s=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/properties/"+r+"/type"&&(0!==e.dataPath.indexOf(t+"/properties/"+r+"/type")||"/"!==e.dataPath[t+"/properties/"+r+"/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/3/then/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/allOf/3/then/properties/type".length]||(s.push(e),e.emUsed=!0);if(s.length){const a={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/3/then/properties/type/errorMessage",params:{errors:s},message:"invalid property type "+JSON.stringify(i)+" for binding type "+JSON.stringify(e&&e.binding&&e.binding.type)+"; must be any of { String, Text, Hidden, Dropdown }"};null===n?n=[a]:n.push(a),o++}const a=[];for(const e of n)e.emUsed||a.push(e);n=a,o=a.length}}T=u=i===o}if(!T){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/allOf/3/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.binding){const e={keyword:"required",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/required",params:{missingProperty:"binding"},message:"should have required property 'binding'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.binding){let i=e.binding;const s=o;let a=!0;const l=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type){let e=i.type;if("property"!==e&&"camunda:property"!==e&&"camunda:inputParameter"!==e&&"camunda:field"!==e){const e={};null===n?n=[e]:n.push(e),o++}}var f=l===o;if(o=s,null!==n&&(s?n.length=s:n=null),f){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.name){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then/required",params:{missingProperty:"name"},message:"should have required property 'name'"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/properties/"+r+"/binding"&&(0!==i.dataPath.indexOf(t+"/properties/"+r+"/binding")||"/"!==i.dataPath[t+"/properties/"+r+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires name"};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}a=f=e===o}if(!a){const e={keyword:"if",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/0/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const p=o;let h=!0;const c=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type&&!of(i.type,"camunda:outputParameter")){const e={};null===n?n=[e]:n.push(e),o++}var m=c===o;if(o=p,null!==n&&(p?n.length=p:n=null),m){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then/required",params:{missingProperty:"source"},message:"should have required property 'source'"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/properties/"+r+"/binding"&&(0!==i.dataPath.indexOf(t+"/properties/"+r+"/binding")||"/"!==i.dataPath[t+"/properties/"+r+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires source"};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}h=m=e===o}if(!h){const e={keyword:"if",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/1/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const d=o;let u=!0;const x=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type&&!of(i.type,"camunda:in")){const e={};null===n?n=[e]:n.push(e),o++}var g=x===o;if(o=d,null!==n&&(d?n.length=d:n=null),g){const e=o,s=o;let a=!1;const l=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.variables){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then/anyOf/0/required",params:{missingProperty:"variables"},message:"should have required property 'variables'"};null===n?n=[e]:n.push(e),o++}var y=l===o;if(a=a||y,!a){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.target){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then/anyOf/1/required",params:{missingProperty:"target"},message:"should have required property 'target'"};null===n?n=[e]:n.push(e),o++}y=e===o;a=a||y}if(a)o=s,null!==n&&(s?n.length=s:n=null);else{const e={keyword:"anyOf",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then/anyOf",params:{},message:"should match some schema in anyOf"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/properties/"+r+"/binding"&&(0!==i.dataPath.indexOf(t+"/properties/"+r+"/binding")||"/"!==i.dataPath[t+"/properties/"+r+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires variables, target, or both"};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}u=g=e===o}if(!u){const e={keyword:"if",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const S=o;let _=!0;const A=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type&&!of(i.type,"camunda:out")){const e={};null===n?n=[e]:n.push(e),o++}var O=A===o;if(o=S,null!==n&&(S?n.length=S:n=null),O){const e=o,s=o;let a=!1,l=null;const p=o,h=o,c=o,d=o;let u=!1;const f=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={};null===n?n=[e]:n.push(e),o++}var b=f===o;if(u=u||b,!u){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.sourceExpression){const e={};null===n?n=[e]:n.push(e),o++}b=e===o;u=u||b}if(u)o=d,null!==n&&(d?n.length=d:n=null);else{const e={};null===n?n=[e]:n.push(e),o++}if(c===o){const e={keyword:"not",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/0/not",params:{},message:"should NOT be valid"};null===n?n=[e]:n.push(e),o++}else o=h,null!==n&&(h?n.length=h:n=null);if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.variables){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/0/required",params:{missingProperty:"variables"},message:"should have required property 'variables'"};null===n?n=[e]:n.push(e),o++}(P=p===o)&&(a=!0,l=0);const m=o,g=o,y=o,k=o;let x=!1;const S=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.variables){const e={};null===n?n=[e]:n.push(e),o++}var v=S===o;if(x=x||v,!x){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.sourceExpression){const e={};null===n?n=[e]:n.push(e),o++}v=e===o;x=x||v}if(x)o=k,null!==n&&(k?n.length=k:n=null);else{const e={};null===n?n=[e]:n.push(e),o++}if(y===o){const e={keyword:"not",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/1/not",params:{},message:"should NOT be valid"};null===n?n=[e]:n.push(e),o++}else o=g,null!==n&&(g?n.length=g:n=null);if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/1/required",params:{missingProperty:"source"},message:"should have required property 'source'"};null===n?n=[e]:n.push(e),o++}if((P=m===o)&&a)a=!1,l=[l,1];else{P&&(a=!0,l=1);const e=o,s=o,p=o,h=o;let c=!1;const d=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.variables){const e={};null===n?n=[e]:n.push(e),o++}var w=d===o;if(c=c||w,!c){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={};null===n?n=[e]:n.push(e),o++}w=e===o;c=c||w}if(c)o=h,null!==n&&(h?n.length=h:n=null);else{const e={};null===n?n=[e]:n.push(e),o++}if(p===o){const e={keyword:"not",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/2/not",params:{},message:"should NOT be valid"};null===n?n=[e]:n.push(e),o++}else o=s,null!==n&&(s?n.length=s:n=null);if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.sourceExpression){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/2/required",params:{missingProperty:"sourceExpression"},message:"should have required property 'sourceExpression'"};null===n?n=[e]:n.push(e),o++}if((P=e===o)&&a)a=!1,l=[l,2];else{P&&(a=!0,l=2);const e=o,s=o,p=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={};null===n?n=[e]:n.push(e),o++}if(p===o){const e={keyword:"not",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/3/not",params:{},message:"should NOT be valid"};null===n?n=[e]:n.push(e),o++}else o=s,null!==n&&(s?n.length=s:n=null);if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.variables){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/3/required",params:{missingProperty:"variables"},message:"should have required property 'variables'"};null===n?n=[e]:n.push(e),o++}if(void 0===i.sourceExpression){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/3/required",params:{missingProperty:"sourceExpression"},message:"should have required property 'sourceExpression'"};null===n?n=[e]:n.push(e),o++}}if((P=e===o)&&a)a=!1,l=[l,3];else{P&&(a=!0,l=3);const e=o,s=o,p=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.sourceExpression){const e={};null===n?n=[e]:n.push(e),o++}var P;if(p===o){const e={keyword:"not",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/4/not",params:{},message:"should NOT be valid"};null===n?n=[e]:n.push(e),o++}else o=s,null!==n&&(s?n.length=s:n=null);if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.variables){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/4/required",params:{missingProperty:"variables"},message:"should have required property 'variables'"};null===n?n=[e]:n.push(e),o++}if(void 0===i.source){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/4/required",params:{missingProperty:"source"},message:"should have required property 'source'"};null===n?n=[e]:n.push(e),o++}}(P=e===o)&&a?(a=!1,l=[l,4]):P&&(a=!0,l=4)}}}if(a)o=s,null!==n&&(s?n.length=s:n=null);else{const e={keyword:"oneOf",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf",params:{passingSchemas:l},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/properties/"+r+"/binding"&&(0!==i.dataPath.indexOf(t+"/properties/"+r+"/binding")||"/"!==i.dataPath[t+"/properties/"+r+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires one of the following: variables, sourceExpression, source, (sourceExpression and variables), or (source and variables)"};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}_=O=e===o}if(!_){const e={keyword:"if",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const q=o;let $=!0;const T=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type&&!of(i.type,"camunda:errorEventDefinition")){const e={};null===n?n=[e]:n.push(e),o++}var k=T===o;if(o=q,null!==n&&(q?n.length=q:n=null),k){const e=o,s=o;let a=!1,l=null;const p=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.errorRef){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/4/then/oneOf/0/required",params:{missingProperty:"errorRef"},message:"should have required property 'errorRef'"};null===n?n=[e]:n.push(e),o++}if(p===o&&(a=!0,l=0),a)o=s,null!==n&&(s?n.length=s:n=null);else{const e={keyword:"oneOf",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/4/then/oneOf",params:{passingSchemas:l},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/properties/"+r+"/binding"&&(0!==i.dataPath.indexOf(t+"/properties/"+r+"/binding")||"/"!==i.dataPath[t+"/properties/"+r+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/4/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/4/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/4/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires errorRef"};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}$=k=e===o}if(!$){const e={keyword:"if",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/4/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.type){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/required",params:{missingProperty:"type"},message:"should have required property 'type'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.type){let e=i.type;if("string"!=typeof e){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/type/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if("property"!==e&&"camunda:property"!==e&&"camunda:inputParameter"!==e&&"camunda:outputParameter"!==e&&"camunda:in"!==e&&"camunda:out"!==e&&"camunda:in:businessKey"!==e&&"camunda:executionListener"!==e&&"camunda:field"!==e&&"camunda:errorEventDefinition"!==e){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/type/enum",params:{allowedValues:Ju.allOf[1].items.properties.binding.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const i=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/properties/"+r+"/binding/type"&&(0!==e.dataPath.indexOf(t+"/properties/"+r+"/binding/type")||"/"!==e.dataPath[t+"/properties/"+r+"/binding/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/properties/type".length]||(i.push(e),e.emUsed=!0);if(i.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/type/errorMessage",params:{errors:i},message:"invalid property.binding type "+JSON.stringify(e)+"; must be any of { property, camunda:property, camunda:inputParameter, camunda:outputParameter, camunda:in, camunda:out, camunda:in:businessKey, camunda:executionListener, camunda:field, camunda:errorEventDefinition }"};null===n?n=[s]:n.push(s),o++}const s=[];for(const e of n)e.emUsed||s.push(e);n=s,o=s.length}}if(void 0!==i.name&&"string"!=typeof i.name){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/name",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/name/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.event&&"string"!=typeof i.event){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/event",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/event/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.scriptFormat&&"string"!=typeof i.scriptFormat){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/scriptFormat",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/scriptFormat/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.source&&"string"!=typeof i.source){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/source",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/source/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.target&&"string"!=typeof i.target){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/target",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/target/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.expression&&"boolean"!=typeof i.expression){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/expression",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/expression/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.variables){let e=i.variables;if("string"!=typeof e){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/variables",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/variables/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if("all"!==e&&"local"!==e){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/binding/variables",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/variables/enum",params:{allowedValues:Ju.allOf[1].items.properties.binding.properties.variables.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}}if(void 0!==i.sourceExpression&&"string"!=typeof i.sourceExpression){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/sourceExpression",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/sourceExpression/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:[]},i={required:function(){return'missing binding for property "'+JSON.stringify(r)+'"'}};for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/properties/"+r&&o.keyword in e&&0===o.schemaPath.indexOf("#/definitions/properties/allOf/1/items")&&/^\/[^\/]*$/.test(o.schemaPath.slice(38))&&(e[o.keyword].push(o),o.emUsed=!0);for(const a in e)if(e[a].length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/errorMessage",params:{errors:e[a]},message:a in i?i[a]():Ju.allOf[1].items.errorMessage[a]};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}}}else{const e={keyword:"type",dataPath:t+"/properties",schemaPath:"#/definitions/properties/allOf/1/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.scopes){let i=e.scopes;if(Array.isArray(i)){const e=i.length;for(let r=0;r<e;r++){let e=i[r];const s=o;let a=!0;const l=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.type&&"bpmn:Error"!==e.type){const e={};null===n?n=[e]:n.push(e),o++}var x=l===o;if(o=s,null!==n&&(s?n.length=s:n=null),x){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.id){const e={keyword:"required",dataPath:t+"/scopes/"+r,schemaPath:"#/properties/scopes/items/allOf/0/then/required",params:{missingProperty:"id"},message:"should have required property 'id'"};null===n?n=[e]:n.push(e),o++}if(o>0){const i=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/scopes/"+r&&(0!==e.dataPath.indexOf(t+"/scopes/"+r)||"/"!==e.dataPath[t+"/scopes/"+r.length])||0!==e.schemaPath.indexOf("#/properties/scopes/items/allOf/0/then")||"/"!==e.schemaPath["#/properties/scopes/items/allOf/0/then".length]||(i.push(e),e.emUsed=!0);if(i.length){const s={keyword:"errorMessage",dataPath:t+"/scopes/"+r,schemaPath:"#/properties/scopes/items/allOf/0/then/errorMessage",params:{errors:i},message:"invalid scope "+JSON.stringify(e&&e.type)+", missing id"};null===n?n=[s]:n.push(s),o++}const s=[];for(const e of n)e.emUsed||s.push(e);n=s,o=s.length}a=x=i===o}if(!a){const e={keyword:"if",dataPath:t+"/scopes/"+r,schemaPath:"#/properties/scopes/items/allOf/0/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.type){const e={keyword:"required",dataPath:t+"/scopes/"+r,schemaPath:"#/properties/scopes/items/required",params:{missingProperty:"type"},message:"should have required property 'type'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.properties){const e={keyword:"required",dataPath:t+"/scopes/"+r,schemaPath:"#/properties/scopes/items/required",params:{missingProperty:"properties"},message:"should have required property 'properties'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.type){let i=e.type;if("string"!=typeof i){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/type",schemaPath:"#/properties/scopes/items/properties/type/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if("camunda:Connector"!==i&&"bpmn:Error"!==i){const e={keyword:"enum",dataPath:t+"/scopes/"+r+"/type",schemaPath:"#/properties/scopes/items/properties/type/enum",params:{allowedValues:Yu.properties.scopes.items.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/scopes/"+r+"/type"&&(0!==i.dataPath.indexOf(t+"/scopes/"+r+"/type")||"/"!==i.dataPath[t+"/scopes/"+r+"/type".length])||0!==i.schemaPath.indexOf("#/properties/scopes/items/properties/type")||"/"!==i.schemaPath["#/properties/scopes/items/properties/type".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/type",schemaPath:"#/properties/scopes/items/properties/type/errorMessage",params:{errors:e},message:"invalid scope type "+JSON.stringify(i)+"; must be any of { camunda:Connector, bpmn:Error }"};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}}if(void 0!==e.properties){let i=e.properties;if(Array.isArray(i)){const e=i.length;for(let s=0;s<e;s++){let e=i[s];const a=o;let l=!0;const p=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.type&&!of(e.type,"Dropdown")){const e={};null===n?n=[e]:n.push(e),o++}var S=p===o;if(o=a,null!==n&&(a?n.length=a:n=null),S){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.choices){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/0/items/allOf/0/then/required",params:{missingProperty:"choices"},message:"should have required property 'choices'"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const o of n)"errorMessage"===o.keyword||o.emUsed||o.dataPath!==t+"/scopes/"+r+"/properties/"+s&&(0!==o.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s)||"/"!==o.dataPath[t+"/scopes/"+r+"/properties/"+s.length])||0!==o.schemaPath.indexOf("#/definitions/properties/allOf/0/items/allOf/0/then")||"/"!==o.schemaPath["#/definitions/properties/allOf/0/items/allOf/0/then".length]||(e.push(o),o.emUsed=!0);if(e.length){const i={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/0/items/allOf/0/then/errorMessage",params:{errors:e},message:'must provide choices=[] with "Dropdown" type'};null===n?n=[i]:n.push(i),o++}const i=[];for(const t of n)t.emUsed||i.push(t);n=i,o=i.length}l=S=i===o}if(!l){const e={keyword:"if",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/0/items/allOf/0/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.id&&"string"!=typeof e.id){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/id",schemaPath:"#/definitions/properties/allOf/0/items/properties/id/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.value){let i=e.value;if("string"!=typeof i&&"boolean"!=typeof i){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/value",schemaPath:"#/definitions/properties/allOf/0/items/properties/value/type",params:{type:ef.items.properties.value.type},message:"should be string,boolean"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.description&&"string"!=typeof e.description){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/description",schemaPath:"#/definitions/properties/allOf/0/items/properties/description/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.label&&"string"!=typeof e.label){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/label",schemaPath:"#/definitions/properties/allOf/0/items/properties/label/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.type&&"string"!=typeof e.type){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/type",schemaPath:"#/definitions/properties/allOf/0/items/properties/type/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.editable&&"boolean"!=typeof e.editable){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/editable",schemaPath:"#/definitions/properties/allOf/0/items/properties/editable/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.choices){let i=e.choices;if(Array.isArray(i)){const e=i.length;for(let a=0;a<e;a++){let e=i[a];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.value){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/choices/"+a,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/required",params:{missingProperty:"value"},message:"should have required property 'value'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.name){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/choices/"+a,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/required",params:{missingProperty:"name"},message:"should have required property 'name'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.name&&"string"!=typeof e.name){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/choices/"+a+"/name",schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/properties/name/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.value&&"string"!=typeof e.value){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/choices/"+a+"/value",schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/properties/value/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/choices/"+a,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:[]},i={};for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/scopes/"+r+"/properties/"+s+"/choices/"+a&&o.keyword in e&&0===o.schemaPath.indexOf("#/definitions/properties/allOf/0/items/properties/choices/items")&&/^\/[^\/]*$/.test(o.schemaPath.slice(63))&&(e[o.keyword].push(o),o.emUsed=!0);for(const p in e)if(e[p].length){const l={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/choices/"+a,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/errorMessage",params:{errors:e[p]},message:p in i?i[p]():ef.items.properties.choices.items.errorMessage[p]};null===n?n=[l]:n.push(l),o++}const l=[];for(const t of n)t.emUsed||l.push(t);n=l,o=l.length}}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/choices",schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.constraints){let i=e.constraints;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0!==i.notEmpty&&"boolean"!=typeof i.notEmpty){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/constraints/notEmpty",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/notEmpty/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.minLength&&"number"!=typeof i.minLength){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/constraints/minLength",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/minLength/type",params:{type:"number"},message:"should be number"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.maxLength&&"number"!=typeof i.maxLength){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/constraints/maxLength",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/maxLength/type",params:{type:"number"},message:"should be number"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.pattern){let e=i.pattern;const a=o;let l=!1,p=null;const h=o;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.value&&"string"!=typeof e.value){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/constraints/pattern/value",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/0/properties/value/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.message&&"string"!=typeof e.message){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/constraints/pattern/message",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/0/properties/message/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/constraints/pattern",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/0/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}(_=h===o)&&(l=!0,p=0);const c=o;if("string"!=typeof e){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/constraints/pattern",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/1/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}var _;if((_=c===o)&&l?(l=!1,p=[p,1]):_&&(l=!0,p=1),l)o=a,null!==n&&(a?n.length=a:n=null);else{const e={keyword:"oneOf",dataPath:t+"/scopes/"+r+"/properties/"+s+"/constraints/pattern",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf",params:{passingSchemas:p},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/constraints",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.group&&"string"!=typeof e.group){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/group",schemaPath:"#/definitions/properties/allOf/0/items/properties/group/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.condition){let i=e.condition;const a=o;let l=!1,p=null;const h=o;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.equals){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/0/required",params:{missingProperty:"equals"},message:"should have required property 'equals'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.equals){let e=i.equals;if("string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition/equals",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/0/properties/equals/type",params:{type:ef.items.properties.condition.oneOf[0].properties.equals.type},message:"should be string,number,boolean"};null===n?n=[e]:n.push(e),o++}}}(A=h===o)&&(l=!0,p=0);const c=o;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.oneOf){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/1/required",params:{missingProperty:"oneOf"},message:"should have required property 'oneOf'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.oneOf){let e=i.oneOf;if(Array.isArray(e)){const i=e.length;for(let a=0;a<i;a++){let i=e[a];if("string"!=typeof i&&"number"!=typeof i){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition/oneOf/"+a,schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/1/properties/oneOf/items/type",params:{type:ef.items.properties.condition.oneOf[1].properties.oneOf.items.type},message:"should be string,number"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition/oneOf",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/1/properties/oneOf/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}}var A;if((A=c===o)&&l?(l=!1,p=[p,1]):A&&(l=!0,p=1),l)o=a,null!==n&&(a?n.length=a:n=null);else{const e={keyword:"oneOf",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf",params:{passingSchemas:p},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.property){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/required",params:{missingProperty:"property"},message:"should have required property 'property'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.type&&!of(i.type,"simple")){const e={keyword:"const",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition/type",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/properties/type/const",params:{allowedValue:"simple"},message:"should be equal to constant"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.property&&"string"!=typeof i.property){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition/property",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/properties/property/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:{property:[]}},i={required:{}};let a,l;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/scopes/"+r+"/properties/"+s+"/condition"&&o.keyword in e&&0===o.schemaPath.indexOf("#/definitions/properties/allOf/0/items/properties/condition")&&/^\/[^\/]*$/.test(o.schemaPath.slice(59))&&(a=nf[o.keyword],l=e[o.keyword][o.params[a]],l&&(l.push(o),o.emUsed=!0));for(const h in e)for(const a in e[h])if(l=e[h][a],l.length){const e=i[h]&&i[h][a],p={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/errorMessage",params:{errors:l},message:e?e():ef.items.properties.condition.errorMessage[h][a]};null===n?n=[p]:n.push(p),o++}const p=[];for(const t of n)t.emUsed||p.push(t);n=p,o=p.length}}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/0/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties",schemaPath:"#/definitions/properties/allOf/0/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}if(Array.isArray(i)){const e=i.length;for(let s=0;s<e;s++){let e=i[s];const a=o;let l=!0;const p=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.binding){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.binding){let t=e.binding;if(t&&"object"==typeof t&&!Array.isArray(t))if(void 0===t.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==t.type&&!of(t.type,"property")){const e={};null===n?n=[e]:n.push(e),o++}}var q=p===o;if(o=a,null!==n&&(a?n.length=a:n=null),q){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.type){let i=e.type;if("String"!==i&&"Text"!==i&&"Hidden"!==i&&"Dropdown"!==i&&"Boolean"!==i){const e={keyword:"enum",dataPath:t+"/scopes/"+r+"/properties/"+s+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/0/then/properties/type/enum",params:{allowedValues:tf.items.allOf[0].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/scopes/"+r+"/properties/"+s+"/type"&&(0!==i.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s+"/type")||"/"!==i.dataPath[t+"/scopes/"+r+"/properties/"+s+"/type".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/0/then/properties/type")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/allOf/0/then/properties/type".length]||(e.push(i),i.emUsed=!0);if(e.length){const a={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/0/then/properties/type/errorMessage",params:{errors:e},message:"invalid property type "+JSON.stringify(i)+' for binding type "property"; must be any of { String, Text, Hidden, Dropdown, Boolean }'};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}}l=q=i===o}if(!l){const e={keyword:"if",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/1/items/allOf/0/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const h=o;let c=!0;const d=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.binding){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.binding){let t=e.binding;if(t&&"object"==typeof t&&!Array.isArray(t))if(void 0===t.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==t.type&&!of(t.type,"camunda:executionListener")){const e={};null===n?n=[e]:n.push(e),o++}}var $=d===o;if(o=h,null!==n&&(h?n.length=h:n=null),$){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.type){if("Hidden"!==e.type){const e={keyword:"enum",dataPath:t+"/scopes/"+r+"/properties/"+s+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/1/then/properties/type/enum",params:{allowedValues:tf.items.allOf[1].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const i=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/scopes/"+r+"/properties/"+s+"/type"&&(0!==e.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s+"/type")||"/"!==e.dataPath[t+"/scopes/"+r+"/properties/"+s+"/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/1/then/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/allOf/1/then/properties/type".length]||(i.push(e),e.emUsed=!0);if(i.length){const a={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/1/then/properties/type/errorMessage",params:{errors:i},message:"invalid property type "+JSON.stringify(e&&e.type)+' for binding type "camunda:executionListener"; must be "Hidden"'};null===n?n=[a]:n.push(a),o++}const a=[];for(const e of n)e.emUsed||a.push(e);n=a,o=a.length}}c=$=i===o}if(!c){const e={keyword:"if",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/1/items/allOf/1/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const u=o;let f=!0;const m=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.binding){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.binding){let t=e.binding;if(t&&"object"==typeof t&&!Array.isArray(t))if(void 0===t.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==t.type){let e=t.type;if("camunda:property"!==e&&"camunda:outputParameter"!==e&&"camunda:in"!==e&&"camunda:in:businessKey"!==e&&"camunda:out"!==e&&"camunda:errorEventDefinition"!==e){const e={};null===n?n=[e]:n.push(e),o++}}}var T=m===o;if(o=u,null!==n&&(u?n.length=u:n=null),T){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.type){let i=e.type;if("String"!==i&&"Hidden"!==i&&"Dropdown"!==i){const e={keyword:"enum",dataPath:t+"/scopes/"+r+"/properties/"+s+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/2/then/properties/type/enum",params:{allowedValues:tf.items.allOf[2].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const a=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/scopes/"+r+"/properties/"+s+"/type"&&(0!==e.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s+"/type")||"/"!==e.dataPath[t+"/scopes/"+r+"/properties/"+s+"/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/2/then/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/allOf/2/then/properties/type".length]||(a.push(e),e.emUsed=!0);if(a.length){const l={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/2/then/properties/type/errorMessage",params:{errors:a},message:"invalid property type "+JSON.stringify(i)+" for binding type "+JSON.stringify(e&&e.binding&&e.binding.type)+"; must be any of { String, Hidden, Dropdown }"};null===n?n=[l]:n.push(l),o++}const l=[];for(const e of n)e.emUsed||l.push(e);n=l,o=l.length}}f=T=i===o}if(!f){const e={keyword:"if",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/1/items/allOf/2/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const g=o;let y=!0;const O=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.binding){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.binding){let t=e.binding;if(t&&"object"==typeof t&&!Array.isArray(t))if(void 0===t.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==t.type){let e=t.type;if("camunda:inputParameter"!==e&&"camunda:field"!==e){const e={};null===n?n=[e]:n.push(e),o++}}}var M=O===o;if(o=g,null!==n&&(g?n.length=g:n=null),M){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.type){let i=e.type;if("String"!==i&&"Text"!==i&&"Hidden"!==i&&"Dropdown"!==i){const e={keyword:"enum",dataPath:t+"/scopes/"+r+"/properties/"+s+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/3/then/properties/type/enum",params:{allowedValues:tf.items.allOf[3].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const a=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/scopes/"+r+"/properties/"+s+"/type"&&(0!==e.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s+"/type")||"/"!==e.dataPath[t+"/scopes/"+r+"/properties/"+s+"/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/3/then/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/allOf/3/then/properties/type".length]||(a.push(e),e.emUsed=!0);if(a.length){const l={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/3/then/properties/type/errorMessage",params:{errors:a},message:"invalid property type "+JSON.stringify(i)+" for binding type "+JSON.stringify(e&&e.binding&&e.binding.type)+"; must be any of { String, Text, Hidden, Dropdown }"};null===n?n=[l]:n.push(l),o++}const l=[];for(const e of n)e.emUsed||l.push(e);n=l,o=l.length}}y=M=i===o}if(!y){const e={keyword:"if",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/1/items/allOf/3/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.binding){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/1/items/required",params:{missingProperty:"binding"},message:"should have required property 'binding'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.binding){let i=e.binding;const a=o;let l=!0;const p=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type){let e=i.type;if("property"!==e&&"camunda:property"!==e&&"camunda:inputParameter"!==e&&"camunda:field"!==e){const e={};null===n?n=[e]:n.push(e),o++}}var C=p===o;if(o=a,null!==n&&(a?n.length=a:n=null),C){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.name){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then/required",params:{missingProperty:"name"},message:"should have required property 'name'"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/scopes/"+r+"/properties/"+s+"/binding"&&(0!==i.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s+"/binding")||"/"!==i.dataPath[t+"/scopes/"+r+"/properties/"+s+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const a={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires name"};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}l=C=e===o}if(!l){const e={keyword:"if",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/0/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const h=o;let c=!0;const d=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type&&!of(i.type,"camunda:outputParameter")){const e={};null===n?n=[e]:n.push(e),o++}var E=d===o;if(o=h,null!==n&&(h?n.length=h:n=null),E){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then/required",params:{missingProperty:"source"},message:"should have required property 'source'"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/scopes/"+r+"/properties/"+s+"/binding"&&(0!==i.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s+"/binding")||"/"!==i.dataPath[t+"/scopes/"+r+"/properties/"+s+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const a={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires source"};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}c=E=e===o}if(!c){const e={keyword:"if",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/1/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const u=o;let f=!0;const m=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type&&!of(i.type,"camunda:in")){const e={};null===n?n=[e]:n.push(e),o++}var R=m===o;if(o=u,null!==n&&(u?n.length=u:n=null),R){const e=o,a=o;let l=!1;const p=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.variables){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then/anyOf/0/required",params:{missingProperty:"variables"},message:"should have required property 'variables'"};null===n?n=[e]:n.push(e),o++}var D=p===o;if(l=l||D,!l){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.target){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then/anyOf/1/required",params:{missingProperty:"target"},message:"should have required property 'target'"};null===n?n=[e]:n.push(e),o++}D=e===o;l=l||D}if(l)o=a,null!==n&&(a?n.length=a:n=null);else{const e={keyword:"anyOf",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then/anyOf",params:{},message:"should match some schema in anyOf"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/scopes/"+r+"/properties/"+s+"/binding"&&(0!==i.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s+"/binding")||"/"!==i.dataPath[t+"/scopes/"+r+"/properties/"+s+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const a={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires variables, target, or both"};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}f=R=e===o}if(!f){const e={keyword:"if",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const g=o;let y=!0;const O=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type&&!of(i.type,"camunda:out")){const e={};null===n?n=[e]:n.push(e),o++}var Q=O===o;if(o=g,null!==n&&(g?n.length=g:n=null),Q){const e=o,a=o;let l=!1,p=null;const h=o,c=o,d=o,u=o;let f=!1;const m=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={};null===n?n=[e]:n.push(e),o++}var j=m===o;if(f=f||j,!f){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.sourceExpression){const e={};null===n?n=[e]:n.push(e),o++}j=e===o;f=f||j}if(f)o=u,null!==n&&(u?n.length=u:n=null);else{const e={};null===n?n=[e]:n.push(e),o++}if(d===o){const e={keyword:"not",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/0/not",params:{},message:"should NOT be valid"};null===n?n=[e]:n.push(e),o++}else o=c,null!==n&&(c?n.length=c:n=null);if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.variables){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/0/required",params:{missingProperty:"variables"},message:"should have required property 'variables'"};null===n?n=[e]:n.push(e),o++}(I=h===o)&&(l=!0,p=0);const g=o,O=o,b=o,v=o;let w=!1;const P=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.variables){const e={};null===n?n=[e]:n.push(e),o++}var X=P===o;if(w=w||X,!w){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.sourceExpression){const e={};null===n?n=[e]:n.push(e),o++}X=e===o;w=w||X}if(w)o=v,null!==n&&(v?n.length=v:n=null);else{const e={};null===n?n=[e]:n.push(e),o++}if(b===o){const e={keyword:"not",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/1/not",params:{},message:"should NOT be valid"};null===n?n=[e]:n.push(e),o++}else o=O,null!==n&&(O?n.length=O:n=null);if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/1/required",params:{missingProperty:"source"},message:"should have required property 'source'"};null===n?n=[e]:n.push(e),o++}if((I=g===o)&&l)l=!1,p=[p,1];else{I&&(l=!0,p=1);const e=o,a=o,h=o,c=o;let d=!1;const u=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.variables){const e={};null===n?n=[e]:n.push(e),o++}var N=u===o;if(d=d||N,!d){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={};null===n?n=[e]:n.push(e),o++}N=e===o;d=d||N}if(d)o=c,null!==n&&(c?n.length=c:n=null);else{const e={};null===n?n=[e]:n.push(e),o++}if(h===o){const e={keyword:"not",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/2/not",params:{},message:"should NOT be valid"};null===n?n=[e]:n.push(e),o++}else o=a,null!==n&&(a?n.length=a:n=null);if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.sourceExpression){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/2/required",params:{missingProperty:"sourceExpression"},message:"should have required property 'sourceExpression'"};null===n?n=[e]:n.push(e),o++}if((I=e===o)&&l)l=!1,p=[p,2];else{I&&(l=!0,p=2);const e=o,a=o,h=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={};null===n?n=[e]:n.push(e),o++}if(h===o){const e={keyword:"not",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/3/not",params:{},message:"should NOT be valid"};null===n?n=[e]:n.push(e),o++}else o=a,null!==n&&(a?n.length=a:n=null);if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.variables){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/3/required",params:{missingProperty:"variables"},message:"should have required property 'variables'"};null===n?n=[e]:n.push(e),o++}if(void 0===i.sourceExpression){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/3/required",params:{missingProperty:"sourceExpression"},message:"should have required property 'sourceExpression'"};null===n?n=[e]:n.push(e),o++}}if((I=e===o)&&l)l=!1,p=[p,3];else{I&&(l=!0,p=3);const e=o,a=o,h=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.sourceExpression){const e={};null===n?n=[e]:n.push(e),o++}var I;if(h===o){const e={keyword:"not",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/4/not",params:{},message:"should NOT be valid"};null===n?n=[e]:n.push(e),o++}else o=a,null!==n&&(a?n.length=a:n=null);if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.variables){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/4/required",params:{missingProperty:"variables"},message:"should have required property 'variables'"};null===n?n=[e]:n.push(e),o++}if(void 0===i.source){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf/4/required",params:{missingProperty:"source"},message:"should have required property 'source'"};null===n?n=[e]:n.push(e),o++}}(I=e===o)&&l?(l=!1,p=[p,4]):I&&(l=!0,p=4)}}}if(l)o=a,null!==n&&(a?n.length=a:n=null);else{const e={keyword:"oneOf",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/oneOf",params:{passingSchemas:p},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/scopes/"+r+"/properties/"+s+"/binding"&&(0!==i.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s+"/binding")||"/"!==i.dataPath[t+"/scopes/"+r+"/properties/"+s+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const a={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires one of the following: variables, sourceExpression, source, (sourceExpression and variables), or (source and variables)"};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}y=Q=e===o}if(!y){const e={keyword:"if",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/3/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const b=o;let v=!0;const w=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type&&!of(i.type,"camunda:errorEventDefinition")){const e={};null===n?n=[e]:n.push(e),o++}var L=w===o;if(o=b,null!==n&&(b?n.length=b:n=null),L){const e=o,a=o;let l=!1,p=null;const h=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.errorRef){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/4/then/oneOf/0/required",params:{missingProperty:"errorRef"},message:"should have required property 'errorRef'"};null===n?n=[e]:n.push(e),o++}if(h===o&&(l=!0,p=0),l)o=a,null!==n&&(a?n.length=a:n=null);else{const e={keyword:"oneOf",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/4/then/oneOf",params:{passingSchemas:p},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/scopes/"+r+"/properties/"+s+"/binding"&&(0!==i.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s+"/binding")||"/"!==i.dataPath[t+"/scopes/"+r+"/properties/"+s+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/4/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/4/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const a={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/4/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires errorRef"};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}v=L=e===o}if(!v){const e={keyword:"if",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/4/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.type){const e={keyword:"required",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/required",params:{missingProperty:"type"},message:"should have required property 'type'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.type){let e=i.type;if("string"!=typeof e){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/type/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if("property"!==e&&"camunda:property"!==e&&"camunda:inputParameter"!==e&&"camunda:outputParameter"!==e&&"camunda:in"!==e&&"camunda:out"!==e&&"camunda:in:businessKey"!==e&&"camunda:executionListener"!==e&&"camunda:field"!==e&&"camunda:errorEventDefinition"!==e){const e={keyword:"enum",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/type/enum",params:{allowedValues:tf.items.properties.binding.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const i=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/scopes/"+r+"/properties/"+s+"/binding/type"&&(0!==e.dataPath.indexOf(t+"/scopes/"+r+"/properties/"+s+"/binding/type")||"/"!==e.dataPath[t+"/scopes/"+r+"/properties/"+s+"/binding/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/properties/type".length]||(i.push(e),e.emUsed=!0);if(i.length){const a={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/type/errorMessage",params:{errors:i},message:"invalid property.binding type "+JSON.stringify(e)+"; must be any of { property, camunda:property, camunda:inputParameter, camunda:outputParameter, camunda:in, camunda:out, camunda:in:businessKey, camunda:executionListener, camunda:field, camunda:errorEventDefinition }"};null===n?n=[a]:n.push(a),o++}const a=[];for(const e of n)e.emUsed||a.push(e);n=a,o=a.length}}if(void 0!==i.name&&"string"!=typeof i.name){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/name",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/name/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.event&&"string"!=typeof i.event){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/event",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/event/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.scriptFormat&&"string"!=typeof i.scriptFormat){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/scriptFormat",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/scriptFormat/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.source&&"string"!=typeof i.source){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/source",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/source/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.target&&"string"!=typeof i.target){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/target",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/target/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.expression&&"boolean"!=typeof i.expression){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/expression",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/expression/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.variables){let e=i.variables;if("string"!=typeof e){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/variables",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/variables/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if("all"!==e&&"local"!==e){const e={keyword:"enum",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/variables",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/variables/enum",params:{allowedValues:tf.items.properties.binding.properties.variables.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}}if(void 0!==i.sourceExpression&&"string"!=typeof i.sourceExpression){const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding/sourceExpression",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/sourceExpression/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/1/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:[]},i={required:function(){return'missing binding for property "'+JSON.stringify(s)+'"'}};for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/scopes/"+r+"/properties/"+s&&o.keyword in e&&0===o.schemaPath.indexOf("#/definitions/properties/allOf/1/items")&&/^\/[^\/]*$/.test(o.schemaPath.slice(38))&&(e[o.keyword].push(o),o.emUsed=!0);for(const l in e)if(e[l].length){const a={keyword:"errorMessage",dataPath:t+"/scopes/"+r+"/properties/"+s,schemaPath:"#/definitions/properties/allOf/1/items/errorMessage",params:{errors:e[l]},message:l in i?i[l]():tf.items.errorMessage[l]};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r+"/properties",schemaPath:"#/definitions/properties/allOf/1/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/scopes/"+r,schemaPath:"#/properties/scopes/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const i={required:{type:[],properties:[]}},s={required:{properties:function(){return"invalid scope "+JSON.stringify(e&&e.type)+", missing properties=[]"}}};let a,l;for(const e of n)"errorMessage"!==e.keyword&&!e.emUsed&&e.dataPath===t+"/scopes/"+r&&e.keyword in i&&0===e.schemaPath.indexOf("#/properties/scopes/items")&&/^\/[^\/]*$/.test(e.schemaPath.slice(25))&&(a=nf[e.keyword],l=i[e.keyword][e.params[a]],l&&(l.push(e),e.emUsed=!0));for(const e in i)for(const a in i[e])if(l=i[e][a],l.length){const i=s[e]&&s[e][a],p={keyword:"errorMessage",dataPath:t+"/scopes/"+r,schemaPath:"#/properties/scopes/items/errorMessage",params:{errors:l},message:i?i():Yu.properties.scopes.items.errorMessage[e][a]};null===n?n=[p]:n.push(p),o++}const p=[];for(const e of n)e.emUsed||p.push(e);n=p,o=p.length}}}else{const e={keyword:"type",dataPath:t+"/scopes",schemaPath:"#/properties/scopes/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t,schemaPath:"#/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}return af.errors=n,0===o}function lf(e,{dataPath:t="",parentData:i,parentDataProperty:r,rootData:s=e}={}){let n=null,o=0;const a=o;let l=!1,p=null;const h=o;af(e,{dataPath:t,parentData:i,parentDataProperty:r,rootData:s})||(n=null===n?af.errors:n.concat(af.errors),o=n.length),(d=h===o)&&(l=!0,p=0);const c=o;if(Array.isArray(e)){const i=e.length;for(let r=0;r<i;r++)af(e[r],{dataPath:t+"/"+r,parentData:e,parentDataProperty:r,rootData:s})||(n=null===n?af.errors:n.concat(af.errors),o=n.length)}else{const e={keyword:"type",dataPath:t,schemaPath:"#/oneOf/1/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}var d;if((d=c===o)&&l?(l=!1,p=[p,1]):d&&(l=!0,p=1),l)o=a,null!==n&&(a?n.length=a:n=null);else{const e={keyword:"oneOf",dataPath:t,schemaPath:"#/oneOf",params:{passingSchemas:p},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}return lf.errors=n,0===o}var pf={exports:{}};pf.exports=Of,pf.exports.default=Of;const hf={type:"object",allOf:[{required:["name","id","appliesTo","properties"],properties:{name:{$id:"#/name",type:"string",description:"The name of the element template."},id:{$id:"#/id",type:"string",description:"The identifier of the element template."},description:{$id:"#/description",type:"string",description:"The description of the element template."},version:{$id:"#/version",type:"integer",description:"Optional version of the template. If you add a version to a template it will be considered unique based on its ID and version. Two templates can have the same ID if their version is different."},isDefault:{$id:"#/isDefault",type:"boolean",description:"Indicates whether the element template is a default template."},appliesTo:{$id:"#/appliesTo",type:"array",description:"List of BPMN types the template can be applied to.",default:[],items:{$id:"#/appliesTo/items",type:"string",pattern:"^[\\w\\d]+:[\\w\\d]+$",allOf:[{examples:["bpmn:Task","bpmn:ServiceTask","bpmn:SequenceFlow","bpmn:Process","bpmn:StartEvent","bpmn:Gateway"]}],errorMessage:{pattern:'invalid item for "appliesTo", should contain namespaced property, example: "bpmn:Task"'}}},elementType:{$id:"#/elementType",type:"object",description:"The BPMN type the element will be transformed into.",default:{},required:["value"],properties:{value:{$id:"#/elementType/value",type:"string",pattern:"^[\\w\\d]+:[\\w\\d]+$",allOf:[{examples:["bpmn:ServiceTask","bpmn:UserTask","bpmn:StartEvent","bpmn:ExclusiveGateway","bpmn:ParallelGateway"]}],errorMessage:{pattern:'invalid item for "elementType", should contain namespaced property, example: "bpmn:Task"'}}},errorMessage:{required:{value:"missing elementType value"}}},metadata:{$id:"#/metadata",type:"object",description:"Some custom properties for further configuration.",default:{}},entriesVisible:{$id:"#/entriesVisible",type:"boolean",description:"Select whether non-template entries are visible in the properties panel."},groups:{$id:"#/groups",type:"array",description:"Custom fields can be ordered together via groups.",allOf:[{examples:[[{id:"group-1",label:"My Group"}]]}],items:{$id:"#/groups/group",type:"object",default:{},required:["id","label"],properties:{id:{$id:"#/groups/group/id",type:"string",description:"The id of the custom group"},label:{$id:"#/groups/group/label",type:"string",description:"The label of the custom group"}},errorMessage:{required:{id:'missing id for group "${0#}"',label:'missing label for group "${0#}"'}}}},documentationRef:{$id:"#/documentationRef",type:"string",pattern:"^(https|http)://.*",errorMessage:{pattern:'Malformed documentation URL, must match "^(https|http)://.*"'}}},errorMessage:{required:{name:"missing template name",id:"missing template id",appliesTo:"missing appliesTo=[]",properties:"missing properties=[]"}}}],properties:{properties:{$ref:"#/definitions/properties",$id:"#/properties"},icon:{$id:"#/icon",type:"object",description:"Custom icon to be shown on the element",default:{},properties:{contents:{$id:"#/icon/contents",type:"string",description:"The URL of an icon.",pattern:"^(https?|data):.*",errorMessage:{pattern:"Malformed icon source, must be a valid HTTP(s) or data URL"}}},required:["contents"],errorMessage:{required:{contents:"missing icon contents"}}}}},cf={allOf:[{type:"array",description:"List of properties of the element template.",allOf:[{examples:[[{label:"Name",type:"String",binding:{type:"property",name:"name"}}]]}],items:{type:"object",default:{},allOf:[{if:{properties:{type:{const:"Dropdown"}},required:["type"]},then:{required:["choices"],errorMessage:'must provide choices=[] with "Dropdown" type'}}],properties:{id:{type:"string",description:"Unique identifier of the property."},value:{$id:"#/properties/property/value",type:["string","boolean"],description:"The value of a control field."},description:{$id:"#/properties/property/description",type:"string",description:"The description of a control field."},label:{$id:"#/properties/property/label",type:"string",description:"The label of a control field."},type:{$id:"#/properties/property/type",type:"string",description:"The type of a control field."},editable:{$id:"#/properties/property/editable",type:"boolean",description:"Indicates whether a control field is editable or not."},choices:{$id:"#/properties/property/choices",type:"array",description:"The choices for dropdown fields.",default:[],items:{$id:"#/properties/property/choices/item",type:"object",default:{},properties:{name:{$id:"#/properties/property/choices/item/name",type:"string",description:"The name of a choice."},value:{$id:"#/properties/property/choices/item/value",type:"string",description:"The value of a choice."}},required:["value","name"],errorMessage:{required:'{ name, value } must be specified for "Dropdown" choices'}}},constraints:{$id:"#/properties/property/constraints",type:"object",description:"The validation constraints of a control field.",allOf:[{examples:[{notEmpty:!0}]}],properties:{notEmpty:{$id:"#/properties/property/constraints/notEmpty",type:"boolean",description:"The control field must not be empty."},minLength:{$id:"#/properties/property/constraints/minLength",type:"number",description:"The minimal length of a control field value."},maxLength:{$id:"#/properties/property/constraints/maxLength",type:"number",description:"The maximal length for a control field value."},pattern:{$id:"#/properties/property/constraints/pattern",description:"A regular expression pattern for a constraint.",oneOf:[{type:"object",default:{},properties:{value:{$id:"#/properties/property/constraints/pattern/value",type:"string",description:"The regular expression of a pattern."},message:{$id:"#/properties/property/constraints/pattern/message",type:"string",description:"The validation message of a pattern."}}},{type:"string"}]}}},group:{$id:"#/properties/property/group",type:"string",description:"The custom group of a control field."},condition:{$id:"#/condition",type:"object",description:"Condition to activate the binding.",allOf:[{examples:[{type:"simple",property:"httpMethod",equals:"GET"},{type:"simple",property:"httpMethod",oneOf:["POST","PUT","DELETE"]}]}],required:["property"],properties:{type:{$id:"#/condition/type",const:"simple",description:"The type of the condition.",default:"simple"},property:{$id:"#/condition/property",type:"string",description:"The id of the property to check."}},oneOf:[{properties:{equals:{type:["string","number","boolean"]}},required:["equals"]},{properties:{oneOf:{type:"array",items:{type:["string","number"]}}},required:["oneOf"]}],errorMessage:{required:{property:"missing property name for condition"}}}}}},{$schema:"http://json-schema.org/draft-07/schema",type:"array",description:"List of properties of the element template.",items:{type:"object",default:{},required:["binding"],allOf:[{if:{properties:{binding:{properties:{type:{const:"property"}},required:["type"]}},required:["binding"]},then:{properties:{type:{enum:["String","Text","Hidden","Dropdown","Boolean"],errorMessage:'invalid property type ${0} for binding type "property"; must be any of { String, Text, Hidden, Dropdown, Boolean }'}}}},{if:{properties:{binding:{properties:{type:{enum:["zeebe:input","zeebe:output","zeebe:property","zeebe:taskHeader","zeebe:taskDefinition:type"]}},required:["type"]}},required:["binding"]},then:{properties:{type:{enum:["String","Text","Hidden","Dropdown"],errorMessage:"invalid property type ${0} for binding type ${1/binding/type}; must be any of { String, Text, Hidden, Dropdown }"}}}},{if:{properties:{optional:{const:!0}},required:["optional"]},then:{properties:{binding:{properties:{type:{enum:["zeebe:input","zeebe:output","zeebe:property"],errorMessage:"optional is not supported for binding type ${0}; must be any of { zeebe:input, zeebe:output, zeebe:property }"}},required:["type"]}}}},{if:{properties:{optional:{const:!0}},required:["optional"]},then:{properties:{constraints:{properties:{notEmpty:{const:!1,errorMessage:'optional is not allowed for truthy "notEmpty" constraint'}},required:["notEmpty"]}}}},{if:{properties:{feel:{not:{const:null}}},required:["feel"]},then:{properties:{type:{enum:["String","Text"],errorMessage:'feel is only supported for "String" and "Text" type'}},required:["type"]}}],properties:{binding:{$id:"#/properties/property/binding",type:"object",description:"Specifying how the property is mapped to BPMN or Zeebe extension elements and attributes.",required:["type"],allOf:[{if:{properties:{type:{enum:["property","zeebe:property","zeebe:input"]}},required:["type"]},then:{required:["name"],errorMessage:"property.binding ${0/type} requires name"}},{if:{properties:{type:{const:"zeebe:output"}},required:["type"]},then:{required:["source"],errorMessage:"property.binding ${0/type} requires source"}},{if:{properties:{type:{const:"zeebe:taskHeader"}},required:["type"]},then:{required:["key"],errorMessage:"property.binding ${0/type} requires key"}},{examples:[{type:"property",name:"name"},{type:"zeebe:input",name:"input"},{type:"zeebe:output",source:"output"},{type:"zeebe:property",name:"property"},{type:"zeebe:taskDefinition:type"},{type:"zeebe:taskHeader",key:"key"}]}],properties:{type:{$id:"#/properties/property/binding/type",type:"string",description:"The type of a property binding.",enum:["property","zeebe:taskDefinition:type","zeebe:input","zeebe:output","zeebe:property","zeebe:taskHeader"],errorMessage:"invalid property.binding type ${0}; must be any of { property, zeebe:taskDefinition:type, zeebe:input, zeebe:output, zeebe:property, zeebe:taskHeader }"},name:{$id:"#/properties/property/binding/name",type:"string",description:"The name of a property binding."},source:{$id:"#/properties/property/binding/source",type:"string",description:"The source value of a property binding (zeebe:output)."},key:{$id:"#/properties/property/binding/key",type:"string",description:"The key value of a property binding (zeebe:taskHeader)."}}},optional:{$id:"#/optional",type:"boolean",description:"Indicates whether a property is optional. Optional bindings do not persist empty values in the underlying BPMN 2.0 XML."},feel:{$id:"#/properties/property/feel",type:"string",default:null,description:"Indicates whether the property can be a feel expression",enum:[null,"optional","required"]}},errorMessage:{required:{binding:'missing binding for property "${0#}"'}}}}]},df=new RegExp("^[\\w\\d]+:[\\w\\d]+$","u"),uf=new RegExp("^(https|http)://.*","u"),ff=new RegExp("^(https?|data):.*","u"),mf={required:"missingProperty",dependencies:"property",dependentRequired:"property"},gf=Ku.exports;function yf(e,{dataPath:t="",parentData:i,parentDataProperty:r,rootData:s=e}={}){let n=null,o=0;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.name){const e={keyword:"required",dataPath:t,schemaPath:"#/allOf/0/required",params:{missingProperty:"name"},message:"should have required property 'name'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.id){const e={keyword:"required",dataPath:t,schemaPath:"#/allOf/0/required",params:{missingProperty:"id"},message:"should have required property 'id'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.appliesTo){const e={keyword:"required",dataPath:t,schemaPath:"#/allOf/0/required",params:{missingProperty:"appliesTo"},message:"should have required property 'appliesTo'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.properties){const e={keyword:"required",dataPath:t,schemaPath:"#/allOf/0/required",params:{missingProperty:"properties"},message:"should have required property 'properties'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.name&&"string"!=typeof e.name){const e={keyword:"type",dataPath:t+"/name",schemaPath:"#/allOf/0/properties/name/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.id&&"string"!=typeof e.id){const e={keyword:"type",dataPath:t+"/id",schemaPath:"#/allOf/0/properties/id/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.description&&"string"!=typeof e.description){const e={keyword:"type",dataPath:t+"/description",schemaPath:"#/allOf/0/properties/description/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.version){let i=e.version;if("number"!=typeof i||i%1||isNaN(i)){const e={keyword:"type",dataPath:t+"/version",schemaPath:"#/allOf/0/properties/version/type",params:{type:"integer"},message:"should be integer"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.isDefault&&"boolean"!=typeof e.isDefault){const e={keyword:"type",dataPath:t+"/isDefault",schemaPath:"#/allOf/0/properties/isDefault/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.appliesTo){let i=e.appliesTo;if(Array.isArray(i)){const e=i.length;for(let r=0;r<e;r++){let e=i[r];if("string"==typeof e){if(!df.test(e)){const e={keyword:"pattern",dataPath:t+"/appliesTo/"+r,schemaPath:"#/allOf/0/properties/appliesTo/items/pattern",params:{pattern:"^[\\w\\d]+:[\\w\\d]+$"},message:'should match pattern "^[\\w\\d]+:[\\w\\d]+$"'};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/appliesTo/"+r,schemaPath:"#/allOf/0/properties/appliesTo/items/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={pattern:[]},i={};for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/appliesTo/"+r&&o.keyword in e&&0===o.schemaPath.indexOf("#/allOf/0/properties/appliesTo/items")&&/^\/[^\/]*$/.test(o.schemaPath.slice(36))&&(e[o.keyword].push(o),o.emUsed=!0);for(const a in e)if(e[a].length){const s={keyword:"errorMessage",dataPath:t+"/appliesTo/"+r,schemaPath:"#/allOf/0/properties/appliesTo/items/errorMessage",params:{errors:e[a]},message:a in i?i[a]():hf.allOf[0].properties.appliesTo.items.errorMessage[a]};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}}}else{const e={keyword:"type",dataPath:t+"/appliesTo",schemaPath:"#/allOf/0/properties/appliesTo/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.elementType){let i=e.elementType;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.value){const e={keyword:"required",dataPath:t+"/elementType",schemaPath:"#/allOf/0/properties/elementType/required",params:{missingProperty:"value"},message:"should have required property 'value'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.value){let e=i.value;if("string"==typeof e){if(!df.test(e)){const e={keyword:"pattern",dataPath:t+"/elementType/value",schemaPath:"#/allOf/0/properties/elementType/properties/value/pattern",params:{pattern:"^[\\w\\d]+:[\\w\\d]+$"},message:'should match pattern "^[\\w\\d]+:[\\w\\d]+$"'};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/elementType/value",schemaPath:"#/allOf/0/properties/elementType/properties/value/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={pattern:[]},i={};for(const s of n)"errorMessage"!==s.keyword&&!s.emUsed&&s.dataPath===t+"/elementType/value"&&s.keyword in e&&0===s.schemaPath.indexOf("#/allOf/0/properties/elementType/properties/value")&&/^\/[^\/]*$/.test(s.schemaPath.slice(49))&&(e[s.keyword].push(s),s.emUsed=!0);for(const s in e)if(e[s].length){const r={keyword:"errorMessage",dataPath:t+"/elementType/value",schemaPath:"#/allOf/0/properties/elementType/properties/value/errorMessage",params:{errors:e[s]},message:s in i?i[s]():hf.allOf[0].properties.elementType.properties.value.errorMessage[s]};null===n?n=[r]:n.push(r),o++}const r=[];for(const t of n)t.emUsed||r.push(t);n=r,o=r.length}}}else{const e={keyword:"type",dataPath:t+"/elementType",schemaPath:"#/allOf/0/properties/elementType/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:{value:[]}},i={required:{}};let r,s;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/elementType"&&o.keyword in e&&0===o.schemaPath.indexOf("#/allOf/0/properties/elementType")&&/^\/[^\/]*$/.test(o.schemaPath.slice(32))&&(r=mf[o.keyword],s=e[o.keyword][o.params[r]],s&&(s.push(o),o.emUsed=!0));for(const l in e)for(const r in e[l])if(s=e[l][r],s.length){const e=i[l]&&i[l][r],a={keyword:"errorMessage",dataPath:t+"/elementType",schemaPath:"#/allOf/0/properties/elementType/errorMessage",params:{errors:s},message:e?e():hf.allOf[0].properties.elementType.errorMessage[l][r]};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}}if(void 0!==e.metadata){let i=e.metadata;if(!i||"object"!=typeof i||Array.isArray(i)){const e={keyword:"type",dataPath:t+"/metadata",schemaPath:"#/allOf/0/properties/metadata/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.entriesVisible&&"boolean"!=typeof e.entriesVisible){const e={keyword:"type",dataPath:t+"/entriesVisible",schemaPath:"#/allOf/0/properties/entriesVisible/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.groups){let i=e.groups;if(Array.isArray(i)){const e=i.length;for(let r=0;r<e;r++){let e=i[r];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.id){const e={keyword:"required",dataPath:t+"/groups/"+r,schemaPath:"#/allOf/0/properties/groups/items/required",params:{missingProperty:"id"},message:"should have required property 'id'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.label){const e={keyword:"required",dataPath:t+"/groups/"+r,schemaPath:"#/allOf/0/properties/groups/items/required",params:{missingProperty:"label"},message:"should have required property 'label'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.id&&"string"!=typeof e.id){const e={keyword:"type",dataPath:t+"/groups/"+r+"/id",schemaPath:"#/allOf/0/properties/groups/items/properties/id/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.label&&"string"!=typeof e.label){const e={keyword:"type",dataPath:t+"/groups/"+r+"/label",schemaPath:"#/allOf/0/properties/groups/items/properties/label/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/groups/"+r,schemaPath:"#/allOf/0/properties/groups/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:{id:[],label:[]}},i={required:{id:function(){return'missing id for group "'+JSON.stringify(r)+'"'},label:function(){return'missing label for group "'+JSON.stringify(r)+'"'}}};let s,a;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/groups/"+r&&o.keyword in e&&0===o.schemaPath.indexOf("#/allOf/0/properties/groups/items")&&/^\/[^\/]*$/.test(o.schemaPath.slice(33))&&(s=mf[o.keyword],a=e[o.keyword][o.params[s]],a&&(a.push(o),o.emUsed=!0));for(const p in e)for(const s in e[p])if(a=e[p][s],a.length){const e=i[p]&&i[p][s],l={keyword:"errorMessage",dataPath:t+"/groups/"+r,schemaPath:"#/allOf/0/properties/groups/items/errorMessage",params:{errors:a},message:e?e():hf.allOf[0].properties.groups.items.errorMessage[p][s]};null===n?n=[l]:n.push(l),o++}const l=[];for(const t of n)t.emUsed||l.push(t);n=l,o=l.length}}}else{const e={keyword:"type",dataPath:t+"/groups",schemaPath:"#/allOf/0/properties/groups/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.documentationRef){let i=e.documentationRef;if("string"==typeof i){if(!uf.test(i)){const e={keyword:"pattern",dataPath:t+"/documentationRef",schemaPath:"#/allOf/0/properties/documentationRef/pattern",params:{pattern:"^(https|http)://.*"},message:'should match pattern "^(https|http)://.*"'};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/documentationRef",schemaPath:"#/allOf/0/properties/documentationRef/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={pattern:[]},i={};for(const s of n)"errorMessage"!==s.keyword&&!s.emUsed&&s.dataPath===t+"/documentationRef"&&s.keyword in e&&0===s.schemaPath.indexOf("#/allOf/0/properties/documentationRef")&&/^\/[^\/]*$/.test(s.schemaPath.slice(37))&&(e[s.keyword].push(s),s.emUsed=!0);for(const s in e)if(e[s].length){const r={keyword:"errorMessage",dataPath:t+"/documentationRef",schemaPath:"#/allOf/0/properties/documentationRef/errorMessage",params:{errors:e[s]},message:s in i?i[s]():hf.allOf[0].properties.documentationRef.errorMessage[s]};null===n?n=[r]:n.push(r),o++}const r=[];for(const t of n)t.emUsed||r.push(t);n=r,o=r.length}}}if(o>0){const e={required:{name:[],id:[],appliesTo:[],properties:[]}},i={required:{}};let r,s;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t&&o.keyword in e&&0===o.schemaPath.indexOf("#/allOf/0")&&/^\/[^\/]*$/.test(o.schemaPath.slice(9))&&(r=mf[o.keyword],s=e[o.keyword][o.params[r]],s&&(s.push(o),o.emUsed=!0));for(const l in e)for(const r in e[l])if(s=e[l][r],s.length){const e=i[l]&&i[l][r],a={keyword:"errorMessage",dataPath:t,schemaPath:"#/allOf/0/errorMessage",params:{errors:s},message:e?e():hf.allOf[0].errorMessage[l][r]};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.properties){let i=e.properties;if(Array.isArray(i)){const e=i.length;for(let r=0;r<e;r++){let e=i[r];const s=o;let h=!0;const c=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.type&&!gf(e.type,"Dropdown")){const e={};null===n?n=[e]:n.push(e),o++}var a=c===o;if(o=s,null!==n&&(s?n.length=s:n=null),a){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0===e.choices){const e={keyword:"required",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/0/items/allOf/0/then/required",params:{missingProperty:"choices"},message:"should have required property 'choices'"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const s of n)"errorMessage"===s.keyword||s.emUsed||s.dataPath!==t+"/properties/"+r&&(0!==s.dataPath.indexOf(t+"/properties/"+r)||"/"!==s.dataPath[t+"/properties/"+r.length])||0!==s.schemaPath.indexOf("#/definitions/properties/allOf/0/items/allOf/0/then")||"/"!==s.schemaPath["#/definitions/properties/allOf/0/items/allOf/0/then".length]||(e.push(s),s.emUsed=!0);if(e.length){const i={keyword:"errorMessage",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/0/items/allOf/0/then/errorMessage",params:{errors:e},message:'must provide choices=[] with "Dropdown" type'};null===n?n=[i]:n.push(i),o++}const i=[];for(const t of n)t.emUsed||i.push(t);n=i,o=i.length}h=a=i===o}if(!h){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/0/items/allOf/0/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.id&&"string"!=typeof e.id){const e={keyword:"type",dataPath:t+"/properties/"+r+"/id",schemaPath:"#/definitions/properties/allOf/0/items/properties/id/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.value){let i=e.value;if("string"!=typeof i&&"boolean"!=typeof i){const e={keyword:"type",dataPath:t+"/properties/"+r+"/value",schemaPath:"#/definitions/properties/allOf/0/items/properties/value/type",params:{type:cf.allOf[0].items.properties.value.type},message:"should be string,boolean"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.description&&"string"!=typeof e.description){const e={keyword:"type",dataPath:t+"/properties/"+r+"/description",schemaPath:"#/definitions/properties/allOf/0/items/properties/description/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.label&&"string"!=typeof e.label){const e={keyword:"type",dataPath:t+"/properties/"+r+"/label",schemaPath:"#/definitions/properties/allOf/0/items/properties/label/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.type&&"string"!=typeof e.type){const e={keyword:"type",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/0/items/properties/type/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.editable&&"boolean"!=typeof e.editable){const e={keyword:"type",dataPath:t+"/properties/"+r+"/editable",schemaPath:"#/definitions/properties/allOf/0/items/properties/editable/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.choices){let i=e.choices;if(Array.isArray(i)){const e=i.length;for(let s=0;s<e;s++){let e=i[s];if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.value){const e={keyword:"required",dataPath:t+"/properties/"+r+"/choices/"+s,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/required",params:{missingProperty:"value"},message:"should have required property 'value'"};null===n?n=[e]:n.push(e),o++}if(void 0===e.name){const e={keyword:"required",dataPath:t+"/properties/"+r+"/choices/"+s,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/required",params:{missingProperty:"name"},message:"should have required property 'name'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.name&&"string"!=typeof e.name){const e={keyword:"type",dataPath:t+"/properties/"+r+"/choices/"+s+"/name",schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/properties/name/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.value&&"string"!=typeof e.value){const e={keyword:"type",dataPath:t+"/properties/"+r+"/choices/"+s+"/value",schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/properties/value/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/choices/"+s,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:[]},i={};for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/properties/"+r+"/choices/"+s&&o.keyword in e&&0===o.schemaPath.indexOf("#/definitions/properties/allOf/0/items/properties/choices/items")&&/^\/[^\/]*$/.test(o.schemaPath.slice(63))&&(e[o.keyword].push(o),o.emUsed=!0);for(const l in e)if(e[l].length){const a={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/choices/"+s,schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/items/errorMessage",params:{errors:e[l]},message:l in i?i[l]():cf.allOf[0].items.properties.choices.items.errorMessage[l]};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/choices",schemaPath:"#/definitions/properties/allOf/0/items/properties/choices/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.constraints){let i=e.constraints;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0!==i.notEmpty&&"boolean"!=typeof i.notEmpty){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/notEmpty",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/notEmpty/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.minLength&&"number"!=typeof i.minLength){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/minLength",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/minLength/type",params:{type:"number"},message:"should be number"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.maxLength&&"number"!=typeof i.maxLength){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/maxLength",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/maxLength/type",params:{type:"number"},message:"should be number"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.pattern){let e=i.pattern;const s=o;let a=!1,p=null;const h=o;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0!==e.value&&"string"!=typeof e.value){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/pattern/value",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/0/properties/value/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.message&&"string"!=typeof e.message){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/pattern/message",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/0/properties/message/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/pattern",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/0/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}(l=h===o)&&(a=!0,p=0);const c=o;if("string"!=typeof e){const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints/pattern",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf/1/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}var l;if((l=c===o)&&a?(a=!1,p=[p,1]):l&&(a=!0,p=1),a)o=s,null!==n&&(s?n.length=s:n=null);else{const e={keyword:"oneOf",dataPath:t+"/properties/"+r+"/constraints/pattern",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/properties/pattern/oneOf",params:{passingSchemas:p},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/constraints",schemaPath:"#/definitions/properties/allOf/0/items/properties/constraints/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.group&&"string"!=typeof e.group){const e={keyword:"type",dataPath:t+"/properties/"+r+"/group",schemaPath:"#/definitions/properties/allOf/0/items/properties/group/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.condition){let i=e.condition;const s=o;let a=!1,l=null;const h=o;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.equals){const e={keyword:"required",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/0/required",params:{missingProperty:"equals"},message:"should have required property 'equals'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.equals){let e=i.equals;if("string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e){const e={keyword:"type",dataPath:t+"/properties/"+r+"/condition/equals",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/0/properties/equals/type",params:{type:cf.allOf[0].items.properties.condition.oneOf[0].properties.equals.type},message:"should be string,number,boolean"};null===n?n=[e]:n.push(e),o++}}}(p=h===o)&&(a=!0,l=0);const c=o;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.oneOf){const e={keyword:"required",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/1/required",params:{missingProperty:"oneOf"},message:"should have required property 'oneOf'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.oneOf){let e=i.oneOf;if(Array.isArray(e)){const i=e.length;for(let s=0;s<i;s++){let i=e[s];if("string"!=typeof i&&"number"!=typeof i){const e={keyword:"type",dataPath:t+"/properties/"+r+"/condition/oneOf/"+s,schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/1/properties/oneOf/items/type",params:{type:cf.allOf[0].items.properties.condition.oneOf[1].properties.oneOf.items.type},message:"should be string,number"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/condition/oneOf",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf/1/properties/oneOf/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}}var p;if((p=c===o)&&a?(a=!1,l=[l,1]):p&&(a=!0,l=1),a)o=s,null!==n&&(s?n.length=s:n=null);else{const e={keyword:"oneOf",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/oneOf",params:{passingSchemas:l},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.property){const e={keyword:"required",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/required",params:{missingProperty:"property"},message:"should have required property 'property'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.type&&!gf(i.type,"simple")){const e={keyword:"const",dataPath:t+"/properties/"+r+"/condition/type",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/properties/type/const",params:{allowedValue:"simple"},message:"should be equal to constant"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.property&&"string"!=typeof i.property){const e={keyword:"type",dataPath:t+"/properties/"+r+"/condition/property",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/properties/property/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:{property:[]}},i={required:{}};let s,a;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/properties/"+r+"/condition"&&o.keyword in e&&0===o.schemaPath.indexOf("#/definitions/properties/allOf/0/items/properties/condition")&&/^\/[^\/]*$/.test(o.schemaPath.slice(59))&&(s=mf[o.keyword],a=e[o.keyword][o.params[s]],a&&(a.push(o),o.emUsed=!0));for(const p in e)for(const s in e[p])if(a=e[p][s],a.length){const e=i[p]&&i[p][s],l={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/condition",schemaPath:"#/definitions/properties/allOf/0/items/properties/condition/errorMessage",params:{errors:a},message:e?e():cf.allOf[0].items.properties.condition.errorMessage[p][s]};null===n?n=[l]:n.push(l),o++}const l=[];for(const t of n)t.emUsed||l.push(t);n=l,o=l.length}}}else{const e={keyword:"type",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/0/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/properties",schemaPath:"#/definitions/properties/allOf/0/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}if(Array.isArray(i)){const e=i.length;for(let r=0;r<e;r++){let e=i[r];const s=o;let a=!0;const l=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.binding){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.binding){let t=e.binding;if(t&&"object"==typeof t&&!Array.isArray(t))if(void 0===t.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==t.type&&!gf(t.type,"property")){const e={};null===n?n=[e]:n.push(e),o++}}var h=l===o;if(o=s,null!==n&&(s?n.length=s:n=null),h){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.type){let i=e.type;if("String"!==i&&"Text"!==i&&"Hidden"!==i&&"Dropdown"!==i&&"Boolean"!==i){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/0/then/properties/type/enum",params:{allowedValues:cf.allOf[1].items.allOf[0].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/properties/"+r+"/type"&&(0!==i.dataPath.indexOf(t+"/properties/"+r+"/type")||"/"!==i.dataPath[t+"/properties/"+r+"/type".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/0/then/properties/type")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/allOf/0/then/properties/type".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/0/then/properties/type/errorMessage",params:{errors:e},message:"invalid property type "+JSON.stringify(i)+' for binding type "property"; must be any of { String, Text, Hidden, Dropdown, Boolean }'};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}}a=h=i===o}if(!a){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/allOf/0/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const p=o;let O=!0;const b=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.binding){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.binding){let t=e.binding;if(t&&"object"==typeof t&&!Array.isArray(t))if(void 0===t.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==t.type){let e=t.type;if("zeebe:input"!==e&&"zeebe:output"!==e&&"zeebe:property"!==e&&"zeebe:taskHeader"!==e&&"zeebe:taskDefinition:type"!==e){const e={};null===n?n=[e]:n.push(e),o++}}}var c=b===o;if(o=p,null!==n&&(p?n.length=p:n=null),c){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.type){let i=e.type;if("String"!==i&&"Text"!==i&&"Hidden"!==i&&"Dropdown"!==i){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/1/then/properties/type/enum",params:{allowedValues:cf.allOf[1].items.allOf[1].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const s=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/properties/"+r+"/type"&&(0!==e.dataPath.indexOf(t+"/properties/"+r+"/type")||"/"!==e.dataPath[t+"/properties/"+r+"/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/1/then/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/allOf/1/then/properties/type".length]||(s.push(e),e.emUsed=!0);if(s.length){const a={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/1/then/properties/type/errorMessage",params:{errors:s},message:"invalid property type "+JSON.stringify(i)+" for binding type "+JSON.stringify(e&&e.binding&&e.binding.type)+"; must be any of { String, Text, Hidden, Dropdown }"};null===n?n=[a]:n.push(a),o++}const a=[];for(const e of n)e.emUsed||a.push(e);n=a,o=a.length}}O=c=i===o}if(!O){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/allOf/1/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const v=o;let w=!0;const P=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.optional){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.optional&&!gf(e.optional,!0)){const e={};null===n?n=[e]:n.push(e),o++}var d=P===o;if(o=v,null!==n&&(v?n.length=v:n=null),d){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.binding){let i=e.binding;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.type){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/allOf/2/then/properties/binding/required",params:{missingProperty:"type"},message:"should have required property 'type'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.type){let e=i.type;if("zeebe:input"!==e&&"zeebe:output"!==e&&"zeebe:property"!==e){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/2/then/properties/binding/properties/type/enum",params:{allowedValues:cf.allOf[1].items.allOf[2].then.properties.binding.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const i=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/properties/"+r+"/binding/type"&&(0!==e.dataPath.indexOf(t+"/properties/"+r+"/binding/type")||"/"!==e.dataPath[t+"/properties/"+r+"/binding/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/2/then/properties/binding/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/allOf/2/then/properties/binding/properties/type".length]||(i.push(e),e.emUsed=!0);if(i.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/2/then/properties/binding/properties/type/errorMessage",params:{errors:i},message:"optional is not supported for binding type "+JSON.stringify(e)+"; must be any of { zeebe:input, zeebe:output, zeebe:property }"};null===n?n=[s]:n.push(s),o++}const s=[];for(const e of n)e.emUsed||s.push(e);n=s,o=s.length}}}}w=d=i===o}if(!w){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/allOf/2/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const k=o;let x=!0;const S=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.optional){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.optional&&!gf(e.optional,!0)){const e={};null===n?n=[e]:n.push(e),o++}var u=S===o;if(o=k,null!==n&&(k?n.length=k:n=null),u){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)&&void 0!==e.constraints){let i=e.constraints;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.notEmpty){const e={keyword:"required",dataPath:t+"/properties/"+r+"/constraints",schemaPath:"#/definitions/properties/allOf/1/items/allOf/3/then/properties/constraints/required",params:{missingProperty:"notEmpty"},message:"should have required property 'notEmpty'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.notEmpty){if(!gf(i.notEmpty,!1)){const e={keyword:"const",dataPath:t+"/properties/"+r+"/constraints/notEmpty",schemaPath:"#/definitions/properties/allOf/1/items/allOf/3/then/properties/constraints/properties/notEmpty/const",params:{allowedValue:!1},message:"should be equal to constant"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const s of n)"errorMessage"===s.keyword||s.emUsed||s.dataPath!==t+"/properties/"+r+"/constraints/notEmpty"&&(0!==s.dataPath.indexOf(t+"/properties/"+r+"/constraints/notEmpty")||"/"!==s.dataPath[t+"/properties/"+r+"/constraints/notEmpty".length])||0!==s.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/3/then/properties/constraints/properties/notEmpty")||"/"!==s.schemaPath["#/definitions/properties/allOf/1/items/allOf/3/then/properties/constraints/properties/notEmpty".length]||(e.push(s),s.emUsed=!0);if(e.length){const i={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/constraints/notEmpty",schemaPath:"#/definitions/properties/allOf/1/items/allOf/3/then/properties/constraints/properties/notEmpty/errorMessage",params:{errors:e},message:'optional is not allowed for truthy "notEmpty" constraint'};null===n?n=[i]:n.push(i),o++}const i=[];for(const t of n)t.emUsed||i.push(t);n=i,o=i.length}}}}x=u=i===o}if(!x){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/allOf/3/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const _=o;let A=!0;const q=o;if(e&&"object"==typeof e&&!Array.isArray(e))if(void 0===e.feel){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==e.feel){const t=o,i=o;if(!gf(e.feel,cf.allOf[1].items.allOf[4].if.properties.feel.not.const)){const e={};null===n?n=[e]:n.push(e),o++}if(i===o){const e={};null===n?n=[e]:n.push(e),o++}else o=t,null!==n&&(t?n.length=t:n=null)}var f=q===o;if(o=_,null!==n&&(_?n.length=_:n=null),f){const i=o;if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.type){const e={keyword:"required",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/allOf/4/then/required",params:{missingProperty:"type"},message:"should have required property 'type'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.type){let i=e.type;if("String"!==i&&"Text"!==i){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/4/then/properties/type/enum",params:{allowedValues:cf.allOf[1].items.allOf[4].then.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const s of n)"errorMessage"===s.keyword||s.emUsed||s.dataPath!==t+"/properties/"+r+"/type"&&(0!==s.dataPath.indexOf(t+"/properties/"+r+"/type")||"/"!==s.dataPath[t+"/properties/"+r+"/type".length])||0!==s.schemaPath.indexOf("#/definitions/properties/allOf/1/items/allOf/4/then/properties/type")||"/"!==s.schemaPath["#/definitions/properties/allOf/1/items/allOf/4/then/properties/type".length]||(e.push(s),s.emUsed=!0);if(e.length){const i={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/type",schemaPath:"#/definitions/properties/allOf/1/items/allOf/4/then/properties/type/errorMessage",params:{errors:e},message:'feel is only supported for "String" and "Text" type'};null===n?n=[i]:n.push(i),o++}const i=[];for(const t of n)t.emUsed||i.push(t);n=i,o=i.length}}}A=f=i===o}if(!A){const e={keyword:"if",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/allOf/4/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}if(e&&"object"==typeof e&&!Array.isArray(e)){if(void 0===e.binding){const e={keyword:"required",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/required",params:{missingProperty:"binding"},message:"should have required property 'binding'"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.binding){let i=e.binding;const s=o;let a=!0;const l=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type){let e=i.type;if("property"!==e&&"zeebe:property"!==e&&"zeebe:input"!==e){const e={};null===n?n=[e]:n.push(e),o++}}var m=l===o;if(o=s,null!==n&&(s?n.length=s:n=null),m){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.name){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then/required",params:{missingProperty:"name"},message:"should have required property 'name'"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/properties/"+r+"/binding"&&(0!==i.dataPath.indexOf(t+"/properties/"+r+"/binding")||"/"!==i.dataPath[t+"/properties/"+r+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/0/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires name"};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}a=m=e===o}if(!a){const e={keyword:"if",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/0/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const p=o;let h=!0;const c=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type&&!gf(i.type,"zeebe:output")){const e={};null===n?n=[e]:n.push(e),o++}var g=c===o;if(o=p,null!==n&&(p?n.length=p:n=null),g){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.source){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then/required",params:{missingProperty:"source"},message:"should have required property 'source'"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/properties/"+r+"/binding"&&(0!==i.dataPath.indexOf(t+"/properties/"+r+"/binding")||"/"!==i.dataPath[t+"/properties/"+r+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/1/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires source"};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}h=g=e===o}if(!h){const e={keyword:"if",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/1/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}const d=o;let u=!0;const f=o;if(i&&"object"==typeof i&&!Array.isArray(i))if(void 0===i.type){const e={};null===n?n=[e]:n.push(e),o++}else if(void 0!==i.type&&!gf(i.type,"zeebe:taskHeader")){const e={};null===n?n=[e]:n.push(e),o++}var y=f===o;if(o=d,null!==n&&(d?n.length=d:n=null),y){const e=o;if(i&&"object"==typeof i&&!Array.isArray(i)&&void 0===i.key){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then/required",params:{missingProperty:"key"},message:"should have required property 'key'"};null===n?n=[e]:n.push(e),o++}if(o>0){const e=[];for(const i of n)"errorMessage"===i.keyword||i.emUsed||i.dataPath!==t+"/properties/"+r+"/binding"&&(0!==i.dataPath.indexOf(t+"/properties/"+r+"/binding")||"/"!==i.dataPath[t+"/properties/"+r+"/binding".length])||0!==i.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then")||"/"!==i.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then".length]||(e.push(i),i.emUsed=!0);if(e.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/then/errorMessage",params:{errors:e},message:"property.binding "+JSON.stringify(i&&i.type)+" requires key"};null===n?n=[s]:n.push(s),o++}const s=[];for(const t of n)t.emUsed||s.push(t);n=s,o=s.length}u=y=e===o}if(!u){const e={keyword:"if",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/allOf/2/if",params:{failingKeyword:"then"},message:'should match "then" schema'};null===n?n=[e]:n.push(e),o++}if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.type){const e={keyword:"required",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/required",params:{missingProperty:"type"},message:"should have required property 'type'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.type){let e=i.type;if("string"!=typeof e){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/type/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if("property"!==e&&"zeebe:taskDefinition:type"!==e&&"zeebe:input"!==e&&"zeebe:output"!==e&&"zeebe:property"!==e&&"zeebe:taskHeader"!==e){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/type/enum",params:{allowedValues:cf.allOf[1].items.properties.binding.properties.type.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}if(o>0){const i=[];for(const e of n)"errorMessage"===e.keyword||e.emUsed||e.dataPath!==t+"/properties/"+r+"/binding/type"&&(0!==e.dataPath.indexOf(t+"/properties/"+r+"/binding/type")||"/"!==e.dataPath[t+"/properties/"+r+"/binding/type".length])||0!==e.schemaPath.indexOf("#/definitions/properties/allOf/1/items/properties/binding/properties/type")||"/"!==e.schemaPath["#/definitions/properties/allOf/1/items/properties/binding/properties/type".length]||(i.push(e),e.emUsed=!0);if(i.length){const s={keyword:"errorMessage",dataPath:t+"/properties/"+r+"/binding/type",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/type/errorMessage",params:{errors:i},message:"invalid property.binding type "+JSON.stringify(e)+"; must be any of { property, zeebe:taskDefinition:type, zeebe:input, zeebe:output, zeebe:property, zeebe:taskHeader }"};null===n?n=[s]:n.push(s),o++}const s=[];for(const e of n)e.emUsed||s.push(e);n=s,o=s.length}}if(void 0!==i.name&&"string"!=typeof i.name){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/name",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/name/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.source&&"string"!=typeof i.source){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/source",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/source/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.key&&"string"!=typeof i.key){const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding/key",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/properties/key/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/properties/"+r+"/binding",schemaPath:"#/definitions/properties/allOf/1/items/properties/binding/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.optional&&"boolean"!=typeof e.optional){const e={keyword:"type",dataPath:t+"/properties/"+r+"/optional",schemaPath:"#/definitions/properties/allOf/1/items/properties/optional/type",params:{type:"boolean"},message:"should be boolean"};null===n?n=[e]:n.push(e),o++}if(void 0!==e.feel){let i=e.feel;if("string"!=typeof i){const e={keyword:"type",dataPath:t+"/properties/"+r+"/feel",schemaPath:"#/definitions/properties/allOf/1/items/properties/feel/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(null!==i&&"optional"!==i&&"required"!==i){const e={keyword:"enum",dataPath:t+"/properties/"+r+"/feel",schemaPath:"#/definitions/properties/allOf/1/items/properties/feel/enum",params:{allowedValues:cf.allOf[1].items.properties.feel.enum},message:"should be equal to one of the allowed values"};null===n?n=[e]:n.push(e),o++}}}else{const e={keyword:"type",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:{binding:[]}},i={required:{binding:function(){return'missing binding for property "'+JSON.stringify(r)+'"'}}};let s,a;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/properties/"+r&&o.keyword in e&&0===o.schemaPath.indexOf("#/definitions/properties/allOf/1/items")&&/^\/[^\/]*$/.test(o.schemaPath.slice(38))&&(s=mf[o.keyword],a=e[o.keyword][o.params[s]],a&&(a.push(o),o.emUsed=!0));for(const p in e)for(const s in e[p])if(a=e[p][s],a.length){const e=i[p]&&i[p][s],l={keyword:"errorMessage",dataPath:t+"/properties/"+r,schemaPath:"#/definitions/properties/allOf/1/items/errorMessage",params:{errors:a},message:e?e():cf.allOf[1].items.errorMessage[p][s]};null===n?n=[l]:n.push(l),o++}const l=[];for(const t of n)t.emUsed||l.push(t);n=l,o=l.length}}}else{const e={keyword:"type",dataPath:t+"/properties",schemaPath:"#/definitions/properties/allOf/1/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}}if(void 0!==e.icon){let i=e.icon;if(i&&"object"==typeof i&&!Array.isArray(i)){if(void 0===i.contents){const e={keyword:"required",dataPath:t+"/icon",schemaPath:"#/properties/icon/required",params:{missingProperty:"contents"},message:"should have required property 'contents'"};null===n?n=[e]:n.push(e),o++}if(void 0!==i.contents){let e=i.contents;if("string"==typeof e){if(!ff.test(e)){const e={keyword:"pattern",dataPath:t+"/icon/contents",schemaPath:"#/properties/icon/properties/contents/pattern",params:{pattern:"^(https?|data):.*"},message:'should match pattern "^(https?|data):.*"'};null===n?n=[e]:n.push(e),o++}}else{const e={keyword:"type",dataPath:t+"/icon/contents",schemaPath:"#/properties/icon/properties/contents/type",params:{type:"string"},message:"should be string"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={pattern:[]},i={};for(const s of n)"errorMessage"!==s.keyword&&!s.emUsed&&s.dataPath===t+"/icon/contents"&&s.keyword in e&&0===s.schemaPath.indexOf("#/properties/icon/properties/contents")&&/^\/[^\/]*$/.test(s.schemaPath.slice(37))&&(e[s.keyword].push(s),s.emUsed=!0);for(const s in e)if(e[s].length){const r={keyword:"errorMessage",dataPath:t+"/icon/contents",schemaPath:"#/properties/icon/properties/contents/errorMessage",params:{errors:e[s]},message:s in i?i[s]():hf.properties.icon.properties.contents.errorMessage[s]};null===n?n=[r]:n.push(r),o++}const r=[];for(const t of n)t.emUsed||r.push(t);n=r,o=r.length}}}else{const e={keyword:"type",dataPath:t+"/icon",schemaPath:"#/properties/icon/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}if(o>0){const e={required:{contents:[]}},i={required:{}};let r,s;for(const o of n)"errorMessage"!==o.keyword&&!o.emUsed&&o.dataPath===t+"/icon"&&o.keyword in e&&0===o.schemaPath.indexOf("#/properties/icon")&&/^\/[^\/]*$/.test(o.schemaPath.slice(17))&&(r=mf[o.keyword],s=e[o.keyword][o.params[r]],s&&(s.push(o),o.emUsed=!0));for(const l in e)for(const r in e[l])if(s=e[l][r],s.length){const e=i[l]&&i[l][r],a={keyword:"errorMessage",dataPath:t+"/icon",schemaPath:"#/properties/icon/errorMessage",params:{errors:s},message:e?e():hf.properties.icon.errorMessage[l][r]};null===n?n=[a]:n.push(a),o++}const a=[];for(const t of n)t.emUsed||a.push(t);n=a,o=a.length}}}else{const e={keyword:"type",dataPath:t,schemaPath:"#/type",params:{type:"object"},message:"should be object"};null===n?n=[e]:n.push(e),o++}return yf.errors=n,0===o}function Of(e,{dataPath:t="",parentData:i,parentDataProperty:r,rootData:s=e}={}){let n=null,o=0;const a=o;let l=!1,p=null;const h=o;yf(e,{dataPath:t,parentData:i,parentDataProperty:r,rootData:s})||(n=null===n?yf.errors:n.concat(yf.errors),o=n.length),(d=h===o)&&(l=!0,p=0);const c=o;if(Array.isArray(e)){const i=e.length;for(let r=0;r<i;r++)yf(e[r],{dataPath:t+"/"+r,parentData:e,parentDataProperty:r,rootData:s})||(n=null===n?yf.errors:n.concat(yf.errors),o=n.length)}else{const e={keyword:"type",dataPath:t,schemaPath:"#/oneOf/1/type",params:{type:"array"},message:"should be array"};null===n?n=[e]:n.push(e),o++}var d;if((d=c===o)&&l?(l=!1,p=[p,1]):d&&(l=!0,p=1),l)o=a,null!==n&&(a?n.length=a:n=null);else{const e={keyword:"oneOf",dataPath:t,schemaPath:"#/oneOf",params:{passingSchemas:p},message:"should match exactly one schema in oneOf"};null===n?n=[e]:n.push(e),o++}return Of.errors=n,0===o}export{qt as C,fe as F,ut as G,Pt as L,W as N,Ot as P,Ke as R,tu as S,cu as T,S as a,du as b,d as c,de as d,$t as e,iu as f,u as g,Yd as h,mu as i,Fu as j,lu as k,ae as l,au as m,bt as n,Ze as o,q as p,G as q,su as r,f as s,ht as u,pe as y};
