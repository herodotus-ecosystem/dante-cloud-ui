!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue"),require("nanoid"),require("lodash-es"),require("quasar")):"function"==typeof define&&define.amd?define(["exports","vue","nanoid","lodash-es","quasar"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@herodotus-cloud/form-engine"]={},e.vue,e.nanoid,e.LodashEs,e.quasar)}(this,function(e,t,n,a,m){"use strict";const l=(e,n,a)=>e.map(e=>{const m=e.children?e.children:[],s=e.models?e.models:{};let o={};return s&&(o=((e,t,n)=>{let a={};return Object.keys(e).forEach(e=>{const m=((e,t,n)=>{const a=(e=>"onUpdate:"+e)(e),m=(e=>"update:"+e)(e),l={};return l[e]=t[e],l[a]=e=>{n.emit(m,e)},{...l}})(e,t,n);a=Object.assign(a,m)}),a})(s,n,a)),e.children?t.h(t.resolveComponent(e.tag),{...e.attrs,...o},()=>l(m,n,a)):t.h(t.resolveComponent(e.tag),{...e.attrs,...o},e.text?()=>e.text:()=>{})}),s={TEXT_FIELD:{name:"TEXT_FIELD",schema:{title:"单行文本",tag:"q-input",attrs:{outlined:!0,"bottom-slots":!0,label:"单行文本",type:"text"},models:{modelValue:{name:"",type:"String"}}}},TEXT_AREA:{name:"TEXT_AREA",schema:{title:"多行文本",tag:"q-input",attrs:{outlined:!0,"bottom-slots":!0,label:"多行文本",type:"textarea"},models:{modelValue:{name:"",type:"String"}}}},PASSWORD:{name:"PASSWORD",schema:{title:"密码输入",tag:"q-input",attrs:{filled:!0,label:"密码输入",type:"password"},models:{modelValue:{name:"",type:"String"}}}},DATE_PICKER:{name:"DATE_PICKER",schema:{title:"日期选择",tag:"q-input",attrs:{filled:!0,label:"日期选择","stack-label":!0,type:"date"},models:{modelValue:{name:"",type:"String"}}}},TIME_PICKER:{name:"TIME_PICKER",schema:{title:"时间选择",tag:"q-input",attrs:{filled:!0,label:"时间选择","stack-label":!0,type:"time"},models:{modelValue:{name:"",type:"String"}}}},SLIDER:{name:"SLIDER",schema:{title:"滑块",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{modelValue:{name:"",type:"String"}}}},RANGE_SLIDER:{name:"RANGE_SLIDER",schema:{title:"范围滑块",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{modelValue:{name:"",type:"String"}}}},CHECKBOX:{name:"CHECKBOX",schema:{title:"复选框",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{modelValue:{name:"",type:"String"}}}},SWITCHS:{name:"SWITCHS",schema:{title:"开关",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{modelValue:{name:"",type:"String"}}}},SELECT_SINGLE:{name:"SELECT_SINGLE",schema:{title:"单项下拉",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}},COMBOBOX:{name:"COMBOBOX",schema:{title:"组合框",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}},COLOR_PICKER:{name:"COLOR_PICKER",schema:{title:"颜色选择",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}},RADIO:{name:"RADIO",schema:{title:"单选框组",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}},FILE_INPUT:{name:"FILE_INPUT",schema:{title:"上传",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}},IMAGES:{name:"IMAGES",schema:{title:"图片",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}}},o=[{title:"输入型组件",list:[{title:s.TEXT_FIELD.schema.title,icon:"mdi-form-textbox",name:"TextField",document:"https://quasar.dev/vue-components/input",schemaName:s.TEXT_FIELD.name},{title:s.TEXT_AREA.schema.title,icon:"mdi-form-textarea",name:"TextArea",document:"https://quasar.dev/vue-components/input",schemaName:s.TEXT_AREA.name},{title:s.PASSWORD.schema.title,icon:"mdi-form-textbox-password",name:"Password",document:"https://quasar.dev/vue-components/input",schemaName:s.PASSWORD.name}]},{title:"选择型组件",list:[{title:s.DATE_PICKER.schema.title,icon:"mdi-calendar",name:"Date",document:"https://quasar.dev/vue-components/input",schemaName:s.DATE_PICKER.name},{title:s.TIME_PICKER.schema.title,icon:"mdi-clock-outline",name:"Time",document:"https://quasar.dev/vue-components/input",schemaName:s.TIME_PICKER.name},{title:s.SLIDER.schema.title,icon:"mdi-tune-variant",name:"Slider",document:"https://vuetifyjs.com/zh-Hans/components/sliders/",schemaName:s.SLIDER.name},{title:s.RANGE_SLIDER.schema.title,icon:"mdi-valve-closed",name:"Range_Slider",document:"https://vuetifyjs.com/zh-Hans/components/sliders/",schemaName:s.RANGE_SLIDER.name},{title:s.CHECKBOX.schema.title,icon:"mdi-checkbox-marked",name:"Checkbox",document:"https://vuetifyjs.com/zh-Hans/components/checkboxes/",schemaName:s.CHECKBOX.name},{title:s.SWITCHS.schema.title,icon:"mdi-toggle-switch",name:"Switch",document:"https://vuetifyjs.com/zh-Hans/components/switches/",schemaName:s.SWITCHS.name},{title:s.SELECT_SINGLE.schema.title,icon:"mdi-form-dropdown",name:"Select",document:"https://vuetifyjs.com/zh-Hans/components/selects/",schemaName:s.SELECT_SINGLE.name},{title:s.COMBOBOX.schema.title,icon:"mdi-vector-difference-ab",name:"Combobox",document:"https://vuetifyjs.com/zh-Hans/components/combobox/",schemaName:s.COMBOBOX.name},{title:s.RADIO.schema.title,icon:"mdi-checkbox-marked-circle",name:"Select",document:"https://vuetifyjs.com/zh-Hans/components/selection-controls/",schemaName:s.RADIO.name},{title:s.COLOR_PICKER.schema.title,icon:"mdi-calendar",name:"Select",document:"https://vuetifyjs.com/zh-Hans/components/color-pickers/",schemaName:s.COLOR_PICKER.name},{title:s.FILE_INPUT.schema.title,icon:"mdi-calendar",name:"Select",document:"https://vuetifyjs.com/zh-Hans/components/file-inputs/",schemaName:s.FILE_INPUT.name},{title:s.IMAGES.schema.title,icon:"mdi-file-image",name:"Image",document:"https://vuetifyjs.com/zh-Hans/components/images/",schemaName:s.IMAGES.name}]}];class ElementUtilities{static instance=new ElementUtilities;constructor(){}static getInstance(){return this.instance}generateShortId(){return n.nanoid()}getDefinition(e){return s[e]}setIdentityValues(e,t){const n=t+"_"+this.generateShortId();e.id=n,e.config.formId=n,e.config.renderKey=+new Date}setElementValues(e,t,n){const m={id:"",config:{},schema:{}};return this.setIdentityValues(m,t),m.config.name=t,m.config.panel=n,m.schema=a.cloneDeep(e),m}create(e){const t=this.getDefinition(e.schemaName),n=t.schema,a=t.name,m=e.name;return this.setElementValues(n,m,a)}clone(e){const t=a.cloneDeep(e);return this.setIdentityValues(t,e.config.name),t}}const i=ElementUtilities.getInstance(),c=t.defineComponent({name:"HRendererEngine",props:{modelValue:{type:[String,Number,Array,Object]},schemas:{type:Array,default:()=>[]}},setup(e,t){const n=e.schemas;return()=>l(n,e,t)}});const d=((e,t)=>{const n=e.__vccOpts||e;for(const[a,m]of t)n[a]=m;return n})(t.defineComponent({name:"HRendererForm",props:{modelValue:{type:Object,default:()=>({}),required:!0},elements:{type:Array,required:!0}},emits:["update:modelValue"],setup(e,{emit:n}){const m=t.computed({get:()=>e.modelValue,set:e=>{n("update:modelValue",e)}}),l=e=>e.schema.models.modelValue,s=t.reactive(a.isEmpty(m.value)?(()=>{const t={};return e.elements&&e.elements.map(e=>{const n=l(e);n.name&&(t[n.name]=(e=>{switch(e){case"Number":return 0;case"Array":return[];case"Object":return{};default:return""}})(n.type))}),t})():m.value);return t.watch(s,e=>{m.value={...e}}),{getDefaultModel:l,modelObject:m,state:s}}}),[["render",function(e,n,a,m,l,s){const o=c;return t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.elements,n=>(t.openBlock(),t.createElementBlock("div",{key:n.id},[t.createVNode(o,{modelValue:e.state[e.getDefaultModel(n).name],"onUpdate:modelValue":t=>e.state[e.getDefaultModel(n).name]=t,schemas:[n.schema]},null,8,["modelValue","onUpdate:modelValue","schemas"])]))),128)}]]);d.install=e=>{e.component(d.name,d)},c.install=e=>{e.component(c.name,c)};const r=[m.QIcon,m.QList,m.QItem,m.QItemSection,m.QInput],u=[c,d],p={install:e=>{u.map(t=>e.component(t.name,t)),r.map(t=>e.component(t.name,t))}};e.ElementUtils=i,e.HRendererEngine=c,e.HRendererForm=d,e.SCHEMA_DEFINITIONS=s,e.WIDGET_DEFINITIONS=o,e.default=p,e.renderSchema=l,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
