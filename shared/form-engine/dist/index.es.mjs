import{h as e,resolveComponent as t,defineComponent as a,computed as n,reactive as m,watch as l,openBlock as s,createElementBlock as o,Fragment as i,renderList as c,createVNode as d}from"vue";import{nanoid as r}from"nanoid";import{cloneDeep as u,isEmpty as h}from"lodash-es";import{QIcon as p,QList as E,QItem as f,QItemSection as I,QInput as S}from"quasar";const R=(a,n,m)=>a.map(a=>{const l=a.children?a.children:[],s=a.models?a.models:{};let o={};return s&&(o=((e,t,a)=>{let n={};return Object.keys(e).forEach(e=>{const m=((e,t,a)=>{const n=(e=>"onUpdate:"+e)(e),m=(e=>"update:"+e)(e),l={};return l[e]=t[e],l[n]=e=>{a.emit(m,e)},{...l}})(e,t,a);n=Object.assign(n,m)}),n})(s,n,m)),a.children?e(t(a.tag),{...a.attrs,...o},()=>R(l,n,m)):e(t(a.tag),{...a.attrs,...o},a.text?()=>a.text:()=>{})}),g={TEXT_FIELD:{name:"TEXT_FIELD",schema:{title:"单行文本",tag:"q-input",attrs:{outlined:!0,"bottom-slots":!0,label:"单行文本",type:"text"},models:{modelValue:{name:"",type:"String"}}}},TEXT_AREA:{name:"TEXT_AREA",schema:{title:"多行文本",tag:"q-input",attrs:{outlined:!0,"bottom-slots":!0,label:"多行文本",type:"textarea"},models:{modelValue:{name:"",type:"String"}}}},PASSWORD:{name:"PASSWORD",schema:{title:"密码输入",tag:"q-input",attrs:{filled:!0,label:"密码输入",type:"password"},models:{modelValue:{name:"",type:"String"}}}},DATE_PICKER:{name:"DATE_PICKER",schema:{title:"日期选择",tag:"q-input",attrs:{filled:!0,label:"日期选择","stack-label":!0,type:"date"},models:{modelValue:{name:"",type:"String"}}}},TIME_PICKER:{name:"TIME_PICKER",schema:{title:"时间选择",tag:"q-input",attrs:{filled:!0,label:"时间选择","stack-label":!0,type:"time"},models:{modelValue:{name:"",type:"String"}}}},SLIDER:{name:"SLIDER",schema:{title:"滑块",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{modelValue:{name:"",type:"String"}}}},RANGE_SLIDER:{name:"RANGE_SLIDER",schema:{title:"范围滑块",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{modelValue:{name:"",type:"String"}}}},CHECKBOX:{name:"CHECKBOX",schema:{title:"复选框",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{modelValue:{name:"",type:"String"}}}},SWITCHS:{name:"SWITCHS",schema:{title:"开关",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{modelValue:{name:"",type:"String"}}}},SELECT_SINGLE:{name:"SELECT_SINGLE",schema:{title:"单项下拉",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}},COMBOBOX:{name:"COMBOBOX",schema:{title:"组合框",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}},COLOR_PICKER:{name:"COLOR_PICKER",schema:{title:"颜色选择",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}},RADIO:{name:"RADIO",schema:{title:"单选框组",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}},FILE_INPUT:{name:"FILE_INPUT",schema:{title:"上传",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}},IMAGES:{name:"IMAGES",schema:{title:"图片",tag:"q-input",attrs:{rounded:!0,filled:!0,label:"Rounded filled"},models:{}}}},y=[{title:"输入型组件",list:[{title:g.TEXT_FIELD.schema.title,icon:"mdi-form-textbox",name:"TextField",document:"https://quasar.dev/vue-components/input",schemaName:g.TEXT_FIELD.name},{title:g.TEXT_AREA.schema.title,icon:"mdi-form-textarea",name:"TextArea",document:"https://quasar.dev/vue-components/input",schemaName:g.TEXT_AREA.name},{title:g.PASSWORD.schema.title,icon:"mdi-form-textbox-password",name:"Password",document:"https://quasar.dev/vue-components/input",schemaName:g.PASSWORD.name}]},{title:"选择型组件",list:[{title:g.DATE_PICKER.schema.title,icon:"mdi-calendar",name:"Date",document:"https://quasar.dev/vue-components/input",schemaName:g.DATE_PICKER.name},{title:g.TIME_PICKER.schema.title,icon:"mdi-clock-outline",name:"Time",document:"https://quasar.dev/vue-components/input",schemaName:g.TIME_PICKER.name},{title:g.SLIDER.schema.title,icon:"mdi-tune-variant",name:"Slider",document:"https://vuetifyjs.com/zh-Hans/components/sliders/",schemaName:g.SLIDER.name},{title:g.RANGE_SLIDER.schema.title,icon:"mdi-valve-closed",name:"Range_Slider",document:"https://vuetifyjs.com/zh-Hans/components/sliders/",schemaName:g.RANGE_SLIDER.name},{title:g.CHECKBOX.schema.title,icon:"mdi-checkbox-marked",name:"Checkbox",document:"https://vuetifyjs.com/zh-Hans/components/checkboxes/",schemaName:g.CHECKBOX.name},{title:g.SWITCHS.schema.title,icon:"mdi-toggle-switch",name:"Switch",document:"https://vuetifyjs.com/zh-Hans/components/switches/",schemaName:g.SWITCHS.name},{title:g.SELECT_SINGLE.schema.title,icon:"mdi-form-dropdown",name:"Select",document:"https://vuetifyjs.com/zh-Hans/components/selects/",schemaName:g.SELECT_SINGLE.name},{title:g.COMBOBOX.schema.title,icon:"mdi-vector-difference-ab",name:"Combobox",document:"https://vuetifyjs.com/zh-Hans/components/combobox/",schemaName:g.COMBOBOX.name},{title:g.RADIO.schema.title,icon:"mdi-checkbox-marked-circle",name:"Select",document:"https://vuetifyjs.com/zh-Hans/components/selection-controls/",schemaName:g.RADIO.name},{title:g.COLOR_PICKER.schema.title,icon:"mdi-calendar",name:"Select",document:"https://vuetifyjs.com/zh-Hans/components/color-pickers/",schemaName:g.COLOR_PICKER.name},{title:g.FILE_INPUT.schema.title,icon:"mdi-calendar",name:"Select",document:"https://vuetifyjs.com/zh-Hans/components/file-inputs/",schemaName:g.FILE_INPUT.name},{title:g.IMAGES.schema.title,icon:"mdi-file-image",name:"Image",document:"https://vuetifyjs.com/zh-Hans/components/images/",schemaName:g.IMAGES.name}]}];class ElementUtilities{static instance=new ElementUtilities;constructor(){}static getInstance(){return this.instance}generateShortId(){return r()}getDefinition(e){return g[e]}setIdentityValues(e,t){const a=t+"_"+this.generateShortId();e.id=a,e.config.formId=a,e.config.renderKey=+/* @__PURE__ */new Date}setElementValues(e,t,a){const n={id:"",config:{},schema:{}};return this.setIdentityValues(n,t),n.config.name=t,n.config.panel=a,n.schema=u(e),n}create(e){const t=this.getDefinition(e.schemaName),a=t.schema,n=t.name,m=e.name;return this.setElementValues(a,m,n)}clone(e){const t=u(e);return this.setIdentityValues(t,e.config.name),t}}const O=ElementUtilities.getInstance(),T=a({name:"HRendererEngine",props:{modelValue:{type:[String,Number,Array,Object]},schemas:{type:Array,default:()=>[]}},setup(e,t){const a=e.schemas;return()=>R(a,e,t)}});const b=/* @__PURE__ */((e,t)=>{const a=e.__vccOpts||e;for(const[n,m]of t)a[n]=m;return a})(a({name:"HRendererForm",props:{modelValue:{type:Object,default:()=>({}),required:!0},elements:{type:Array,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const a=n({get:()=>e.modelValue,set:e=>{t("update:modelValue",e)}}),s=e=>e.schema.models.modelValue,o=m(h(a.value)?(()=>{const t={};return e.elements&&e.elements.map(e=>{const a=s(e);a.name&&(t[a.name]=(e=>{switch(e){case"Number":return 0;case"Array":return[];case"Object":return{};default:return""}})(a.type))}),t})():a.value);return l(o,e=>{a.value={...e}}),{getDefaultModel:s,modelObject:a,state:o}}}),[["render",function(e,t,a,n,m,l){const r=T;return s(!0),o(i,null,c(e.elements,t=>(s(),o("div",{key:t.id},[d(r,{modelValue:e.state[e.getDefaultModel(t).name],"onUpdate:modelValue":a=>e.state[e.getDefaultModel(t).name]=a,schemas:[t.schema]},null,8,["modelValue","onUpdate:modelValue","schemas"])]))),128)}]]);b.install=e=>{e.component(b.name,b)},T.install=e=>{e.component(T.name,T)};const C=[p,E,f,I,S],_=[T,b],A={install:e=>{_.map(t=>e.component(t.name,t)),C.map(t=>e.component(t.name,t))}};export{O as ElementUtils,T as HRendererEngine,b as HRendererForm,g as SCHEMA_DEFINITIONS,y as WIDGET_DEFINITIONS,A as default,R as renderSchema};
