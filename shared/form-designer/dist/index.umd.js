!function(e,l){"object"==typeof exports&&"undefined"!=typeof module?l(exports,require("quasar"),require("vue"),require("pinia"),require("lodash-es"),require("@herodotus-cloud/core"),require("@herodotus-cloud/form-engine"),require("@herodotus-cloud/components"),require("vuedraggable")):"function"==typeof define&&define.amd?define(["exports","quasar","vue","pinia","lodash-es","@herodotus-cloud/core","@herodotus-cloud/form-engine","@herodotus-cloud/components","vuedraggable"],l):l((e="undefined"!=typeof globalThis?globalThis:e||self)["@herodotus-cloud/form-designer"]={},e.quasar,e.vue,e.pinia,e.LodashEs,e.HerodotusCore,e.HerodotusFormEngine,e.HerodotusComponents,e.vuedraggable)}(this,function(e,l,t,o,a,d,n,r,i){"use strict";const s=o.defineStore("FormDesignerCanvas",{state:()=>({isClosed:!1,canvasElements:[],sheet:{},selectedElement:{},id:"",name:"",activityName:""}),getters:{isSelected:e=>l=>!(a.isEmpty(e.selectedElement)||!e.selectedElement.id)&&e.selectedElement.config.renderKey===l,isEmptyCanvas:e=>a.isEmpty(e.canvasElements),getElements:e=>e.canvasElements,currentSchema(){return a.isEmpty(this.selectedElement)||a.isEmpty(this.selectedElement.schema)?{}:this.selectedElement.schema},currentConfig(){return a.isEmpty(this.selectedElement)||a.isEmpty(this.selectedElement.config)?{}:this.selectedElement.config},currentPanel(){return a.isEmpty(this.currentConfig)||a.isEmpty(this.currentConfig.panel)?"INFORMATION_PANEL":this.currentConfig.panel},isInformationPanel(){return"INFORMATION_PANEL"===this.currentPanel},condition(){return a.isEmpty(this.sheet.condition)&&(this.sheet.condition={variable:"",options:[]}),this.sheet.condition}},actions:{selectElement(e){this.selectedElement=e},selectFirstElement(){a.isEmpty(this.canvasElements)||this.selectElement(this.canvasElements[0])},loading(e){a.isEmpty(e.modeler)||(this.canvasElements=e.modeler.elements,this.sheet=e.modeler.sheet),this.id=e.id,this.name=e.name,this.activityName=e.activityName,this.selectFirstElement()},compose(){return{id:this.id,name:this.name,activityName:this.activityName,modeler:{elements:this.canvasElements,sheet:this.sheet}}},addElement(e){void 0===this.canvasElements&&(this.canvasElements=[]),this.canvasElements.push(e),this.selectElement(e)},removeElement(e){!a.isEmpty(this.canvasElements)&&e.id&&(a.remove(this.canvasElements,l=>l.id===e.id),this.selectFirstElement())}}}),u=o.defineStore("FormDesignerResources",{state:()=>({resources:{}}),getters:{dynamicForm:e=>e.resources.dynamicForm()},actions:{init(e){this.resources=e}}}),m=(e,l)=>{const t=e.__vccOpts||e;for(const[o,a]of l)t[o]=a;return t};const c=m(t.defineComponent({name:"HFormInformation",setup(){const e=s(),{id:l,name:o,activityName:a}=e,d=t.ref(null),n=t.ref(null);return{id:l,name:o,activityName:a,nameRef:d,activityNameRef:n,validate:()=>{const e=d.value,l=n.value;return e.validate(),l.validate(),!e.hasError&&!l.hasError}}}}),[["render",function(e,o,a,d,n,r){const i=l.QInput,s=l.QList;return t.openBlock(),t.createBlock(s,null,{default:t.withCtx(()=>[t.createVNode(i,{modelValue:e.id,"onUpdate:modelValue":o[0]||(o[0]=l=>e.id=l),dense:"",outlined:"",label:"ID"},null,8,["modelValue"]),t.createVNode(i,{ref:"nameRef",modelValue:e.name,"onUpdate:modelValue":o[1]||(o[1]=l=>e.name=l),dense:"",outlined:"",label:"表单名称",rules:[e=>!!e||"表单名称不能为空"]},null,8,["modelValue","rules"]),t.createVNode(i,{ref:"activityNameRef",modelValue:e.activityName,"onUpdate:modelValue":o[2]||(o[2]=l=>e.activityName=l),dense:"",outlined:"",label:"流程节点名称",rules:[e=>!!e||"流程节点不能为空"]},null,8,["modelValue","rules"])]),_:1})}]]);const p=m(t.defineComponent({name:"HFormUploadDialog",components:{HFormInformation:c},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","update:open","save"],setup(e,{emit:l}){const o=t.computed({get:()=>e.modelValue,set:e=>{l("update:modelValue",e)}}),a=t.ref(null),n=u(),r=s();return{isOpen:o,onSave:()=>{if(a.value){if(a.value.validate()){const e=r.compose();n.dynamicForm.saveOrUpdate(e).then(e=>{o.value=!1,d.Swal.fire({title:"保存成功！",text:"您是否需要关闭设计器？",icon:"success",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确定!",cancelButtonText:"取消",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOut"}}).then(e=>{e.value&&(r.isClosed=!0)})}).catch(e=>{o.value=!1,d.toast.error("保存失败！")})}}},infoRef:a}}}),[["render",function(e,o,a,d,n,r){const i=l.QSpace,s=l.QBtn,u=l.QCardSection,m=c,p=l.QCardActions,V=l.QCard,f=l.QDialog;return t.openBlock(),t.createBlock(f,{modelValue:e.isOpen,"onUpdate:modelValue":o[3]||(o[3]=l=>e.isOpen=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:t.withCtx(()=>[t.createVNode(V,{style:{width:"20vw"}},{default:t.withCtx(()=>[t.createVNode(u,{class:"row items-center q-pb-none"},{default:t.withCtx(()=>[o[4]||(o[4]=t.createElementVNode("div",{class:"text-h6"},"上传表单",-1)),t.createVNode(i),t.createVNode(s,{icon:"close",flat:"",round:"",dense:"",onClick:o[0]||(o[0]=l=>e.isOpen=!1)})]),_:1}),t.createVNode(u,null,{default:t.withCtx(()=>[t.createVNode(m,{ref:"infoRef"},null,512)]),_:1}),t.createVNode(p,{align:"right"},{default:t.withCtx(()=>[t.createVNode(s,{label:"取消",color:"red",onClick:o[1]||(o[1]=l=>e.isOpen=!1)}),t.createVNode(s,{label:"保存",color:"primary",onClick:o[2]||(o[2]=l=>e.onSave())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}]]);const V=m(t.defineComponent({name:"HCanvasLayout"}),[["render",function(e,o,a,d,n,r){const i=l.QCard,s=l.QPage,u=l.QPageContainer;return t.openBlock(),t.createBlock(u,null,{default:t.withCtx(()=>[t.createVNode(s,null,{default:t.withCtx(()=>[t.createVNode(i,{class:"q-ma-md"},{default:t.withCtx(()=>[t.renderSlot(e.$slots,"default")]),_:3})]),_:3})]),_:3})}]]);const f=m(t.defineComponent({name:"HExpansionItem",props:{headerClass:{type:String,default:"text-primary"}}}),[["render",function(e,o,a,d,n,r){const i=l.QCardSection,s=l.QCard,u=l.QExpansionItem;return t.openBlock(),t.createBlock(u,t.mergeProps({"expand-separator":"","header-class":e.headerClass},e.$attrs),{default:t.withCtx(()=>[t.createVNode(s,null,{default:t.withCtx(()=>[t.createVNode(i,null,{default:t.withCtx(()=>[t.renderSlot(e.$slots,"default")]),_:3})]),_:3})]),_:3},16,["header-class"])}]]);const b=m(t.defineComponent({name:"HFormPreviewDialog",components:{HRendererForm:n.HRendererForm},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const o=s(),{canvasElements:a}=o,d=t.computed({get:()=>e.modelValue,set:e=>{l("update:modelValue",e)}}),n=t.ref({});return{isOpen:d,state:n,canvasElements:a,onClose:()=>{d.value=!1}}}}),[["render",function(e,o,a,d,n,r){const i=l.QSpace,s=l.QBtn,u=l.QCardSection,m=t.resolveComponent("h-renderer-form"),c=l.QCardActions,p=l.QCard,V=l.QDialog;return t.openBlock(),t.createBlock(V,{modelValue:e.isOpen,"onUpdate:modelValue":o[3]||(o[3]=l=>e.isOpen=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:t.withCtx(()=>[t.createVNode(p,null,{default:t.withCtx(()=>[t.createVNode(u,{class:"row items-center q-pb-none"},{default:t.withCtx(()=>[o[4]||(o[4]=t.createElementVNode("div",{class:"text-h6"},"预览",-1)),t.createVNode(i),t.createVNode(s,{icon:"close",flat:"",round:"",dense:"",onClick:o[0]||(o[0]=l=>e.onClose())})]),_:1}),t.createVNode(u,null,{default:t.withCtx(()=>[t.createVNode(m,{modelValue:e.state,"onUpdate:modelValue":o[1]||(o[1]=l=>e.state=l),elements:e.canvasElements},null,8,["modelValue","elements"])]),_:1}),t.createVNode(c,{align:"right",class:"bg-white text-red"},{default:t.withCtx(()=>[t.createVNode(s,{flat:"",label:"确定",onClick:o[2]||(o[2]=l=>e.onClose())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}]]);const h=m(t.defineComponent({name:"HCanvasElement",components:{HRendererEngine:n.HRendererEngine},props:{element:{type:Object,required:!0},selectedId:{type:Number,required:!0}},setup(e){const l=t.ref(!1),o=s();return{isHover:l,schemas:t.computed(()=>[e.element.schema]),isSelected:t.computed(()=>o.isSelected(e.selectedId)),onDelete:()=>{o.removeElement(e.element)}}}}),[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-renderer-engine"),s=l.QBtn,u=l.QCardActions,m=l.QCard;return t.openBlock(),t.createBlock(m,{class:t.normalizeClass([e.isSelected&&!e.isHover?"canvas-item-selected":"canvas-item"]),onMouseover:o[0]||(o[0]=l=>e.isHover=!0),onMouseleave:o[1]||(o[1]=l=>e.isHover=!1)},{default:t.withCtx(()=>[t.createVNode(i,{schemas:e.schemas},null,8,["schemas"]),e.isHover?(t.openBlock(),t.createBlock(u,{key:0,class:"justify-end q-pa-none"},{default:t.withCtx(()=>[t.createVNode(s,{flat:"",round:"",size:"sm",color:"red",icon:"mdi-delete",onClick:e.onDelete},null,8,["onClick"]),t.createVNode(s,{flat:"",round:"",size:"sm",color:"accent",icon:"bookmark"}),t.createVNode(s,{flat:"",round:"",size:"sm",color:"primary",icon:"share"})]),_:1})):t.createCommentVNode("",!0)]),_:1},8,["class"])}],["__scopeId","data-v-8129af03"]]);const N=m(t.defineComponent({name:"HCanvasContainer",components:{Draggable:i,HCanvasElement:h,HCanvasLayout:V},setup(e){const l=s(),{canvasElements:o}=l;return{isEmptyCanvas:t.computed(()=>l.isEmptyCanvas),canvasElements:o,onSelectedItem:e=>{l.selectElement(e)}}}}),[["render",function(e,l,o,a,d,n){const r=h,i=t.resolveComponent("draggable"),s=V;return t.openBlock(),t.createBlock(s,null,{default:t.withCtx(()=>[t.createVNode(i,{"item-key":"id",list:e.canvasElements,animation:300,group:"widgetGroup",class:"canvas-container"},t.createSlots({item:t.withCtx(({element:l})=>[(t.openBlock(),t.createBlock(r,{element:l,key:l.config.renderKey,"selected-id":l.config.renderKey,onClick:t=>e.onSelectedItem(l)},null,8,["element","selected-id","onClick"]))]),_:2},[e.isEmptyCanvas?{name:"footer",fn:t.withCtx(()=>[l[0]||(l[0]=t.createElementVNode("div",{class:"row text-center canvas-container"},[t.createElementVNode("div",{class:"col-12 self-center text-h6 text-weight-medium text-grey-5"}," 从左侧拖拽或点击来添加字段 ")],-1))]),key:"0"}:void 0]),1032,["list"])]),_:1})}],["__scopeId","data-v-b8c7d9b0"]]);const C=m(t.defineComponent({name:"HConditionVariable",components:{HExpansionItem:f,HTextField:r.HTextField},setup(e){const l=s(),{condition:o}=l,a=t.ref([{label:"option1",value:!0},{label:"option2",value:!1}]);return{tableColumns:[{align:"center",name:"label",field:"calories",label:"标签"},{align:"center",name:"value",field:"fat",label:"值"}],tableRows:a,condition:o,onModify:()=>{o.options=a.value}}}}),[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=l.QInput,u=l.QPopupEdit,m=l.QTd,c=l.QTr,p=l.QTable,V=f;return t.openBlock(),t.createBlock(V,{icon:"mdi-variable",label:"流程变量"},{default:t.withCtx(()=>[t.createVNode(i,{modelValue:e.condition.variable,"onUpdate:modelValue":o[0]||(o[0]=l=>e.condition.variable=l),dense:"",label:"变量名称"},null,8,["modelValue"]),t.createVNode(p,{rows:e.tableRows,columns:e.tableColumns,"row-key":"name",dense:"",flat:"",bordered:"","hide-pagination":"","card-container-class":"q-ml-2"},{body:t.withCtx(l=>[t.createVNode(c,{props:l},{default:t.withCtx(()=>[t.createVNode(m,{key:"label",props:l},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(l.row.label)+" ",1),t.createVNode(u,{modelValue:l.row.label,"onUpdate:modelValue":[e=>l.row.label=e,e.onModify],title:"修改标签",buttons:"","label-set":"确定","label-cancel":"取消"},{default:t.withCtx(e=>[t.createVNode(s,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),t.createVNode(m,{key:"value",props:l},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(l.row.value),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})}]]);const v=m(t.defineComponent({name:"HSheetPanel",components:{HConditionVariable:C}}),[["render",function(e,o,a,d,n,r){const i=C,s=l.QList;return t.openBlock(),t.createBlock(s,{bordered:""},{default:t.withCtx(()=>[t.createVNode(i)]),_:1})}]]),g={HideBottomSpace:"hide-bottom-space",ItemAligned:"item-aligned"},w=t.defineComponent({name:"HDatePanel",components:{HExpansionItem:f,HSwitch:r.HSwitch,HTextField:r.HTextField},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:g,properties:t.computed(()=>e.schema.attrs),models:t.computed(()=>e.schema.models)})}),E={class:"q-gutter-y-sm column"},T={class:"q-gutter-y-sm column"};const y=m(w,[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=f,u=t.resolveComponent("h-switch"),m=l.QList;return t.openBlock(),t.createBlock(m,{bordered:""},{default:t.withCtx(()=>[t.createVNode(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:t.withCtx(()=>[t.createVNode(i,{modelValue:e.models.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.models.modelValue.name=l),dense:"",label:"名称"},null,8,["modelValue"]),t.createVNode(i,{modelValue:e.properties.label,"onUpdate:modelValue":o[1]||(o[1]=l=>e.properties.label=l),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),t.createVNode(s,{icon:"mdi-eject-circle",label:"状态"},{default:t.withCtx(()=>[t.createElementVNode("div",E,[t.createVNode(u,{modelValue:e.properties.disable,"onUpdate:modelValue":o[2]||(o[2]=l=>e.properties.disable=l),label:"Disable"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.readonly,"onUpdate:modelValue":o[3]||(o[3]=l=>e.properties.readonly=l),label:"Readonly"},null,8,["modelValue"])])]),_:1}),t.createVNode(s,{icon:"mdi-image-edit",label:"外观"},{default:t.withCtx(()=>[t.createElementVNode("div",T,[t.createVNode(u,{modelValue:e.properties.dark,"onUpdate:modelValue":o[4]||(o[4]=l=>e.properties.dark=l),label:"Dark"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.filled,"onUpdate:modelValue":o[5]||(o[5]=l=>e.properties.filled=l),label:"Filled"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.outlined,"onUpdate:modelValue":o[6]||(o[6]=l=>e.properties.outlined=l),label:"Outlined"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.borderless,"onUpdate:modelValue":o[7]||(o[7]=l=>e.properties.borderless=l),label:"Borderless"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.standout,"onUpdate:modelValue":o[8]||(o[8]=l=>e.properties.standout=l),label:"Standout"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties[e.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":o[9]||(o[9]=l=>e.properties[e.ATTRIBUTES.HideBottomSpace]=l),label:"Hide Bottom Space"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.rounded,"onUpdate:modelValue":o[10]||(o[10]=l=>e.properties.rounded=l),label:"Rounded"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.square,"onUpdate:modelValue":o[11]||(o[11]=l=>e.properties.square=l),label:"Square"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.dense,"onUpdate:modelValue":o[12]||(o[12]=l=>e.properties.dense=l),label:"Dense"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties[e.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":o[13]||(o[13]=l=>e.properties[e.ATTRIBUTES.ItemAligned]=l),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}]]),U=t.defineComponent({name:"HPasswordPanel",components:{HExpansionItem:f,HSwitch:r.HSwitch,HTextField:r.HTextField},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:g,properties:t.computed(()=>e.schema.attrs),models:t.computed(()=>e.schema.models)})}),x={class:"q-gutter-y-sm column"},S={class:"q-gutter-y-sm column"};const B=m(U,[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=f,u=t.resolveComponent("h-switch"),m=l.QList;return t.openBlock(),t.createBlock(m,{bordered:""},{default:t.withCtx(()=>[t.createVNode(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:t.withCtx(()=>[t.createVNode(i,{modelValue:e.models.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.models.modelValue.name=l),dense:"",label:"名称"},null,8,["modelValue"]),t.createVNode(i,{modelValue:e.properties.label,"onUpdate:modelValue":o[1]||(o[1]=l=>e.properties.label=l),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),t.createVNode(s,{icon:"mdi-eject-circle",label:"状态"},{default:t.withCtx(()=>[t.createElementVNode("div",x,[t.createVNode(u,{modelValue:e.properties.disable,"onUpdate:modelValue":o[2]||(o[2]=l=>e.properties.disable=l),label:"Disable"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.readonly,"onUpdate:modelValue":o[3]||(o[3]=l=>e.properties.readonly=l),label:"Readonly"},null,8,["modelValue"])])]),_:1}),t.createVNode(s,{icon:"mdi-image-edit",label:"外观"},{default:t.withCtx(()=>[t.createElementVNode("div",S,[t.createVNode(u,{modelValue:e.properties.dark,"onUpdate:modelValue":o[4]||(o[4]=l=>e.properties.dark=l),label:"Dark"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.filled,"onUpdate:modelValue":o[5]||(o[5]=l=>e.properties.filled=l),label:"Filled"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.outlined,"onUpdate:modelValue":o[6]||(o[6]=l=>e.properties.outlined=l),label:"Outlined"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.borderless,"onUpdate:modelValue":o[7]||(o[7]=l=>e.properties.borderless=l),label:"Borderless"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.standout,"onUpdate:modelValue":o[8]||(o[8]=l=>e.properties.standout=l),label:"Standout"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties[e.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":o[9]||(o[9]=l=>e.properties[e.ATTRIBUTES.HideBottomSpace]=l),label:"Hide Bottom Space"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.rounded,"onUpdate:modelValue":o[10]||(o[10]=l=>e.properties.rounded=l),label:"Rounded"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.square,"onUpdate:modelValue":o[11]||(o[11]=l=>e.properties.square=l),label:"Square"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.dense,"onUpdate:modelValue":o[12]||(o[12]=l=>e.properties.dense=l),label:"Dense"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties[e.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":o[13]||(o[13]=l=>e.properties[e.ATTRIBUTES.ItemAligned]=l),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}]]),_=t.defineComponent({name:"HTextareaPanel",components:{HExpansionItem:f,HSwitch:r.HSwitch,HTextField:r.HTextField},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:g,properties:t.computed(()=>e.schema.attrs),models:t.computed(()=>e.schema.models)})}),k={class:"q-gutter-y-sm column"},I={class:"q-gutter-y-sm column"};const H=m(_,[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=f,u=t.resolveComponent("h-switch"),m=l.QList;return t.openBlock(),t.createBlock(m,{bordered:""},{default:t.withCtx(()=>[t.createVNode(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:t.withCtx(()=>[t.createVNode(i,{modelValue:e.models.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.models.modelValue.name=l),dense:"",label:"名称"},null,8,["modelValue"]),t.createVNode(i,{modelValue:e.properties.label,"onUpdate:modelValue":o[1]||(o[1]=l=>e.properties.label=l),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),t.createVNode(s,{icon:"mdi-eject-circle",label:"状态"},{default:t.withCtx(()=>[t.createElementVNode("div",k,[t.createVNode(u,{modelValue:e.properties.disable,"onUpdate:modelValue":o[2]||(o[2]=l=>e.properties.disable=l),label:"Disable"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.readonly,"onUpdate:modelValue":o[3]||(o[3]=l=>e.properties.readonly=l),label:"Readonly"},null,8,["modelValue"])])]),_:1}),t.createVNode(s,{icon:"mdi-image-edit",label:"外观"},{default:t.withCtx(()=>[t.createElementVNode("div",I,[t.createVNode(u,{modelValue:e.properties.dark,"onUpdate:modelValue":o[4]||(o[4]=l=>e.properties.dark=l),label:"Dark"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.filled,"onUpdate:modelValue":o[5]||(o[5]=l=>e.properties.filled=l),label:"Filled"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.outlined,"onUpdate:modelValue":o[6]||(o[6]=l=>e.properties.outlined=l),label:"Outlined"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.borderless,"onUpdate:modelValue":o[7]||(o[7]=l=>e.properties.borderless=l),label:"Borderless"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.standout,"onUpdate:modelValue":o[8]||(o[8]=l=>e.properties.standout=l),label:"Standout"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties[e.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":o[9]||(o[9]=l=>e.properties[e.ATTRIBUTES.HideBottomSpace]=l),label:"Hide Bottom Space"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.rounded,"onUpdate:modelValue":o[10]||(o[10]=l=>e.properties.rounded=l),label:"Rounded"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.square,"onUpdate:modelValue":o[11]||(o[11]=l=>e.properties.square=l),label:"Square"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.dense,"onUpdate:modelValue":o[12]||(o[12]=l=>e.properties.dense=l),label:"Dense"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties[e.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":o[13]||(o[13]=l=>e.properties[e.ATTRIBUTES.ItemAligned]=l),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}]]),D=t.defineComponent({name:"HTextFieldPanel",components:{HExpansionItem:f,HSwitch:r.HSwitch,HTextField:r.HTextField},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:g,properties:t.computed(()=>e.schema.attrs),models:t.computed(()=>e.schema.models)})}),R={class:"q-gutter-y-sm column"},A={class:"q-gutter-y-sm column"};const q=m(D,[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=f,u=t.resolveComponent("h-switch"),m=l.QList;return t.openBlock(),t.createBlock(m,{bordered:""},{default:t.withCtx(()=>[t.createVNode(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:t.withCtx(()=>[t.createVNode(i,{modelValue:e.models.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.models.modelValue.name=l),dense:"",label:"名称"},null,8,["modelValue"]),t.createVNode(i,{modelValue:e.properties.label,"onUpdate:modelValue":o[1]||(o[1]=l=>e.properties.label=l),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),t.createVNode(s,{icon:"mdi-eject-circle",label:"状态"},{default:t.withCtx(()=>[t.createElementVNode("div",R,[t.createVNode(u,{modelValue:e.properties.disable,"onUpdate:modelValue":o[2]||(o[2]=l=>e.properties.disable=l),label:"Disable"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.readonly,"onUpdate:modelValue":o[3]||(o[3]=l=>e.properties.readonly=l),label:"Readonly"},null,8,["modelValue"])])]),_:1}),t.createVNode(s,{icon:"mdi-image-edit",label:"外观"},{default:t.withCtx(()=>[t.createElementVNode("div",A,[t.createVNode(u,{modelValue:e.properties.dark,"onUpdate:modelValue":o[4]||(o[4]=l=>e.properties.dark=l),label:"Dark"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.filled,"onUpdate:modelValue":o[5]||(o[5]=l=>e.properties.filled=l),label:"Filled"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.outlined,"onUpdate:modelValue":o[6]||(o[6]=l=>e.properties.outlined=l),label:"Outlined"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.borderless,"onUpdate:modelValue":o[7]||(o[7]=l=>e.properties.borderless=l),label:"Borderless"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.standout,"onUpdate:modelValue":o[8]||(o[8]=l=>e.properties.standout=l),label:"Standout"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties[e.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":o[9]||(o[9]=l=>e.properties[e.ATTRIBUTES.HideBottomSpace]=l),label:"Hide Bottom Space"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.rounded,"onUpdate:modelValue":o[10]||(o[10]=l=>e.properties.rounded=l),label:"Rounded"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.square,"onUpdate:modelValue":o[11]||(o[11]=l=>e.properties.square=l),label:"Square"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.dense,"onUpdate:modelValue":o[12]||(o[12]=l=>e.properties.dense=l),label:"Dense"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties[e.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":o[13]||(o[13]=l=>e.properties[e.ATTRIBUTES.ItemAligned]=l),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}]]),Q=t.defineComponent({name:"HTimePanel",components:{HExpansionItem:f,HSwitch:r.HSwitch,HTextField:r.HTextField},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:g,properties:t.computed(()=>e.schema.attrs),models:t.computed(()=>e.schema.models)})}),F={class:"q-gutter-y-sm column"},O={class:"q-gutter-y-sm column"};const P=m({name:"HGeneratorLayout",components:{HSheetPanel:v,HFormInformation:c,DATE_PICKER:y,PASSWORD:B,TEXT_AREA:H,TEXT_FIELD:q,TIME_PICKER:m(Q,[["render",function(e,o,a,d,n,r){const i=t.resolveComponent("h-text-field"),s=f,u=t.resolveComponent("h-switch"),m=l.QList;return t.openBlock(),t.createBlock(m,{bordered:""},{default:t.withCtx(()=>[t.createVNode(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:t.withCtx(()=>[t.createVNode(i,{modelValue:e.models.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=l=>e.models.modelValue.name=l),dense:"",label:"名称"},null,8,["modelValue"]),t.createVNode(i,{modelValue:e.properties.label,"onUpdate:modelValue":o[1]||(o[1]=l=>e.properties.label=l),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),t.createVNode(s,{icon:"mdi-eject-circle",label:"状态"},{default:t.withCtx(()=>[t.createElementVNode("div",F,[t.createVNode(u,{modelValue:e.properties.disable,"onUpdate:modelValue":o[2]||(o[2]=l=>e.properties.disable=l),label:"Disable"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.readonly,"onUpdate:modelValue":o[3]||(o[3]=l=>e.properties.readonly=l),label:"Readonly"},null,8,["modelValue"])])]),_:1}),t.createVNode(s,{icon:"mdi-image-edit",label:"外观"},{default:t.withCtx(()=>[t.createElementVNode("div",O,[t.createVNode(u,{modelValue:e.properties.dark,"onUpdate:modelValue":o[4]||(o[4]=l=>e.properties.dark=l),label:"Dark"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.filled,"onUpdate:modelValue":o[5]||(o[5]=l=>e.properties.filled=l),label:"Filled"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.outlined,"onUpdate:modelValue":o[6]||(o[6]=l=>e.properties.outlined=l),label:"Outlined"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.borderless,"onUpdate:modelValue":o[7]||(o[7]=l=>e.properties.borderless=l),label:"Borderless"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.standout,"onUpdate:modelValue":o[8]||(o[8]=l=>e.properties.standout=l),label:"Standout"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties[e.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":o[9]||(o[9]=l=>e.properties[e.ATTRIBUTES.HideBottomSpace]=l),label:"Hide Bottom Space"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.rounded,"onUpdate:modelValue":o[10]||(o[10]=l=>e.properties.rounded=l),label:"Rounded"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.square,"onUpdate:modelValue":o[11]||(o[11]=l=>e.properties.square=l),label:"Square"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties.dense,"onUpdate:modelValue":o[12]||(o[12]=l=>e.properties.dense=l),label:"Dense"},null,8,["modelValue"]),t.createVNode(u,{modelValue:e.properties[e.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":o[13]||(o[13]=l=>e.properties[e.ATTRIBUTES.ItemAligned]=l),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}]])},setup(){const e=s(),{isInformationPanel:l,currentSchema:a,currentPanel:d}=o.storeToRefs(e);return{formTab:t.ref("info"),elementTab:t.ref("display"),isInformationPanel:l,currentSchema:a,currentPanel:d}}},[["render",function(e,o,a,d,n,r){const i=l.QTab,s=l.QTabs,u=l.QSeparator,m=c,p=l.QTabPanel,V=l.QTabPanels,f=l.QCard,b=v;return d.isInformationPanel?(t.openBlock(),t.createBlock(f,{key:0},{default:t.withCtx(()=>[t.createVNode(s,{modelValue:d.formTab,"onUpdate:modelValue":o[0]||(o[0]=e=>d.formTab=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:t.withCtx(()=>[t.createVNode(i,{name:"info",label:"信息"})]),_:1},8,["modelValue"]),t.createVNode(u),t.createVNode(V,{modelValue:d.formTab,"onUpdate:modelValue":o[1]||(o[1]=e=>d.formTab=e),animated:""},{default:t.withCtx(()=>[t.createVNode(p,{name:"info"},{default:t.withCtx(()=>[t.createVNode(m)]),_:1})]),_:1},8,["modelValue"])]),_:1})):(t.openBlock(),t.createBlock(f,{key:1},{default:t.withCtx(()=>[t.createVNode(s,{modelValue:d.elementTab,"onUpdate:modelValue":o[2]||(o[2]=e=>d.elementTab=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:t.withCtx(()=>[t.createVNode(i,{name:"display",label:"显示"}),t.createVNode(i,{name:"sheet",label:"表单"})]),_:1},8,["modelValue"]),t.createVNode(u),t.createVNode(V,{modelValue:d.elementTab,"onUpdate:modelValue":o[3]||(o[3]=e=>d.elementTab=e),animated:""},{default:t.withCtx(()=>[t.createVNode(p,{name:"display",class:"q-pa-none"},{default:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(d.currentPanel),{schema:d.currentSchema},null,8,["schema"]))]),_:1}),t.createVNode(p,{name:"sheet",class:"q-pa-none"},{default:t.withCtx(()=>[t.createVNode(b)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}]]),L=t.defineComponent({name:"HWidgetPanel",components:{Draggable:i},setup(){const e=n.WIDGET_DEFINITIONS,l=s(),t=e=>n.ElementUtils.create(e);return{widgetGroups:e,cloneWidget:t,addWidget:e=>{const o=t(e);l.addElement(o)}}}}),j={class:"widget-list"},W={class:"widget-title"},M=["onClick"],G={class:"widget-body"};const $=m(L,[["render",function(e,o,a,d,n,r){const i=l.QIcon,s=t.resolveComponent("draggable");return t.openBlock(),t.createElementBlock("div",j,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.widgetGroups,(l,o)=>(t.openBlock(),t.createElementBlock("div",{key:o},[t.createElementVNode("div",W,t.toDisplayString(l.title),1),t.createVNode(s,{modelValue:l.list,"onUpdate:modelValue":e=>l.list=e,"item-key":"schemaName",draggable:".widget-item",sort:!1,group:{name:"widgetGroup",pull:"clone",put:!1},clone:e.cloneWidget},{item:t.withCtx(({element:l})=>[t.createElementVNode("div",{class:"widget-item",onClick:t=>e.addWidget(l)},[t.createElementVNode("div",G,[t.createVNode(i,{name:l.icon},null,8,["name"]),t.createTextVNode(" "+t.toDisplayString(l.title),1)])],8,M)]),_:1},8,["modelValue","onUpdate:modelValue","clone"])]))),128))])}],["__scopeId","data-v-ae3d4bd2"]]);const z=m(t.defineComponent({name:"HDynamicForms",components:{HWidgetPanel:$,HPropertyPanel:P,HCanvasContainer:N,HFormPreviewDialog:b,HFormUploadDialog:p},props:{instance:{type:Object,required:!0},title:{type:String,default:"Dante Cloud Form Designer"},container:{type:Boolean,default:!1},height:{type:String,default:"90vh"},item:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:l}){const o=t.ref(!1),a=t.ref(!1),d=t.ref(!1),n=t.ref(!1),r=u(),i=s();return t.watch(()=>e.item,l=>{r.init(e.instance),i.loading(l)},{deep:!0,immediate:!0}),t.watch(()=>i.isClosed,e=>{e&&l("close")}),t.onUnmounted(()=>{r.$reset(),i.$reset()}),{leftDrawerOpen:o,toggleLeftDrawer(){o.value=!o.value},rightDrawerOpen:a,toggleRightDrawer(){a.value=!a.value},openPreview:d,openUpload:n}}}),[["render",function(e,o,a,d,n,r){const i=l.QBtn,s=l.QToolbarTitle,u=l.QToolbar,m=l.QHeader,c=$,V=l.QDrawer,f=P,h=N,C=b,v=p,g=l.QLayout;return t.openBlock(),t.createBlock(g,{view:"lHr LpR lfr",container:e.container,class:"bg-grey-2",style:t.normalizeStyle(`height: ${e.height}`)},{default:t.withCtx(()=>[t.createVNode(m,{bordered:"",class:"text-primary bg-white"},{default:t.withCtx(()=>[t.createVNode(u,null,{default:t.withCtx(()=>[t.createVNode(i,{dense:"",flat:"",round:"",icon:"menu",onClick:o[0]||(o[0]=l=>e.leftDrawerOpen=!e.leftDrawerOpen)}),t.createVNode(s,null,{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(e.title),1)]),_:1}),t.createVNode(i,{flat:"",round:"",dense:"",icon:"mdi-eye",class:"q-mr-xs",onClick:o[1]||(o[1]=l=>e.openPreview=!0)}),t.createVNode(i,{flat:"",round:"",dense:"",icon:"mdi-cloud-upload",onClick:o[2]||(o[2]=l=>e.openUpload=!0)})]),_:1})]),_:1}),t.createVNode(V,{"show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":o[3]||(o[3]=l=>e.leftDrawerOpen=l),side:"left",behavior:"desktop",bordered:""},{default:t.withCtx(()=>[t.createVNode(c)]),_:1},8,["modelValue"]),t.createVNode(V,{"show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":o[4]||(o[4]=l=>e.rightDrawerOpen=l),side:"right",behavior:"desktop",bordered:""},{default:t.withCtx(()=>[t.createVNode(f)]),_:1},8,["modelValue"]),t.createVNode(h),t.createVNode(C,{modelValue:e.openPreview,"onUpdate:modelValue":o[5]||(o[5]=l=>e.openPreview=l)},null,8,["modelValue"]),t.createVNode(v,{modelValue:e.openUpload,"onUpdate:modelValue":o[6]||(o[6]=l=>e.openUpload=l)},null,8,["modelValue"])]),_:1},8,["container","style"])}]]);z.install=e=>{e.component(z.name,z)};const K=[z],X={install:e=>{K.map(l=>e.component(l.name,l))}};Object.defineProperty(e,"Swal",{enumerable:!0,get:()=>d.Swal}),Object.defineProperty(e,"toast",{enumerable:!0,get:()=>d.toast}),Object.defineProperty(e,"ElementUtils",{enumerable:!0,get:()=>n.ElementUtils}),Object.defineProperty(e,"WIDGET_DEFINITIONS",{enumerable:!0,get:()=>n.WIDGET_DEFINITIONS}),e.Attributes=g,e.HDynamicForms=z,e.default=X,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
