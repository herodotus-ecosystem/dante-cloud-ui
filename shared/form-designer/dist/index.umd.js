!function(e,l){"object"==typeof exports&&"undefined"!=typeof module?l(exports,require("quasar"),require("vue"),require("pinia"),require("lodash-es"),require("@herodotus-cloud/core"),require("@herodotus-cloud/form-engine"),require("@herodotus-cloud/components"),require("vuedraggable")):"function"==typeof define&&define.amd?define(["exports","quasar","vue","pinia","lodash-es","@herodotus-cloud/core","@herodotus-cloud/form-engine","@herodotus-cloud/components","vuedraggable"],l):l((e="undefined"!=typeof globalThis?globalThis:e||self)["@herodotus-cloud/form-designer"]={},e.quasar,e.vue,e.pinia,e.LodashEs,e.HerodotusCore,e.HerodotusFormEngine,e.HerodotusComponents,e.vuedraggable)}(this,function(e,l,a,t,o,n,d,u,r){"use strict";const i=t.defineStore("FormDesignerCanvas",{state:()=>({isClosed:!1,canvasElements:[],sheet:{},selectedElement:{},id:"",name:"",activityName:""}),getters:{isSelected:e=>l=>!(o.isEmpty(e.selectedElement)||!e.selectedElement.id)&&e.selectedElement.config.renderKey===l,isEmptyCanvas:e=>o.isEmpty(e.canvasElements),getElements:e=>e.canvasElements,currentSchema(){return o.isEmpty(this.selectedElement)||o.isEmpty(this.selectedElement.schema)?{}:this.selectedElement.schema},currentConfig(){return o.isEmpty(this.selectedElement)||o.isEmpty(this.selectedElement.config)?{}:this.selectedElement.config},currentPanel(){return o.isEmpty(this.currentConfig)||o.isEmpty(this.currentConfig.panel)?"INFORMATION_PANEL":this.currentConfig.panel},isInformationPanel(){return"INFORMATION_PANEL"===this.currentPanel},condition(){return o.isEmpty(this.sheet.condition)&&(this.sheet.condition={variable:"",options:[]}),this.sheet.condition}},actions:{selectElement(e){this.selectedElement=e},selectFirstElement(){o.isEmpty(this.canvasElements)||this.selectElement(this.canvasElements[0])},loading(e){o.isEmpty(e.modeler)||(this.canvasElements=e.modeler.elements,this.sheet=e.modeler.sheet),this.id=e.id,this.name=e.name,this.activityName=e.activityName,this.selectFirstElement()},compose(){return{id:this.id,name:this.name,activityName:this.activityName,modeler:{elements:this.canvasElements,sheet:this.sheet}}},addElement(e){void 0===this.canvasElements&&(this.canvasElements=[]),this.canvasElements.push(e),this.selectElement(e)},removeElement(e){!o.isEmpty(this.canvasElements)&&e.id&&(o.remove(this.canvasElements,l=>l.id===e.id),this.selectFirstElement())}}}),c=t.defineStore("FormDesignerResources",{state:()=>({resources:{}}),getters:{dynamicForm:e=>e.resources.dynamicForm()},actions:{init(e){this.resources=e}}}),m=(e,l)=>{const a=e.__vccOpts||e;for(const[t,o]of l)a[t]=o;return a};const s=m(a.defineComponent({name:"HFormInformation",setup(){const e=i(),{id:l,name:t,activityName:o}=e,n=a.ref(null),d=a.ref(null);return{id:l,name:t,activityName:o,nameRef:n,activityNameRef:d,validate:()=>{const e=n.value,l=d.value;return e.validate(),l.validate(),!e.hasError&&!l.hasError}}}}),[["render",function(e,t,o,n,d,u){const r=l.QInput,i=l.QList;return a.openBlock(),a.createBlock(i,null,{default:a.withCtx(()=>[a.createVNode(r,{modelValue:e.id,"onUpdate:modelValue":t[0]||(t[0]=l=>e.id=l),dense:"",outlined:"",label:"ID"},null,8,["modelValue"]),a.createVNode(r,{ref:"nameRef",modelValue:e.name,"onUpdate:modelValue":t[1]||(t[1]=l=>e.name=l),dense:"",outlined:"",label:"表单名称",rules:[e=>!!e||"表单名称不能为空"]},null,8,["modelValue","rules"]),a.createVNode(r,{ref:"activityNameRef",modelValue:e.activityName,"onUpdate:modelValue":t[2]||(t[2]=l=>e.activityName=l),dense:"",outlined:"",label:"流程节点名称",rules:[e=>!!e||"流程节点不能为空"]},null,8,["modelValue","rules"])]),_:1})}]]);const V=m(a.defineComponent({name:"HFormUploadDialog",components:{HFormInformation:s},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","update:open","save"],setup(e,{emit:l}){const t=a.computed({get:()=>e.modelValue,set:e=>{l("update:modelValue",e)}}),o=a.ref(null),d=c(),u=i();return{isOpen:t,onSave:()=>{if(o.value){if(o.value.validate()){const e=u.compose();d.dynamicForm.saveOrUpdate(e).then(e=>{t.value=!1,n.Swal.fire({title:"保存成功！",text:"您是否需要关闭设计器？",icon:"success",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确定!",cancelButtonText:"取消",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOut"}}).then(e=>{e.value&&(u.isClosed=!0)})}).catch(e=>{t.value=!1,n.toast.error("保存失败！")})}}},infoRef:o}}}),[["render",function(e,t,o,n,d,u){const r=l.QSpace,i=l.QBtn,c=l.QCardSection,m=s,V=l.QCardActions,p=l.QCard,f=l.QDialog;return a.openBlock(),a.createBlock(f,{modelValue:e.isOpen,"onUpdate:modelValue":t[3]||(t[3]=l=>e.isOpen=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:a.withCtx(()=>[a.createVNode(p,{style:{width:"20vw"}},{default:a.withCtx(()=>[a.createVNode(c,{class:"row items-center q-pb-none"},{default:a.withCtx(()=>[t[4]||(t[4]=a.createElementVNode("div",{class:"text-h6"},"上传表单",-1)),a.createVNode(r),a.createVNode(i,{icon:"close",flat:"",round:"",dense:"",onClick:t[0]||(t[0]=l=>e.isOpen=!1)})]),_:1}),a.createVNode(c,null,{default:a.withCtx(()=>[a.createVNode(m,{ref:"infoRef"},null,512)]),_:1}),a.createVNode(V,{align:"right"},{default:a.withCtx(()=>[a.createVNode(i,{label:"取消",color:"red",onClick:t[1]||(t[1]=l=>e.isOpen=!1)}),a.createVNode(i,{label:"保存",color:"primary",onClick:t[2]||(t[2]=l=>e.onSave())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}]]);const p=m(a.defineComponent({name:"HCanvasLayout"}),[["render",function(e,t,o,n,d,u){const r=l.QCard,i=l.QPage,c=l.QPageContainer;return a.openBlock(),a.createBlock(c,null,{default:a.withCtx(()=>[a.createVNode(i,null,{default:a.withCtx(()=>[a.createVNode(r,{class:"q-ma-md"},{default:a.withCtx(()=>[a.renderSlot(e.$slots,"default")]),_:3})]),_:3})]),_:3})}]]);const f=m(a.defineComponent({name:"HExpansionItem",props:{headerClass:{type:String,default:"text-primary"}}}),[["render",function(e,t,o,n,d,u){const r=l.QCardSection,i=l.QCard,c=l.QExpansionItem;return a.openBlock(),a.createBlock(c,a.mergeProps({"expand-separator":"","header-class":e.headerClass},e.$attrs),{default:a.withCtx(()=>[a.createVNode(i,null,{default:a.withCtx(()=>[a.createVNode(r,null,{default:a.withCtx(()=>[a.renderSlot(e.$slots,"default")]),_:3})]),_:3})]),_:3},16,["header-class"])}]]);const v=m(a.defineComponent({name:"HFormPreviewDialog",components:{HRendererForm:d.HRendererForm},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const t=i(),{canvasElements:o}=t,n=a.computed({get:()=>e.modelValue,set:e=>{l("update:modelValue",e)}}),d=a.ref({});return{isOpen:n,state:d,canvasElements:o,onClose:()=>{n.value=!1}}}}),[["render",function(e,t,o,n,d,u){const r=l.QSpace,i=l.QBtn,c=l.QCardSection,m=a.resolveComponent("h-renderer-form"),s=l.QCardActions,V=l.QCard,p=l.QDialog;return a.openBlock(),a.createBlock(p,{modelValue:e.isOpen,"onUpdate:modelValue":t[3]||(t[3]=l=>e.isOpen=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:a.withCtx(()=>[a.createVNode(V,null,{default:a.withCtx(()=>[a.createVNode(c,{class:"row items-center q-pb-none"},{default:a.withCtx(()=>[t[4]||(t[4]=a.createElementVNode("div",{class:"text-h6"},"预览",-1)),a.createVNode(r),a.createVNode(i,{icon:"close",flat:"",round:"",dense:"",onClick:t[0]||(t[0]=l=>e.onClose())})]),_:1}),a.createVNode(c,null,{default:a.withCtx(()=>[a.createVNode(m,{modelValue:e.state,"onUpdate:modelValue":t[1]||(t[1]=l=>e.state=l),elements:e.canvasElements},null,8,["modelValue","elements"])]),_:1}),a.createVNode(s,{align:"right",class:"bg-white text-red"},{default:a.withCtx(()=>[a.createVNode(i,{flat:"",label:"确定",onClick:t[2]||(t[2]=l=>e.onClose())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}]]);const h=m(a.defineComponent({name:"HCanvasElement",components:{HRendererEngine:d.HRendererEngine},props:{element:{type:Object,required:!0},selectedId:{type:Number,required:!0}},setup(e){const l=a.ref(!1),t=i();return{isHover:l,schemas:a.computed(()=>[e.element.schema]),isSelected:a.computed(()=>t.isSelected(e.selectedId)),onDelete:()=>{t.removeElement(e.element)}}}}),[["render",function(e,t,o,n,d,u){const r=a.resolveComponent("h-renderer-engine"),i=l.QBtn,c=l.QCardActions,m=l.QCard;return a.openBlock(),a.createBlock(m,{class:a.normalizeClass([e.isSelected&&!e.isHover?"canvas-item-selected":"canvas-item"]),onMouseover:t[0]||(t[0]=l=>e.isHover=!0),onMouseleave:t[1]||(t[1]=l=>e.isHover=!1)},{default:a.withCtx(()=>[a.createVNode(r,{schemas:e.schemas},null,8,["schemas"]),e.isHover?(a.openBlock(),a.createBlock(c,{key:0,class:"justify-end q-pa-none"},{default:a.withCtx(()=>[a.createVNode(i,{flat:"",round:"",size:"sm",color:"red",icon:"mdi-delete",onClick:e.onDelete},null,8,["onClick"]),a.createVNode(i,{flat:"",round:"",size:"sm",color:"accent",icon:"bookmark"}),a.createVNode(i,{flat:"",round:"",size:"sm",color:"primary",icon:"share"})]),_:1})):a.createCommentVNode("",!0)]),_:1},8,["class"])}],["__scopeId","data-v-8129af03"]]);const b=m(a.defineComponent({name:"HCanvasContainer",components:{Draggable:r,HCanvasElement:h,HCanvasLayout:p},setup(e){const l=i(),{canvasElements:t}=l;return{isEmptyCanvas:a.computed(()=>l.isEmptyCanvas),canvasElements:t,onSelectedItem:e=>{l.selectElement(e)}}}}),[["render",function(e,l,t,o,n,d){const u=h,r=a.resolveComponent("draggable"),i=p;return a.openBlock(),a.createBlock(i,null,{default:a.withCtx(()=>[a.createVNode(r,{"item-key":"id",list:e.canvasElements,animation:300,group:"widgetGroup",class:"canvas-container"},a.createSlots({item:a.withCtx(({element:l})=>[(a.openBlock(),a.createBlock(u,{element:l,key:l.config.renderKey,"selected-id":l.config.renderKey,onClick:a=>e.onSelectedItem(l)},null,8,["element","selected-id","onClick"]))]),_:2},[e.isEmptyCanvas?{name:"footer",fn:a.withCtx(()=>[l[0]||(l[0]=a.createElementVNode("div",{class:"row text-center canvas-container"},[a.createElementVNode("div",{class:"col-12 self-center text-h6 text-weight-medium text-grey-5"}," 从左侧拖拽或点击来添加字段 ")],-1))]),key:"0"}:void 0]),1032,["list"])]),_:1})}],["__scopeId","data-v-b8c7d9b0"]]),N={HideBottomSpace:"hide-bottom-space",ItemAligned:"item-aligned"},w={class:"q-gutter-y-sm column"},H={class:"q-gutter-y-sm column"},C=a.defineComponent({name:"HDatePanel",components:{HExpansionItem:f,HSwitch:u.HSwitch,HTextField:u.HTextField},__name:"HDatePanel",props:{schema:{}},setup(e){const t=e,o=N,n=a.computed(()=>t.schema.attrs),d=a.computed(()=>t.schema.models);return(e,t)=>{const r=l.QList;return a.openBlock(),a.createBlock(r,{bordered:""},{default:a.withCtx(()=>[a.createVNode(a.unref(f),{icon:"mdi-information",label:"常规","default-opened":""},{default:a.withCtx(()=>[a.createVNode(a.unref(u.HTextField),{modelValue:d.value.modelValue.name,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),a.createVNode(a.unref(u.HTextField),{modelValue:n.value.label,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),a.createVNode(a.unref(f),{icon:"mdi-eject-circle",label:"状态"},{default:a.withCtx(()=>[a.createElementVNode("div",w,[a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.disable,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.disable=e),label:"Disable"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.readonly,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),a.createVNode(a.unref(f),{icon:"mdi-image-edit",label:"外观"},{default:a.withCtx(()=>[a.createElementVNode("div",H,[a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.dark,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value.dark=e),label:"Dark"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.filled,"onUpdate:modelValue":t[5]||(t[5]=e=>n.value.filled=e),label:"Filled"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.outlined,"onUpdate:modelValue":t[6]||(t[6]=e=>n.value.outlined=e),label:"Outlined"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.borderless,"onUpdate:modelValue":t[7]||(t[7]=e=>n.value.borderless=e),label:"Borderless"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.standout,"onUpdate:modelValue":t[8]||(t[8]=e=>n.value.standout=e),label:"Standout"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value[a.unref(o).HideBottomSpace],"onUpdate:modelValue":t[9]||(t[9]=e=>n.value[a.unref(o).HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.rounded,"onUpdate:modelValue":t[10]||(t[10]=e=>n.value.rounded=e),label:"Rounded"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.square,"onUpdate:modelValue":t[11]||(t[11]=e=>n.value.square=e),label:"Square"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.dense,"onUpdate:modelValue":t[12]||(t[12]=e=>n.value.dense=e),label:"Dense"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value[a.unref(o).ItemAligned],"onUpdate:modelValue":t[13]||(t[13]=e=>n.value[a.unref(o).ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}}}),g={class:"q-gutter-y-sm column"},S={class:"q-gutter-y-sm column"},y=a.defineComponent({name:"HPasswordPanel",components:{HExpansionItem:f,HSwitch:u.HSwitch,HTextField:u.HTextField},__name:"HPasswordPanel",props:{schema:{}},setup(e){const t=e,o=N,n=a.computed(()=>t.schema.attrs),d=a.computed(()=>t.schema.models);return(e,t)=>{const r=l.QList;return a.openBlock(),a.createBlock(r,{bordered:""},{default:a.withCtx(()=>[a.createVNode(a.unref(f),{icon:"mdi-information",label:"常规","default-opened":""},{default:a.withCtx(()=>[a.createVNode(a.unref(u.HTextField),{modelValue:d.value.modelValue.name,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),a.createVNode(a.unref(u.HTextField),{modelValue:n.value.label,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),a.createVNode(a.unref(f),{icon:"mdi-eject-circle",label:"状态"},{default:a.withCtx(()=>[a.createElementVNode("div",g,[a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.disable,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.disable=e),label:"Disable"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.readonly,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),a.createVNode(a.unref(f),{icon:"mdi-image-edit",label:"外观"},{default:a.withCtx(()=>[a.createElementVNode("div",S,[a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.dark,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value.dark=e),label:"Dark"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.filled,"onUpdate:modelValue":t[5]||(t[5]=e=>n.value.filled=e),label:"Filled"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.outlined,"onUpdate:modelValue":t[6]||(t[6]=e=>n.value.outlined=e),label:"Outlined"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.borderless,"onUpdate:modelValue":t[7]||(t[7]=e=>n.value.borderless=e),label:"Borderless"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.standout,"onUpdate:modelValue":t[8]||(t[8]=e=>n.value.standout=e),label:"Standout"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value[a.unref(o).HideBottomSpace],"onUpdate:modelValue":t[9]||(t[9]=e=>n.value[a.unref(o).HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.rounded,"onUpdate:modelValue":t[10]||(t[10]=e=>n.value.rounded=e),label:"Rounded"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.square,"onUpdate:modelValue":t[11]||(t[11]=e=>n.value.square=e),label:"Square"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.dense,"onUpdate:modelValue":t[12]||(t[12]=e=>n.value.dense=e),label:"Dense"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value[a.unref(o).ItemAligned],"onUpdate:modelValue":t[13]||(t[13]=e=>n.value[a.unref(o).ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}}});const x=m(a.defineComponent({name:"HConditionVariable",components:{HExpansionItem:f,HTextField:u.HTextField},setup(e){const l=i(),{condition:t}=l,o=a.ref([{label:"option1",value:!0},{label:"option2",value:!1}]);return{tableColumns:[{align:"center",name:"label",field:"calories",label:"标签"},{align:"center",name:"value",field:"fat",label:"值"}],tableRows:o,condition:t,onModify:()=>{t.options=o.value}}}}),[["render",function(e,t,o,n,d,u){const r=a.resolveComponent("h-text-field"),i=l.QInput,c=l.QPopupEdit,m=l.QTd,s=l.QTr,V=l.QTable,p=f;return a.openBlock(),a.createBlock(p,{icon:"mdi-variable",label:"流程变量"},{default:a.withCtx(()=>[a.createVNode(r,{modelValue:e.condition.variable,"onUpdate:modelValue":t[0]||(t[0]=l=>e.condition.variable=l),dense:"",label:"变量名称"},null,8,["modelValue"]),a.createVNode(V,{rows:e.tableRows,columns:e.tableColumns,"row-key":"name",dense:"",flat:"",bordered:"","hide-pagination":"","card-container-class":"q-ml-2"},{body:a.withCtx(l=>[a.createVNode(s,{props:l},{default:a.withCtx(()=>[a.createVNode(m,{key:"label",props:l},{default:a.withCtx(()=>[a.createTextVNode(a.toDisplayString(l.row.label)+" ",1),a.createVNode(c,{modelValue:l.row.label,"onUpdate:modelValue":[e=>l.row.label=e,e.onModify],title:"修改标签",buttons:"","label-set":"确定","label-cancel":"取消"},{default:a.withCtx(e=>[a.createVNode(i,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),a.createVNode(m,{key:"value",props:l},{default:a.withCtx(()=>[a.createTextVNode(a.toDisplayString(l.row.value),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})}]]);const E=m(a.defineComponent({name:"HSheetPanel",components:{HConditionVariable:x}}),[["render",function(e,t,o,n,d,u){const r=x,i=l.QList;return a.openBlock(),a.createBlock(i,{bordered:""},{default:a.withCtx(()=>[a.createVNode(r)]),_:1})}]]),_={class:"q-gutter-y-sm column"},U={class:"q-gutter-y-sm column"},k=a.defineComponent({name:"HTextareaPanel",components:{HExpansionItem:f,HSwitch:u.HSwitch,HTextField:u.HTextField},__name:"HTextareaPanel",props:{schema:{}},setup(e){const t=e,o=N,n=a.computed(()=>t.schema.attrs),d=a.computed(()=>t.schema.models);return(e,t)=>{const r=l.QList;return a.openBlock(),a.createBlock(r,{bordered:""},{default:a.withCtx(()=>[a.createVNode(a.unref(f),{icon:"mdi-information",label:"常规","default-opened":""},{default:a.withCtx(()=>[a.createVNode(a.unref(u.HTextField),{modelValue:d.value.modelValue.name,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),a.createVNode(a.unref(u.HTextField),{modelValue:n.value.label,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),a.createVNode(a.unref(f),{icon:"mdi-eject-circle",label:"状态"},{default:a.withCtx(()=>[a.createElementVNode("div",_,[a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.disable,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.disable=e),label:"Disable"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.readonly,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),a.createVNode(a.unref(f),{icon:"mdi-image-edit",label:"外观"},{default:a.withCtx(()=>[a.createElementVNode("div",U,[a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.dark,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value.dark=e),label:"Dark"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.filled,"onUpdate:modelValue":t[5]||(t[5]=e=>n.value.filled=e),label:"Filled"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.outlined,"onUpdate:modelValue":t[6]||(t[6]=e=>n.value.outlined=e),label:"Outlined"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.borderless,"onUpdate:modelValue":t[7]||(t[7]=e=>n.value.borderless=e),label:"Borderless"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.standout,"onUpdate:modelValue":t[8]||(t[8]=e=>n.value.standout=e),label:"Standout"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value[a.unref(o).HideBottomSpace],"onUpdate:modelValue":t[9]||(t[9]=e=>n.value[a.unref(o).HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.rounded,"onUpdate:modelValue":t[10]||(t[10]=e=>n.value.rounded=e),label:"Rounded"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.square,"onUpdate:modelValue":t[11]||(t[11]=e=>n.value.square=e),label:"Square"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.dense,"onUpdate:modelValue":t[12]||(t[12]=e=>n.value.dense=e),label:"Dense"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value[a.unref(o).ItemAligned],"onUpdate:modelValue":t[13]||(t[13]=e=>n.value[a.unref(o).ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}}}),B={class:"q-gutter-y-sm column"},T={class:"q-gutter-y-sm column"},I=a.defineComponent({name:"HTextFieldPanel",components:{HExpansionItem:f,HSwitch:u.HSwitch,HTextField:u.HTextField},__name:"HTextFieldPanel",props:{schema:{}},setup(e){const t=e,o=N,n=a.computed(()=>t.schema.attrs),d=a.computed(()=>t.schema.models);return(e,t)=>{const r=l.QList;return a.openBlock(),a.createBlock(r,{bordered:""},{default:a.withCtx(()=>[a.createVNode(a.unref(f),{icon:"mdi-information",label:"常规","default-opened":""},{default:a.withCtx(()=>[a.createVNode(a.unref(u.HTextField),{modelValue:d.value.modelValue.name,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),a.createVNode(a.unref(u.HTextField),{modelValue:n.value.label,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),a.createVNode(a.unref(f),{icon:"mdi-eject-circle",label:"状态"},{default:a.withCtx(()=>[a.createElementVNode("div",B,[a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.disable,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.disable=e),label:"Disable"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.readonly,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),a.createVNode(a.unref(f),{icon:"mdi-image-edit",label:"外观"},{default:a.withCtx(()=>[a.createElementVNode("div",T,[a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.dark,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value.dark=e),label:"Dark"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.filled,"onUpdate:modelValue":t[5]||(t[5]=e=>n.value.filled=e),label:"Filled"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.outlined,"onUpdate:modelValue":t[6]||(t[6]=e=>n.value.outlined=e),label:"Outlined"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.borderless,"onUpdate:modelValue":t[7]||(t[7]=e=>n.value.borderless=e),label:"Borderless"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.standout,"onUpdate:modelValue":t[8]||(t[8]=e=>n.value.standout=e),label:"Standout"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value[a.unref(o).HideBottomSpace],"onUpdate:modelValue":t[9]||(t[9]=e=>n.value[a.unref(o).HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.rounded,"onUpdate:modelValue":t[10]||(t[10]=e=>n.value.rounded=e),label:"Rounded"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.square,"onUpdate:modelValue":t[11]||(t[11]=e=>n.value.square=e),label:"Square"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.dense,"onUpdate:modelValue":t[12]||(t[12]=e=>n.value.dense=e),label:"Dense"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value[a.unref(o).ItemAligned],"onUpdate:modelValue":t[13]||(t[13]=e=>n.value[a.unref(o).ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}}}),D={class:"q-gutter-y-sm column"},F={class:"q-gutter-y-sm column"},q=a.defineComponent({name:"HTimePanel",components:{HExpansionItem:f,HSwitch:u.HSwitch,HTextField:u.HTextField},__name:"HTimePanel",props:{schema:{}},setup(e){const t=e,o=N,n=a.computed(()=>t.schema.attrs),d=a.computed(()=>t.schema.models);return(e,t)=>{const r=l.QList;return a.openBlock(),a.createBlock(r,{bordered:""},{default:a.withCtx(()=>[a.createVNode(a.unref(f),{icon:"mdi-information",label:"常规","default-opened":""},{default:a.withCtx(()=>[a.createVNode(a.unref(u.HTextField),{modelValue:d.value.modelValue.name,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),a.createVNode(a.unref(u.HTextField),{modelValue:n.value.label,"onUpdate:modelValue":t[1]||(t[1]=e=>n.value.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),a.createVNode(a.unref(f),{icon:"mdi-eject-circle",label:"状态"},{default:a.withCtx(()=>[a.createElementVNode("div",D,[a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.disable,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value.disable=e),label:"Disable"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.readonly,"onUpdate:modelValue":t[3]||(t[3]=e=>n.value.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),a.createVNode(a.unref(f),{icon:"mdi-image-edit",label:"外观"},{default:a.withCtx(()=>[a.createElementVNode("div",F,[a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.dark,"onUpdate:modelValue":t[4]||(t[4]=e=>n.value.dark=e),label:"Dark"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.filled,"onUpdate:modelValue":t[5]||(t[5]=e=>n.value.filled=e),label:"Filled"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.outlined,"onUpdate:modelValue":t[6]||(t[6]=e=>n.value.outlined=e),label:"Outlined"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.borderless,"onUpdate:modelValue":t[7]||(t[7]=e=>n.value.borderless=e),label:"Borderless"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.standout,"onUpdate:modelValue":t[8]||(t[8]=e=>n.value.standout=e),label:"Standout"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value[a.unref(o).HideBottomSpace],"onUpdate:modelValue":t[9]||(t[9]=e=>n.value[a.unref(o).HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.rounded,"onUpdate:modelValue":t[10]||(t[10]=e=>n.value.rounded=e),label:"Rounded"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.square,"onUpdate:modelValue":t[11]||(t[11]=e=>n.value.square=e),label:"Square"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value.dense,"onUpdate:modelValue":t[12]||(t[12]=e=>n.value.dense=e),label:"Dense"},null,8,["modelValue"]),a.createVNode(a.unref(u.HSwitch),{modelValue:n.value[a.unref(o).ItemAligned],"onUpdate:modelValue":t[13]||(t[13]=e=>n.value[a.unref(o).ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}}}),P=a.defineComponent({name:"HGeneratorLayout",components:{HSheetPanel:E,HFormInformation:s,DATE_PICKER:C,PASSWORD:y,TEXT_AREA:k,TEXT_FIELD:I,TIME_PICKER:q},__name:"HPropertyPanel",setup(e){const o=i(),{isInformationPanel:n,currentSchema:d,currentPanel:u}=t.storeToRefs(o),r=a.shallowRef("info"),c=a.shallowRef("display");return(e,t)=>{const o=l.QTab,i=l.QTabs,m=l.QSeparator,V=l.QTabPanel,p=l.QTabPanels,f=l.QCard;return a.unref(n)?(a.openBlock(),a.createBlock(f,{key:0},{default:a.withCtx(()=>[a.createVNode(i,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a.withCtx(()=>[a.createVNode(o,{name:"info",label:"信息"})]),_:1},8,["modelValue"]),a.createVNode(m),a.createVNode(p,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),animated:""},{default:a.withCtx(()=>[a.createVNode(V,{name:"info"},{default:a.withCtx(()=>[a.createVNode(a.unref(s))]),_:1})]),_:1},8,["modelValue"])]),_:1})):(a.openBlock(),a.createBlock(f,{key:1},{default:a.withCtx(()=>[a.createVNode(i,{modelValue:c.value,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a.withCtx(()=>[a.createVNode(o,{name:"display",label:"显示"}),a.createVNode(o,{name:"sheet",label:"表单"})]),_:1},8,["modelValue"]),a.createVNode(m),a.createVNode(p,{modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=e=>c.value=e),animated:""},{default:a.withCtx(()=>[a.createVNode(V,{name:"display",class:"q-pa-none"},{default:a.withCtx(()=>[(a.openBlock(),a.createBlock(a.resolveDynamicComponent(a.unref(u)),{schema:a.unref(d)},null,8,["schema"]))]),_:1}),a.createVNode(V,{name:"sheet",class:"q-pa-none"},{default:a.withCtx(()=>[a.createVNode(a.unref(E))]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}}),Q=a.defineComponent({name:"HWidgetPanel",components:{Draggable:r},setup(){const e=d.WIDGET_DEFINITIONS,l=i(),a=e=>d.ElementUtils.create(e);return{widgetGroups:e,cloneWidget:a,addWidget:e=>{const t=a(e);l.addElement(t)}}}}),O={class:"widget-list"},R={class:"widget-title"},A=["onClick"],L={class:"widget-body"};const j=m(Q,[["render",function(e,t,o,n,d,u){const r=l.QIcon,i=a.resolveComponent("draggable");return a.openBlock(),a.createElementBlock("div",O,[(a.openBlock(!0),a.createElementBlock(a.Fragment,null,a.renderList(e.widgetGroups,(l,t)=>(a.openBlock(),a.createElementBlock("div",{key:t},[a.createElementVNode("div",R,a.toDisplayString(l.title),1),a.createVNode(i,{modelValue:l.list,"onUpdate:modelValue":e=>l.list=e,"item-key":"schemaName",draggable:".widget-item",sort:!1,group:{name:"widgetGroup",pull:"clone",put:!1},clone:e.cloneWidget},{item:a.withCtx(({element:l})=>[a.createElementVNode("div",{class:"widget-item",onClick:a=>e.addWidget(l)},[a.createElementVNode("div",L,[a.createVNode(r,{name:l.icon},null,8,["name"]),a.createTextVNode(" "+a.toDisplayString(l.title),1)])],8,A)]),_:1},8,["modelValue","onUpdate:modelValue","clone"])]))),128))])}],["__scopeId","data-v-ae3d4bd2"]]);const W=m(a.defineComponent({name:"HDynamicForms",components:{HWidgetPanel:j,HPropertyPanel:P,HCanvasContainer:b,HFormPreviewDialog:v,HFormUploadDialog:V},props:{instance:{type:Object,required:!0},title:{type:String,default:"Dante Cloud Form Designer"},container:{type:Boolean,default:!1},height:{type:String,default:"90vh"},item:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:l}){const t=a.ref(!1),o=a.ref(!1),n=a.ref(!1),d=a.ref(!1),u=c(),r=i();return a.watch(()=>e.item,l=>{u.init(e.instance),r.loading(l)},{deep:!0,immediate:!0}),a.watch(()=>r.isClosed,e=>{e&&l("close")}),a.onUnmounted(()=>{u.$reset(),r.$reset()}),{leftDrawerOpen:t,toggleLeftDrawer(){t.value=!t.value},rightDrawerOpen:o,toggleRightDrawer(){o.value=!o.value},openPreview:n,openUpload:d}}}),[["render",function(e,t,o,n,d,u){const r=l.QBtn,i=l.QToolbarTitle,c=l.QToolbar,m=l.QHeader,s=j,p=l.QDrawer,f=P,h=b,N=v,w=V,H=l.QLayout;return a.openBlock(),a.createBlock(H,{view:"lHr LpR lfr",container:e.container,class:"bg-grey-2",style:a.normalizeStyle(`height: ${e.height}`)},{default:a.withCtx(()=>[a.createVNode(m,{bordered:"",class:"text-primary bg-white"},{default:a.withCtx(()=>[a.createVNode(c,null,{default:a.withCtx(()=>[a.createVNode(r,{dense:"",flat:"",round:"",icon:"menu",onClick:t[0]||(t[0]=l=>e.leftDrawerOpen=!e.leftDrawerOpen)}),a.createVNode(i,null,{default:a.withCtx(()=>[a.createTextVNode(a.toDisplayString(e.title),1)]),_:1}),a.createVNode(r,{flat:"",round:"",dense:"",icon:"mdi-eye",class:"q-mr-xs",onClick:t[1]||(t[1]=l=>e.openPreview=!0)}),a.createVNode(r,{flat:"",round:"",dense:"",icon:"mdi-cloud-upload",onClick:t[2]||(t[2]=l=>e.openUpload=!0)})]),_:1})]),_:1}),a.createVNode(p,{"show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":t[3]||(t[3]=l=>e.leftDrawerOpen=l),side:"left",behavior:"desktop",bordered:""},{default:a.withCtx(()=>[a.createVNode(s)]),_:1},8,["modelValue"]),a.createVNode(p,{"show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":t[4]||(t[4]=l=>e.rightDrawerOpen=l),side:"right",behavior:"desktop",bordered:""},{default:a.withCtx(()=>[a.createVNode(f)]),_:1},8,["modelValue"]),a.createVNode(h),a.createVNode(N,{modelValue:e.openPreview,"onUpdate:modelValue":t[5]||(t[5]=l=>e.openPreview=l)},null,8,["modelValue"]),a.createVNode(w,{modelValue:e.openUpload,"onUpdate:modelValue":t[6]||(t[6]=l=>e.openUpload=l)},null,8,["modelValue"])]),_:1},8,["container","style"])}]]);W.install=e=>{e.component(W.name,W)};const M=[W],G={install:e=>{M.map(l=>e.component(l.name,l))}};Object.defineProperty(e,"Swal",{enumerable:!0,get:()=>n.Swal}),Object.defineProperty(e,"toast",{enumerable:!0,get:()=>n.toast}),Object.defineProperty(e,"ElementUtils",{enumerable:!0,get:()=>d.ElementUtils}),Object.defineProperty(e,"WIDGET_DEFINITIONS",{enumerable:!0,get:()=>d.WIDGET_DEFINITIONS}),e.Attributes=N,e.HDynamicForms=W,e.default=G,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
