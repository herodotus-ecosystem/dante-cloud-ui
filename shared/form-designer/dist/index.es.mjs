import{QList as e,QInput as l,QDialog as a,QCard as o,QCardSection as n,QSpace as t,QBtn as d,QCardActions as u,QPageContainer as m,QPage as s,QExpansionItem as i,QTable as r,QTr as c,QTd as p,QPopupEdit as V,QTabs as v,QTab as b,QSeparator as f,QTabPanels as h,QTabPanel as g,QIcon as U,QLayout as _,QHeader as y,QToolbar as H,QToolbarTitle as E,QDrawer as w}from"quasar";import{defineComponent as I,ref as S,openBlock as C,createBlock as D,withCtx as k,createVNode as q,computed as F,createElementVNode as P,renderSlot as x,mergeProps as O,resolveComponent as B,normalizeClass as R,createCommentVNode as T,createSlots as A,unref as N,createTextVNode as L,toDisplayString as j,shallowRef as W,resolveDynamicComponent as G,createElementBlock as M,Fragment as $,renderList as K,watch as z,onUnmounted as X,normalizeStyle as J}from"vue";import{defineStore as Q,storeToRefs as Y}from"pinia";import{isEmpty as Z,remove as ee}from"lodash-es";import{toast as le,Swal as ae}from"@herodotus-cloud/core";import{Swal as oe,toast as ne}from"@herodotus-cloud/core";import{HRendererForm as te,HRendererEngine as de,WIDGET_DEFINITIONS as ue,ElementUtils as me}from"@herodotus-cloud/form-engine";import{ElementUtils as se,WIDGET_DEFINITIONS as ie}from"@herodotus-cloud/form-engine";import{HTextField as re,HSwitch as ce}from"@herodotus-cloud/components";import pe from"vuedraggable";const Ve=Q("FormDesignerCanvas",{state:()=>({isClosed:!1,canvasElements:[],sheet:{},selectedElement:{},id:"",name:"",activityName:""}),getters:{isSelected:e=>l=>!(Z(e.selectedElement)||!e.selectedElement.id)&&e.selectedElement.config.renderKey===l,isEmptyCanvas:e=>Z(e.canvasElements),getElements:e=>e.canvasElements,currentSchema(){return Z(this.selectedElement)||Z(this.selectedElement.schema)?{}:this.selectedElement.schema},currentConfig(){return Z(this.selectedElement)||Z(this.selectedElement.config)?{}:this.selectedElement.config},currentPanel(){return Z(this.currentConfig)||Z(this.currentConfig.panel)?"INFORMATION_PANEL":this.currentConfig.panel},isInformationPanel(){return"INFORMATION_PANEL"===this.currentPanel},condition(){return Z(this.sheet.condition)&&(this.sheet.condition={variable:"",options:[]}),this.sheet.condition}},actions:{selectElement(e){this.selectedElement=e},selectFirstElement(){Z(this.canvasElements)||this.selectElement(this.canvasElements[0])},loading(e){Z(e.modeler)||(this.canvasElements=e.modeler.elements,this.sheet=e.modeler.sheet),this.id=e.id,this.name=e.name,this.activityName=e.activityName,this.selectFirstElement()},compose(){return{id:this.id,name:this.name,activityName:this.activityName,modeler:{elements:this.canvasElements,sheet:this.sheet}}},addElement(e){void 0===this.canvasElements&&(this.canvasElements=[]),this.canvasElements.push(e),this.selectElement(e)},removeElement(e){!Z(this.canvasElements)&&e.id&&(ee(this.canvasElements,l=>l.id===e.id),this.selectFirstElement())}}}),ve=Q("FormDesignerResources",{state:()=>({resources:{}}),getters:{dynamicForm:e=>e.resources.dynamicForm()},actions:{init(e){this.resources=e}}}),be=(e,l)=>{const a=e.__vccOpts||e;for(const[o,n]of l)a[o]=n;return a};const fe=/* @__PURE__ */be(I({name:"HFormInformation",setup(){const e=Ve(),{id:l,name:a,activityName:o}=e,n=S(null),t=S(null);return{id:l,name:a,activityName:o,nameRef:n,activityNameRef:t,validate:()=>{const e=n.value,l=t.value;return e.validate(),l.validate(),!e.hasError&&!l.hasError}}}}),[["render",function(a,o,n,t,d,u){const m=l,s=e;return C(),D(s,null,{default:k(()=>[q(m,{modelValue:a.id,"onUpdate:modelValue":o[0]||(o[0]=e=>a.id=e),dense:"",outlined:"",label:"ID"},null,8,["modelValue"]),q(m,{ref:"nameRef",modelValue:a.name,"onUpdate:modelValue":o[1]||(o[1]=e=>a.name=e),dense:"",outlined:"",label:"表单名称",rules:[e=>!!e||"表单名称不能为空"]},null,8,["modelValue","rules"]),q(m,{ref:"activityNameRef",modelValue:a.activityName,"onUpdate:modelValue":o[2]||(o[2]=e=>a.activityName=e),dense:"",outlined:"",label:"流程节点名称",rules:[e=>!!e||"流程节点不能为空"]},null,8,["modelValue","rules"])]),_:1})}]]);const he=/* @__PURE__ */be(I({name:"HFormUploadDialog",components:{HFormInformation:fe},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","update:open","save"],setup(e,{emit:l}){const a=F({get:()=>e.modelValue,set:e=>{l("update:modelValue",e)}}),o=S(null),n=ve(),t=Ve();return{isOpen:a,onSave:()=>{if(o.value){if(o.value.validate()){const e=t.compose();n.dynamicForm.saveOrUpdate(e).then(e=>{a.value=!1,ae.fire({title:"保存成功！",text:"您是否需要关闭设计器？",icon:"success",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确定!",cancelButtonText:"取消",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOut"}}).then(e=>{e.value&&(t.isClosed=!0)})}).catch(e=>{a.value=!1,le.error("保存失败！")})}}},infoRef:o}}}),[["render",function(e,l,m,s,i,r){const c=t,p=d,V=n,v=fe,b=u,f=o,h=a;return C(),D(h,{modelValue:e.isOpen,"onUpdate:modelValue":l[3]||(l[3]=l=>e.isOpen=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:k(()=>[q(f,{style:{width:"20vw"}},{default:k(()=>[q(V,{class:"row items-center q-pb-none"},{default:k(()=>[l[4]||(l[4]=P("div",{class:"text-h6"},"上传表单",-1)),q(c),q(p,{icon:"close",flat:"",round:"",dense:"",onClick:l[0]||(l[0]=l=>e.isOpen=!1)})]),_:1}),q(V,null,{default:k(()=>[q(v,{ref:"infoRef"},null,512)]),_:1}),q(b,{align:"right"},{default:k(()=>[q(p,{label:"取消",color:"red",onClick:l[1]||(l[1]=l=>e.isOpen=!1)}),q(p,{label:"保存",color:"primary",onClick:l[2]||(l[2]=l=>e.onSave())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}]]);const ge=/* @__PURE__ */be(I({name:"HCanvasLayout"}),[["render",function(e,l,a,n,t,d){const u=o,i=s,r=m;return C(),D(r,null,{default:k(()=>[q(i,null,{default:k(()=>[q(u,{class:"q-ma-md"},{default:k(()=>[x(e.$slots,"default")]),_:3})]),_:3})]),_:3})}]]);const Ue=/* @__PURE__ */be(I({name:"HExpansionItem",props:{headerClass:{type:String,default:"text-primary"}}}),[["render",function(e,l,a,t,d,u){const m=n,s=o,r=i;return C(),D(r,O({"expand-separator":"","header-class":e.headerClass},e.$attrs),{default:k(()=>[q(s,null,{default:k(()=>[q(m,null,{default:k(()=>[x(e.$slots,"default")]),_:3})]),_:3})]),_:3},16,["header-class"])}]]);const _e=/* @__PURE__ */be(I({name:"HFormPreviewDialog",components:{HRendererForm:te},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const a=Ve(),{canvasElements:o}=a,n=F({get:()=>e.modelValue,set:e=>{l("update:modelValue",e)}}),t=S({});return{isOpen:n,state:t,canvasElements:o,onClose:()=>{n.value=!1}}}}),[["render",function(e,l,m,s,i,r){const c=t,p=d,V=n,v=B("h-renderer-form"),b=u,f=o,h=a;return C(),D(h,{modelValue:e.isOpen,"onUpdate:modelValue":l[3]||(l[3]=l=>e.isOpen=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:k(()=>[q(f,null,{default:k(()=>[q(V,{class:"row items-center q-pb-none"},{default:k(()=>[l[4]||(l[4]=P("div",{class:"text-h6"},"预览",-1)),q(c),q(p,{icon:"close",flat:"",round:"",dense:"",onClick:l[0]||(l[0]=l=>e.onClose())})]),_:1}),q(V,null,{default:k(()=>[q(v,{modelValue:e.state,"onUpdate:modelValue":l[1]||(l[1]=l=>e.state=l),elements:e.canvasElements},null,8,["modelValue","elements"])]),_:1}),q(b,{align:"right",class:"bg-white text-red"},{default:k(()=>[q(p,{flat:"",label:"确定",onClick:l[2]||(l[2]=l=>e.onClose())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}]]);const ye=/* @__PURE__ */be(I({name:"HCanvasElement",components:{HRendererEngine:de},props:{element:{type:Object,required:!0},selectedId:{type:Number,required:!0}},setup(e){const l=S(!1),a=Ve();return{isHover:l,schemas:F(()=>[e.element.schema]),isSelected:F(()=>a.isSelected(e.selectedId)),onDelete:()=>{a.removeElement(e.element)}}}}),[["render",function(e,l,a,n,t,m){const s=B("h-renderer-engine"),i=d,r=u,c=o;return C(),D(c,{class:R([e.isSelected&&!e.isHover?"canvas-item-selected":"canvas-item"]),onMouseover:l[0]||(l[0]=l=>e.isHover=!0),onMouseleave:l[1]||(l[1]=l=>e.isHover=!1)},{default:k(()=>[q(s,{schemas:e.schemas},null,8,["schemas"]),e.isHover?(C(),D(r,{key:0,class:"justify-end q-pa-none"},{default:k(()=>[q(i,{flat:"",round:"",size:"sm",color:"red",icon:"mdi-delete",onClick:e.onDelete},null,8,["onClick"]),q(i,{flat:"",round:"",size:"sm",color:"accent",icon:"bookmark"}),q(i,{flat:"",round:"",size:"sm",color:"primary",icon:"share"})]),_:1})):T("",!0)]),_:1},8,["class"])}],["__scopeId","data-v-8129af03"]]);const He=/* @__PURE__ */be(I({name:"HCanvasContainer",components:{Draggable:pe,HCanvasElement:ye,HCanvasLayout:ge},setup(e){const l=Ve(),{canvasElements:a}=l;return{isEmptyCanvas:F(()=>l.isEmptyCanvas),canvasElements:a,onSelectedItem:e=>{l.selectElement(e)}}}}),[["render",function(e,l,a,o,n,t){const d=ye,u=B("draggable"),m=ge;return C(),D(m,null,{default:k(()=>[q(u,{"item-key":"id",list:e.canvasElements,animation:300,group:"widgetGroup",class:"canvas-container"},A({item:k(({element:l})=>[(C(),D(d,{element:l,key:l.config.renderKey,"selected-id":l.config.renderKey,onClick:a=>e.onSelectedItem(l)},null,8,["element","selected-id","onClick"]))]),_:2},[e.isEmptyCanvas?{name:"footer",fn:k(()=>[l[0]||(l[0]=P("div",{class:"row text-center canvas-container"},[P("div",{class:"col-12 self-center text-h6 text-weight-medium text-grey-5"}," 从左侧拖拽或点击来添加字段 ")],-1))]),key:"0"}:void 0]),1032,["list"])]),_:1})}],["__scopeId","data-v-b8c7d9b0"]]),Ee={HideBottomSpace:"hide-bottom-space",ItemAligned:"item-aligned"},we={class:"q-gutter-y-sm column"},Ie={class:"q-gutter-y-sm column"},Se=/* @__PURE__ */I({name:"HDatePanel",components:{HExpansionItem:Ue,HSwitch:ce,HTextField:re},__name:"HDatePanel",props:{schema:{}},setup(l){const a=l,o=Ee,n=F(()=>a.schema.attrs),t=F(()=>a.schema.models);return(l,a)=>{const d=e;return C(),D(d,{bordered:""},{default:k(()=>[q(N(Ue),{icon:"mdi-information",label:"常规","default-opened":""},{default:k(()=>[q(N(re),{modelValue:t.value.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),q(N(re),{modelValue:n.value.label,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),q(N(Ue),{icon:"mdi-eject-circle",label:"状态"},{default:k(()=>[P("div",we,[q(N(ce),{modelValue:n.value.disable,"onUpdate:modelValue":a[2]||(a[2]=e=>n.value.disable=e),label:"Disable"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.readonly,"onUpdate:modelValue":a[3]||(a[3]=e=>n.value.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),q(N(Ue),{icon:"mdi-image-edit",label:"外观"},{default:k(()=>[P("div",Ie,[q(N(ce),{modelValue:n.value.dark,"onUpdate:modelValue":a[4]||(a[4]=e=>n.value.dark=e),label:"Dark"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.filled,"onUpdate:modelValue":a[5]||(a[5]=e=>n.value.filled=e),label:"Filled"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.outlined,"onUpdate:modelValue":a[6]||(a[6]=e=>n.value.outlined=e),label:"Outlined"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.borderless,"onUpdate:modelValue":a[7]||(a[7]=e=>n.value.borderless=e),label:"Borderless"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.standout,"onUpdate:modelValue":a[8]||(a[8]=e=>n.value.standout=e),label:"Standout"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value[N(o).HideBottomSpace],"onUpdate:modelValue":a[9]||(a[9]=e=>n.value[N(o).HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.rounded,"onUpdate:modelValue":a[10]||(a[10]=e=>n.value.rounded=e),label:"Rounded"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.square,"onUpdate:modelValue":a[11]||(a[11]=e=>n.value.square=e),label:"Square"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.dense,"onUpdate:modelValue":a[12]||(a[12]=e=>n.value.dense=e),label:"Dense"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value[N(o).ItemAligned],"onUpdate:modelValue":a[13]||(a[13]=e=>n.value[N(o).ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}}}),Ce={class:"q-gutter-y-sm column"},De={class:"q-gutter-y-sm column"},ke=/* @__PURE__ */I({name:"HPasswordPanel",components:{HExpansionItem:Ue,HSwitch:ce,HTextField:re},__name:"HPasswordPanel",props:{schema:{}},setup(l){const a=l,o=Ee,n=F(()=>a.schema.attrs),t=F(()=>a.schema.models);return(l,a)=>{const d=e;return C(),D(d,{bordered:""},{default:k(()=>[q(N(Ue),{icon:"mdi-information",label:"常规","default-opened":""},{default:k(()=>[q(N(re),{modelValue:t.value.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),q(N(re),{modelValue:n.value.label,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),q(N(Ue),{icon:"mdi-eject-circle",label:"状态"},{default:k(()=>[P("div",Ce,[q(N(ce),{modelValue:n.value.disable,"onUpdate:modelValue":a[2]||(a[2]=e=>n.value.disable=e),label:"Disable"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.readonly,"onUpdate:modelValue":a[3]||(a[3]=e=>n.value.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),q(N(Ue),{icon:"mdi-image-edit",label:"外观"},{default:k(()=>[P("div",De,[q(N(ce),{modelValue:n.value.dark,"onUpdate:modelValue":a[4]||(a[4]=e=>n.value.dark=e),label:"Dark"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.filled,"onUpdate:modelValue":a[5]||(a[5]=e=>n.value.filled=e),label:"Filled"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.outlined,"onUpdate:modelValue":a[6]||(a[6]=e=>n.value.outlined=e),label:"Outlined"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.borderless,"onUpdate:modelValue":a[7]||(a[7]=e=>n.value.borderless=e),label:"Borderless"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.standout,"onUpdate:modelValue":a[8]||(a[8]=e=>n.value.standout=e),label:"Standout"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value[N(o).HideBottomSpace],"onUpdate:modelValue":a[9]||(a[9]=e=>n.value[N(o).HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.rounded,"onUpdate:modelValue":a[10]||(a[10]=e=>n.value.rounded=e),label:"Rounded"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.square,"onUpdate:modelValue":a[11]||(a[11]=e=>n.value.square=e),label:"Square"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.dense,"onUpdate:modelValue":a[12]||(a[12]=e=>n.value.dense=e),label:"Dense"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value[N(o).ItemAligned],"onUpdate:modelValue":a[13]||(a[13]=e=>n.value[N(o).ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}}});const qe=/* @__PURE__ */be(I({name:"HConditionVariable",components:{HExpansionItem:Ue,HTextField:re},setup(e){const l=Ve(),{condition:a}=l,o=S([{label:"option1",value:!0},{label:"option2",value:!1}]);return{tableColumns:[{align:"center",name:"label",field:"calories",label:"标签"},{align:"center",name:"value",field:"fat",label:"值"}],tableRows:o,condition:a,onModify:()=>{a.options=o.value}}}}),[["render",function(e,a,o,n,t,d){const u=B("h-text-field"),m=l,s=V,i=p,v=c,b=r,f=Ue;return C(),D(f,{icon:"mdi-variable",label:"流程变量"},{default:k(()=>[q(u,{modelValue:e.condition.variable,"onUpdate:modelValue":a[0]||(a[0]=l=>e.condition.variable=l),dense:"",label:"变量名称"},null,8,["modelValue"]),q(b,{rows:e.tableRows,columns:e.tableColumns,"row-key":"name",dense:"",flat:"",bordered:"","hide-pagination":"","card-container-class":"q-ml-2"},{body:k(l=>[q(v,{props:l},{default:k(()=>[q(i,{key:"label",props:l},{default:k(()=>[L(j(l.row.label)+" ",1),q(s,{modelValue:l.row.label,"onUpdate:modelValue":[e=>l.row.label=e,e.onModify],title:"修改标签",buttons:"","label-set":"确定","label-cancel":"取消"},{default:k(e=>[q(m,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),q(i,{key:"value",props:l},{default:k(()=>[L(j(l.row.value),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})}]]);const Fe=/* @__PURE__ */be(I({name:"HSheetPanel",components:{HConditionVariable:qe}}),[["render",function(l,a,o,n,t,d){const u=qe,m=e;return C(),D(m,{bordered:""},{default:k(()=>[q(u)]),_:1})}]]),Pe={class:"q-gutter-y-sm column"},xe={class:"q-gutter-y-sm column"},Oe={class:"q-gutter-y-sm column"},Be={class:"q-gutter-y-sm column"},Re={class:"q-gutter-y-sm column"},Te={class:"q-gutter-y-sm column"},Ae=/* @__PURE__ */I({name:"HGeneratorLayout",components:{HSheetPanel:Fe,HFormInformation:fe,DATE_PICKER:Se,PASSWORD:ke,TEXT_AREA:/* @__PURE__ */I({name:"HTextareaPanel",components:{HExpansionItem:Ue,HSwitch:ce,HTextField:re},__name:"HTextareaPanel",props:{schema:{}},setup(l){const a=l,o=Ee,n=F(()=>a.schema.attrs),t=F(()=>a.schema.models);return(l,a)=>{const d=e;return C(),D(d,{bordered:""},{default:k(()=>[q(N(Ue),{icon:"mdi-information",label:"常规","default-opened":""},{default:k(()=>[q(N(re),{modelValue:t.value.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),q(N(re),{modelValue:n.value.label,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),q(N(Ue),{icon:"mdi-eject-circle",label:"状态"},{default:k(()=>[P("div",Pe,[q(N(ce),{modelValue:n.value.disable,"onUpdate:modelValue":a[2]||(a[2]=e=>n.value.disable=e),label:"Disable"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.readonly,"onUpdate:modelValue":a[3]||(a[3]=e=>n.value.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),q(N(Ue),{icon:"mdi-image-edit",label:"外观"},{default:k(()=>[P("div",xe,[q(N(ce),{modelValue:n.value.dark,"onUpdate:modelValue":a[4]||(a[4]=e=>n.value.dark=e),label:"Dark"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.filled,"onUpdate:modelValue":a[5]||(a[5]=e=>n.value.filled=e),label:"Filled"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.outlined,"onUpdate:modelValue":a[6]||(a[6]=e=>n.value.outlined=e),label:"Outlined"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.borderless,"onUpdate:modelValue":a[7]||(a[7]=e=>n.value.borderless=e),label:"Borderless"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.standout,"onUpdate:modelValue":a[8]||(a[8]=e=>n.value.standout=e),label:"Standout"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value[N(o).HideBottomSpace],"onUpdate:modelValue":a[9]||(a[9]=e=>n.value[N(o).HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.rounded,"onUpdate:modelValue":a[10]||(a[10]=e=>n.value.rounded=e),label:"Rounded"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.square,"onUpdate:modelValue":a[11]||(a[11]=e=>n.value.square=e),label:"Square"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.dense,"onUpdate:modelValue":a[12]||(a[12]=e=>n.value.dense=e),label:"Dense"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value[N(o).ItemAligned],"onUpdate:modelValue":a[13]||(a[13]=e=>n.value[N(o).ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}}}),TEXT_FIELD:/* @__PURE__ */I({name:"HTextFieldPanel",components:{HExpansionItem:Ue,HSwitch:ce,HTextField:re},__name:"HTextFieldPanel",props:{schema:{}},setup(l){const a=l,o=Ee,n=F(()=>a.schema.attrs),t=F(()=>a.schema.models);return(l,a)=>{const d=e;return C(),D(d,{bordered:""},{default:k(()=>[q(N(Ue),{icon:"mdi-information",label:"常规","default-opened":""},{default:k(()=>[q(N(re),{modelValue:t.value.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),q(N(re),{modelValue:n.value.label,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),q(N(Ue),{icon:"mdi-eject-circle",label:"状态"},{default:k(()=>[P("div",Oe,[q(N(ce),{modelValue:n.value.disable,"onUpdate:modelValue":a[2]||(a[2]=e=>n.value.disable=e),label:"Disable"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.readonly,"onUpdate:modelValue":a[3]||(a[3]=e=>n.value.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),q(N(Ue),{icon:"mdi-image-edit",label:"外观"},{default:k(()=>[P("div",Be,[q(N(ce),{modelValue:n.value.dark,"onUpdate:modelValue":a[4]||(a[4]=e=>n.value.dark=e),label:"Dark"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.filled,"onUpdate:modelValue":a[5]||(a[5]=e=>n.value.filled=e),label:"Filled"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.outlined,"onUpdate:modelValue":a[6]||(a[6]=e=>n.value.outlined=e),label:"Outlined"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.borderless,"onUpdate:modelValue":a[7]||(a[7]=e=>n.value.borderless=e),label:"Borderless"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.standout,"onUpdate:modelValue":a[8]||(a[8]=e=>n.value.standout=e),label:"Standout"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value[N(o).HideBottomSpace],"onUpdate:modelValue":a[9]||(a[9]=e=>n.value[N(o).HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.rounded,"onUpdate:modelValue":a[10]||(a[10]=e=>n.value.rounded=e),label:"Rounded"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.square,"onUpdate:modelValue":a[11]||(a[11]=e=>n.value.square=e),label:"Square"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.dense,"onUpdate:modelValue":a[12]||(a[12]=e=>n.value.dense=e),label:"Dense"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value[N(o).ItemAligned],"onUpdate:modelValue":a[13]||(a[13]=e=>n.value[N(o).ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}}}),TIME_PICKER:/* @__PURE__ */I({name:"HTimePanel",components:{HExpansionItem:Ue,HSwitch:ce,HTextField:re},__name:"HTimePanel",props:{schema:{}},setup(l){const a=l,o=Ee,n=F(()=>a.schema.attrs),t=F(()=>a.schema.models);return(l,a)=>{const d=e;return C(),D(d,{bordered:""},{default:k(()=>[q(N(Ue),{icon:"mdi-information",label:"常规","default-opened":""},{default:k(()=>[q(N(re),{modelValue:t.value.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),q(N(re),{modelValue:n.value.label,"onUpdate:modelValue":a[1]||(a[1]=e=>n.value.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),q(N(Ue),{icon:"mdi-eject-circle",label:"状态"},{default:k(()=>[P("div",Re,[q(N(ce),{modelValue:n.value.disable,"onUpdate:modelValue":a[2]||(a[2]=e=>n.value.disable=e),label:"Disable"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.readonly,"onUpdate:modelValue":a[3]||(a[3]=e=>n.value.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),q(N(Ue),{icon:"mdi-image-edit",label:"外观"},{default:k(()=>[P("div",Te,[q(N(ce),{modelValue:n.value.dark,"onUpdate:modelValue":a[4]||(a[4]=e=>n.value.dark=e),label:"Dark"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.filled,"onUpdate:modelValue":a[5]||(a[5]=e=>n.value.filled=e),label:"Filled"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.outlined,"onUpdate:modelValue":a[6]||(a[6]=e=>n.value.outlined=e),label:"Outlined"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.borderless,"onUpdate:modelValue":a[7]||(a[7]=e=>n.value.borderless=e),label:"Borderless"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.standout,"onUpdate:modelValue":a[8]||(a[8]=e=>n.value.standout=e),label:"Standout"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value[N(o).HideBottomSpace],"onUpdate:modelValue":a[9]||(a[9]=e=>n.value[N(o).HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.rounded,"onUpdate:modelValue":a[10]||(a[10]=e=>n.value.rounded=e),label:"Rounded"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.square,"onUpdate:modelValue":a[11]||(a[11]=e=>n.value.square=e),label:"Square"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value.dense,"onUpdate:modelValue":a[12]||(a[12]=e=>n.value.dense=e),label:"Dense"},null,8,["modelValue"]),q(N(ce),{modelValue:n.value[N(o).ItemAligned],"onUpdate:modelValue":a[13]||(a[13]=e=>n.value[N(o).ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}}})},__name:"HPropertyPanel",setup(e){const l=Ve(),{isInformationPanel:a,currentSchema:n,currentPanel:t}=Y(l),d=W("info"),u=W("display");return(e,l)=>{const m=b,s=v,i=f,r=g,c=h,p=o;return N(a)?(C(),D(p,{key:0},{default:k(()=>[q(s,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:k(()=>[q(m,{name:"info",label:"信息"})]),_:1},8,["modelValue"]),q(i),q(c,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),animated:""},{default:k(()=>[q(r,{name:"info"},{default:k(()=>[q(N(fe))]),_:1})]),_:1},8,["modelValue"])]),_:1})):(C(),D(p,{key:1},{default:k(()=>[q(s,{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:k(()=>[q(m,{name:"display",label:"显示"}),q(m,{name:"sheet",label:"表单"})]),_:1},8,["modelValue"]),q(i),q(c,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),animated:""},{default:k(()=>[q(r,{name:"display",class:"q-pa-none"},{default:k(()=>[(C(),D(G(N(t)),{schema:N(n)},null,8,["schema"]))]),_:1}),q(r,{name:"sheet",class:"q-pa-none"},{default:k(()=>[q(N(Fe))]),_:1})]),_:1},8,["modelValue"])]),_:1}))}}}),Ne=I({name:"HWidgetPanel",components:{Draggable:pe},setup(){const e=ue,l=Ve(),a=e=>me.create(e);return{widgetGroups:e,cloneWidget:a,addWidget:e=>{const o=a(e);l.addElement(o)}}}}),Le={class:"widget-list"},je={class:"widget-title"},We=["onClick"],Ge={class:"widget-body"};const Me=/* @__PURE__ */be(Ne,[["render",function(e,l,a,o,n,t){const d=U,u=B("draggable");return C(),M("div",Le,[(C(!0),M($,null,K(e.widgetGroups,(l,a)=>(C(),M("div",{key:a},[P("div",je,j(l.title),1),q(u,{modelValue:l.list,"onUpdate:modelValue":e=>l.list=e,"item-key":"schemaName",draggable:".widget-item",sort:!1,group:{name:"widgetGroup",pull:"clone",put:!1},clone:e.cloneWidget},{item:k(({element:l})=>[P("div",{class:"widget-item",onClick:a=>e.addWidget(l)},[P("div",Ge,[q(d,{name:l.icon},null,8,["name"]),L(" "+j(l.title),1)])],8,We)]),_:1},8,["modelValue","onUpdate:modelValue","clone"])]))),128))])}],["__scopeId","data-v-ae3d4bd2"]]);const $e=/* @__PURE__ */be(I({name:"HDynamicForms",components:{HWidgetPanel:Me,HPropertyPanel:Ae,HCanvasContainer:He,HFormPreviewDialog:_e,HFormUploadDialog:he},props:{instance:{type:Object,required:!0},title:{type:String,default:"Dante Cloud Form Designer"},container:{type:Boolean,default:!1},height:{type:String,default:"90vh"},item:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:l}){const a=S(!1),o=S(!1),n=S(!1),t=S(!1),d=ve(),u=Ve();return z(()=>e.item,l=>{d.init(e.instance),u.loading(l)},{deep:!0,immediate:!0}),z(()=>u.isClosed,e=>{e&&l("close")}),X(()=>{d.$reset(),u.$reset()}),{leftDrawerOpen:a,toggleLeftDrawer(){a.value=!a.value},rightDrawerOpen:o,toggleRightDrawer(){o.value=!o.value},openPreview:n,openUpload:t}}}),[["render",function(e,l,a,o,n,t){const u=d,m=E,s=H,i=y,r=Me,c=w,p=Ae,V=He,v=_e,b=he,f=_;return C(),D(f,{view:"lHr LpR lfr",container:e.container,class:"bg-grey-2",style:J(`height: ${e.height}`)},{default:k(()=>[q(i,{bordered:"",class:"text-primary bg-white"},{default:k(()=>[q(s,null,{default:k(()=>[q(u,{dense:"",flat:"",round:"",icon:"menu",onClick:l[0]||(l[0]=l=>e.leftDrawerOpen=!e.leftDrawerOpen)}),q(m,null,{default:k(()=>[L(j(e.title),1)]),_:1}),q(u,{flat:"",round:"",dense:"",icon:"mdi-eye",class:"q-mr-xs",onClick:l[1]||(l[1]=l=>e.openPreview=!0)}),q(u,{flat:"",round:"",dense:"",icon:"mdi-cloud-upload",onClick:l[2]||(l[2]=l=>e.openUpload=!0)})]),_:1})]),_:1}),q(c,{"show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":l[3]||(l[3]=l=>e.leftDrawerOpen=l),side:"left",behavior:"desktop",bordered:""},{default:k(()=>[q(r)]),_:1},8,["modelValue"]),q(c,{"show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":l[4]||(l[4]=l=>e.rightDrawerOpen=l),side:"right",behavior:"desktop",bordered:""},{default:k(()=>[q(p)]),_:1},8,["modelValue"]),q(V),q(v,{modelValue:e.openPreview,"onUpdate:modelValue":l[5]||(l[5]=l=>e.openPreview=l)},null,8,["modelValue"]),q(b,{modelValue:e.openUpload,"onUpdate:modelValue":l[6]||(l[6]=l=>e.openUpload=l)},null,8,["modelValue"])]),_:1},8,["container","style"])}]]);$e.install=e=>{e.component($e.name,$e)};const Ke=[$e],ze={install:e=>{Ke.map(l=>e.component(l.name,l))}};export{Ee as Attributes,se as ElementUtils,$e as HDynamicForms,oe as Swal,ie as WIDGET_DEFINITIONS,ze as default,ne as toast};
