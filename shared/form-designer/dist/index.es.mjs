import{QList as e,QInput as l,QDialog as a,QCard as o,QCardSection as t,QSpace as n,QBtn as d,QCardActions as r,QPageContainer as s,QPage as i,QExpansionItem as u,QTable as m,QTr as p,QTd as c,QPopupEdit as V,QTabs as b,QTab as f,QSeparator as h,QTabPanels as v,QTabPanel as U,QIcon as g,QLayout as T,QHeader as y,QToolbar as E,QToolbarTitle as _,QDrawer as I}from"quasar";import{defineComponent as S,ref as H,openBlock as w,createBlock as B,withCtx as R,createVNode as C,computed as A,createElementVNode as D,renderSlot as k,mergeProps as q,resolveComponent as O,normalizeClass as x,createCommentVNode as F,createSlots as P,createTextVNode as N,toDisplayString as j,resolveDynamicComponent as L,createElementBlock as W,Fragment as G,renderList as M,watch as $,onUnmounted as K,normalizeStyle as z}from"vue";import{defineStore as X,storeToRefs as J}from"pinia";import{isEmpty as Q,remove as Y}from"lodash-es";import{toast as Z,Swal as ee}from"@herodotus-cloud/core";import{Swal as le,toast as ae}from"@herodotus-cloud/core";import{HRendererForm as oe,HRendererEngine as te,WIDGET_DEFINITIONS as ne,ElementUtils as de}from"@herodotus-cloud/form-engine";import{ElementUtils as re,WIDGET_DEFINITIONS as se}from"@herodotus-cloud/form-engine";import{HTextField as ie,HSwitch as ue}from"@herodotus-cloud/components";import me from"vuedraggable";const pe=X("FormDesignerCanvas",{state:()=>({isClosed:!1,canvasElements:[],sheet:{},selectedElement:{},id:"",name:"",activityName:""}),getters:{isSelected:e=>l=>!(Q(e.selectedElement)||!e.selectedElement.id)&&e.selectedElement.config.renderKey===l,isEmptyCanvas:e=>Q(e.canvasElements),getElements:e=>e.canvasElements,currentSchema(){return Q(this.selectedElement)||Q(this.selectedElement.schema)?{}:this.selectedElement.schema},currentConfig(){return Q(this.selectedElement)||Q(this.selectedElement.config)?{}:this.selectedElement.config},currentPanel(){return Q(this.currentConfig)||Q(this.currentConfig.panel)?"INFORMATION_PANEL":this.currentConfig.panel},isInformationPanel(){return"INFORMATION_PANEL"===this.currentPanel},condition(){return Q(this.sheet.condition)&&(this.sheet.condition={variable:"",options:[]}),this.sheet.condition}},actions:{selectElement(e){this.selectedElement=e},selectFirstElement(){Q(this.canvasElements)||this.selectElement(this.canvasElements[0])},loading(e){Q(e.modeler)||(this.canvasElements=e.modeler.elements,this.sheet=e.modeler.sheet),this.id=e.id,this.name=e.name,this.activityName=e.activityName,this.selectFirstElement()},compose(){return{id:this.id,name:this.name,activityName:this.activityName,modeler:{elements:this.canvasElements,sheet:this.sheet}}},addElement(e){void 0===this.canvasElements&&(this.canvasElements=[]),this.canvasElements.push(e),this.selectElement(e)},removeElement(e){!Q(this.canvasElements)&&e.id&&(Y(this.canvasElements,l=>l.id===e.id),this.selectFirstElement())}}}),ce=X("FormDesignerResources",{state:()=>({resources:{}}),getters:{dynamicForm:e=>e.resources.dynamicForm()},actions:{init(e){this.resources=e}}}),Ve=(e,l)=>{const a=e.__vccOpts||e;for(const[o,t]of l)a[o]=t;return a};const be=/* @__PURE__ */Ve(S({name:"HFormInformation",setup(){const e=pe(),{id:l,name:a,activityName:o}=e,t=H(null),n=H(null);return{id:l,name:a,activityName:o,nameRef:t,activityNameRef:n,validate:()=>{const e=t.value,l=n.value;return e.validate(),l.validate(),!e.hasError&&!l.hasError}}}}),[["render",function(a,o,t,n,d,r){const s=l,i=e;return w(),B(i,null,{default:R(()=>[C(s,{modelValue:a.id,"onUpdate:modelValue":o[0]||(o[0]=e=>a.id=e),dense:"",outlined:"",label:"ID"},null,8,["modelValue"]),C(s,{ref:"nameRef",modelValue:a.name,"onUpdate:modelValue":o[1]||(o[1]=e=>a.name=e),dense:"",outlined:"",label:"表单名称",rules:[e=>!!e||"表单名称不能为空"]},null,8,["modelValue","rules"]),C(s,{ref:"activityNameRef",modelValue:a.activityName,"onUpdate:modelValue":o[2]||(o[2]=e=>a.activityName=e),dense:"",outlined:"",label:"流程节点名称",rules:[e=>!!e||"流程节点不能为空"]},null,8,["modelValue","rules"])]),_:1})}]]);const fe=/* @__PURE__ */Ve(S({name:"HFormUploadDialog",components:{HFormInformation:be},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","update:open","save"],setup(e,{emit:l}){const a=A({get:()=>e.modelValue,set:e=>{l("update:modelValue",e)}}),o=H(null),t=ce(),n=pe();return{isOpen:a,onSave:()=>{if(o.value){if(o.value.validate()){const e=n.compose();t.dynamicForm.saveOrUpdate(e).then(e=>{a.value=!1,ee.fire({title:"保存成功！",text:"您是否需要关闭设计器？",icon:"success",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"确定!",cancelButtonText:"取消",showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOut"}}).then(e=>{e.value&&(n.isClosed=!0)})}).catch(e=>{a.value=!1,Z.error("保存失败！")})}}},infoRef:o}}}),[["render",function(e,l,s,i,u,m){const p=n,c=d,V=t,b=be,f=r,h=o,v=a;return w(),B(v,{modelValue:e.isOpen,"onUpdate:modelValue":l[3]||(l[3]=l=>e.isOpen=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:R(()=>[C(h,{style:{width:"20vw"}},{default:R(()=>[C(V,{class:"row items-center q-pb-none"},{default:R(()=>[l[4]||(l[4]=D("div",{class:"text-h6"},"上传表单",-1)),C(p),C(c,{icon:"close",flat:"",round:"",dense:"",onClick:l[0]||(l[0]=l=>e.isOpen=!1)})]),_:1}),C(V,null,{default:R(()=>[C(b,{ref:"infoRef"},null,512)]),_:1}),C(f,{align:"right"},{default:R(()=>[C(c,{label:"取消",color:"red",onClick:l[1]||(l[1]=l=>e.isOpen=!1)}),C(c,{label:"保存",color:"primary",onClick:l[2]||(l[2]=l=>e.onSave())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}]]);const he=/* @__PURE__ */Ve(S({name:"HCanvasLayout"}),[["render",function(e,l,a,t,n,d){const r=o,u=i,m=s;return w(),B(m,null,{default:R(()=>[C(u,null,{default:R(()=>[C(r,{class:"q-ma-md"},{default:R(()=>[k(e.$slots,"default")]),_:3})]),_:3})]),_:3})}]]);const ve=/* @__PURE__ */Ve(S({name:"HExpansionItem",props:{headerClass:{type:String,default:"text-primary"}}}),[["render",function(e,l,a,n,d,r){const s=t,i=o,m=u;return w(),B(m,q({"expand-separator":"","header-class":e.headerClass},e.$attrs),{default:R(()=>[C(i,null,{default:R(()=>[C(s,null,{default:R(()=>[k(e.$slots,"default")]),_:3})]),_:3})]),_:3},16,["header-class"])}]]);const Ue=/* @__PURE__ */Ve(S({name:"HFormPreviewDialog",components:{HRendererForm:oe},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const a=pe(),{canvasElements:o}=a,t=A({get:()=>e.modelValue,set:e=>{l("update:modelValue",e)}}),n=H({});return{isOpen:t,state:n,canvasElements:o,onClose:()=>{t.value=!1}}}}),[["render",function(e,l,s,i,u,m){const p=n,c=d,V=t,b=O("h-renderer-form"),f=r,h=o,v=a;return w(),B(v,{modelValue:e.isOpen,"onUpdate:modelValue":l[3]||(l[3]=l=>e.isOpen=l),persistent:"","transition-show":"scale","transition-hide":"scale"},{default:R(()=>[C(h,null,{default:R(()=>[C(V,{class:"row items-center q-pb-none"},{default:R(()=>[l[4]||(l[4]=D("div",{class:"text-h6"},"预览",-1)),C(p),C(c,{icon:"close",flat:"",round:"",dense:"",onClick:l[0]||(l[0]=l=>e.onClose())})]),_:1}),C(V,null,{default:R(()=>[C(b,{modelValue:e.state,"onUpdate:modelValue":l[1]||(l[1]=l=>e.state=l),elements:e.canvasElements},null,8,["modelValue","elements"])]),_:1}),C(f,{align:"right",class:"bg-white text-red"},{default:R(()=>[C(c,{flat:"",label:"确定",onClick:l[2]||(l[2]=l=>e.onClose())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}]]);const ge=/* @__PURE__ */Ve(S({name:"HCanvasElement",components:{HRendererEngine:te},props:{element:{type:Object,required:!0},selectedId:{type:Number,required:!0}},setup(e){const l=H(!1),a=pe();return{isHover:l,schemas:A(()=>[e.element.schema]),isSelected:A(()=>a.isSelected(e.selectedId)),onDelete:()=>{a.removeElement(e.element)}}}}),[["render",function(e,l,a,t,n,s){const i=O("h-renderer-engine"),u=d,m=r,p=o;return w(),B(p,{class:x([e.isSelected&&!e.isHover?"canvas-item-selected":"canvas-item"]),onMouseover:l[0]||(l[0]=l=>e.isHover=!0),onMouseleave:l[1]||(l[1]=l=>e.isHover=!1)},{default:R(()=>[C(i,{schemas:e.schemas},null,8,["schemas"]),e.isHover?(w(),B(m,{key:0,class:"justify-end q-pa-none"},{default:R(()=>[C(u,{flat:"",round:"",size:"sm",color:"red",icon:"mdi-delete",onClick:e.onDelete},null,8,["onClick"]),C(u,{flat:"",round:"",size:"sm",color:"accent",icon:"bookmark"}),C(u,{flat:"",round:"",size:"sm",color:"primary",icon:"share"})]),_:1})):F("",!0)]),_:1},8,["class"])}],["__scopeId","data-v-8129af03"]]);const Te=/* @__PURE__ */Ve(S({name:"HCanvasContainer",components:{Draggable:me,HCanvasElement:ge,HCanvasLayout:he},setup(e){const l=pe(),{canvasElements:a}=l;return{isEmptyCanvas:A(()=>l.isEmptyCanvas),canvasElements:a,onSelectedItem:e=>{l.selectElement(e)}}}}),[["render",function(e,l,a,o,t,n){const d=ge,r=O("draggable"),s=he;return w(),B(s,null,{default:R(()=>[C(r,{"item-key":"id",list:e.canvasElements,animation:300,group:"widgetGroup",class:"canvas-container"},P({item:R(({element:l})=>[(w(),B(d,{element:l,key:l.config.renderKey,"selected-id":l.config.renderKey,onClick:a=>e.onSelectedItem(l)},null,8,["element","selected-id","onClick"]))]),_:2},[e.isEmptyCanvas?{name:"footer",fn:R(()=>[l[0]||(l[0]=D("div",{class:"row text-center canvas-container"},[D("div",{class:"col-12 self-center text-h6 text-weight-medium text-grey-5"}," 从左侧拖拽或点击来添加字段 ")],-1))]),key:"0"}:void 0]),1032,["list"])]),_:1})}],["__scopeId","data-v-b8c7d9b0"]]);const ye=/* @__PURE__ */Ve(S({name:"HConditionVariable",components:{HExpansionItem:ve,HTextField:ie},setup(e){const l=pe(),{condition:a}=l,o=H([{label:"option1",value:!0},{label:"option2",value:!1}]);return{tableColumns:[{align:"center",name:"label",field:"calories",label:"标签"},{align:"center",name:"value",field:"fat",label:"值"}],tableRows:o,condition:a,onModify:()=>{a.options=o.value}}}}),[["render",function(e,a,o,t,n,d){const r=O("h-text-field"),s=l,i=V,u=c,b=p,f=m,h=ve;return w(),B(h,{icon:"mdi-variable",label:"流程变量"},{default:R(()=>[C(r,{modelValue:e.condition.variable,"onUpdate:modelValue":a[0]||(a[0]=l=>e.condition.variable=l),dense:"",label:"变量名称"},null,8,["modelValue"]),C(f,{rows:e.tableRows,columns:e.tableColumns,"row-key":"name",dense:"",flat:"",bordered:"","hide-pagination":"","card-container-class":"q-ml-2"},{body:R(l=>[C(b,{props:l},{default:R(()=>[C(u,{key:"label",props:l},{default:R(()=>[N(j(l.row.label)+" ",1),C(i,{modelValue:l.row.label,"onUpdate:modelValue":[e=>l.row.label=e,e.onModify],title:"修改标签",buttons:"","label-set":"确定","label-cancel":"取消"},{default:R(e=>[C(s,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["props"]),C(u,{key:"value",props:l},{default:R(()=>[N(j(l.row.value),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})}]]);const Ee=/* @__PURE__ */Ve(S({name:"HSheetPanel",components:{HConditionVariable:ye}}),[["render",function(l,a,o,t,n,d){const r=ye,s=e;return w(),B(s,{bordered:""},{default:R(()=>[C(r)]),_:1})}]]),_e={HideBottomSpace:"hide-bottom-space",ItemAligned:"item-aligned"},Ie=S({name:"HDatePanel",components:{HExpansionItem:ve,HSwitch:ue,HTextField:ie},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:_e,properties:A(()=>e.schema.attrs),models:A(()=>e.schema.models)})}),Se={class:"q-gutter-y-sm column"},He={class:"q-gutter-y-sm column"};const we=/* @__PURE__ */Ve(Ie,[["render",function(l,a,o,t,n,d){const r=O("h-text-field"),s=ve,i=O("h-switch"),u=e;return w(),B(u,{bordered:""},{default:R(()=>[C(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:R(()=>[C(r,{modelValue:l.models.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.models.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),C(r,{modelValue:l.properties.label,"onUpdate:modelValue":a[1]||(a[1]=e=>l.properties.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),C(s,{icon:"mdi-eject-circle",label:"状态"},{default:R(()=>[D("div",Se,[C(i,{modelValue:l.properties.disable,"onUpdate:modelValue":a[2]||(a[2]=e=>l.properties.disable=e),label:"Disable"},null,8,["modelValue"]),C(i,{modelValue:l.properties.readonly,"onUpdate:modelValue":a[3]||(a[3]=e=>l.properties.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),C(s,{icon:"mdi-image-edit",label:"外观"},{default:R(()=>[D("div",He,[C(i,{modelValue:l.properties.dark,"onUpdate:modelValue":a[4]||(a[4]=e=>l.properties.dark=e),label:"Dark"},null,8,["modelValue"]),C(i,{modelValue:l.properties.filled,"onUpdate:modelValue":a[5]||(a[5]=e=>l.properties.filled=e),label:"Filled"},null,8,["modelValue"]),C(i,{modelValue:l.properties.outlined,"onUpdate:modelValue":a[6]||(a[6]=e=>l.properties.outlined=e),label:"Outlined"},null,8,["modelValue"]),C(i,{modelValue:l.properties.borderless,"onUpdate:modelValue":a[7]||(a[7]=e=>l.properties.borderless=e),label:"Borderless"},null,8,["modelValue"]),C(i,{modelValue:l.properties.standout,"onUpdate:modelValue":a[8]||(a[8]=e=>l.properties.standout=e),label:"Standout"},null,8,["modelValue"]),C(i,{modelValue:l.properties[l.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":a[9]||(a[9]=e=>l.properties[l.ATTRIBUTES.HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),C(i,{modelValue:l.properties.rounded,"onUpdate:modelValue":a[10]||(a[10]=e=>l.properties.rounded=e),label:"Rounded"},null,8,["modelValue"]),C(i,{modelValue:l.properties.square,"onUpdate:modelValue":a[11]||(a[11]=e=>l.properties.square=e),label:"Square"},null,8,["modelValue"]),C(i,{modelValue:l.properties.dense,"onUpdate:modelValue":a[12]||(a[12]=e=>l.properties.dense=e),label:"Dense"},null,8,["modelValue"]),C(i,{modelValue:l.properties[l.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":a[13]||(a[13]=e=>l.properties[l.ATTRIBUTES.ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}]]),Be=S({name:"HPasswordPanel",components:{HExpansionItem:ve,HSwitch:ue,HTextField:ie},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:_e,properties:A(()=>e.schema.attrs),models:A(()=>e.schema.models)})}),Re={class:"q-gutter-y-sm column"},Ce={class:"q-gutter-y-sm column"};const Ae=/* @__PURE__ */Ve(Be,[["render",function(l,a,o,t,n,d){const r=O("h-text-field"),s=ve,i=O("h-switch"),u=e;return w(),B(u,{bordered:""},{default:R(()=>[C(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:R(()=>[C(r,{modelValue:l.models.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.models.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),C(r,{modelValue:l.properties.label,"onUpdate:modelValue":a[1]||(a[1]=e=>l.properties.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),C(s,{icon:"mdi-eject-circle",label:"状态"},{default:R(()=>[D("div",Re,[C(i,{modelValue:l.properties.disable,"onUpdate:modelValue":a[2]||(a[2]=e=>l.properties.disable=e),label:"Disable"},null,8,["modelValue"]),C(i,{modelValue:l.properties.readonly,"onUpdate:modelValue":a[3]||(a[3]=e=>l.properties.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),C(s,{icon:"mdi-image-edit",label:"外观"},{default:R(()=>[D("div",Ce,[C(i,{modelValue:l.properties.dark,"onUpdate:modelValue":a[4]||(a[4]=e=>l.properties.dark=e),label:"Dark"},null,8,["modelValue"]),C(i,{modelValue:l.properties.filled,"onUpdate:modelValue":a[5]||(a[5]=e=>l.properties.filled=e),label:"Filled"},null,8,["modelValue"]),C(i,{modelValue:l.properties.outlined,"onUpdate:modelValue":a[6]||(a[6]=e=>l.properties.outlined=e),label:"Outlined"},null,8,["modelValue"]),C(i,{modelValue:l.properties.borderless,"onUpdate:modelValue":a[7]||(a[7]=e=>l.properties.borderless=e),label:"Borderless"},null,8,["modelValue"]),C(i,{modelValue:l.properties.standout,"onUpdate:modelValue":a[8]||(a[8]=e=>l.properties.standout=e),label:"Standout"},null,8,["modelValue"]),C(i,{modelValue:l.properties[l.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":a[9]||(a[9]=e=>l.properties[l.ATTRIBUTES.HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),C(i,{modelValue:l.properties.rounded,"onUpdate:modelValue":a[10]||(a[10]=e=>l.properties.rounded=e),label:"Rounded"},null,8,["modelValue"]),C(i,{modelValue:l.properties.square,"onUpdate:modelValue":a[11]||(a[11]=e=>l.properties.square=e),label:"Square"},null,8,["modelValue"]),C(i,{modelValue:l.properties.dense,"onUpdate:modelValue":a[12]||(a[12]=e=>l.properties.dense=e),label:"Dense"},null,8,["modelValue"]),C(i,{modelValue:l.properties[l.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":a[13]||(a[13]=e=>l.properties[l.ATTRIBUTES.ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}]]),De=S({name:"HTextareaPanel",components:{HExpansionItem:ve,HSwitch:ue,HTextField:ie},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:_e,properties:A(()=>e.schema.attrs),models:A(()=>e.schema.models)})}),ke={class:"q-gutter-y-sm column"},qe={class:"q-gutter-y-sm column"};const Oe=/* @__PURE__ */Ve(De,[["render",function(l,a,o,t,n,d){const r=O("h-text-field"),s=ve,i=O("h-switch"),u=e;return w(),B(u,{bordered:""},{default:R(()=>[C(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:R(()=>[C(r,{modelValue:l.models.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.models.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),C(r,{modelValue:l.properties.label,"onUpdate:modelValue":a[1]||(a[1]=e=>l.properties.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),C(s,{icon:"mdi-eject-circle",label:"状态"},{default:R(()=>[D("div",ke,[C(i,{modelValue:l.properties.disable,"onUpdate:modelValue":a[2]||(a[2]=e=>l.properties.disable=e),label:"Disable"},null,8,["modelValue"]),C(i,{modelValue:l.properties.readonly,"onUpdate:modelValue":a[3]||(a[3]=e=>l.properties.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),C(s,{icon:"mdi-image-edit",label:"外观"},{default:R(()=>[D("div",qe,[C(i,{modelValue:l.properties.dark,"onUpdate:modelValue":a[4]||(a[4]=e=>l.properties.dark=e),label:"Dark"},null,8,["modelValue"]),C(i,{modelValue:l.properties.filled,"onUpdate:modelValue":a[5]||(a[5]=e=>l.properties.filled=e),label:"Filled"},null,8,["modelValue"]),C(i,{modelValue:l.properties.outlined,"onUpdate:modelValue":a[6]||(a[6]=e=>l.properties.outlined=e),label:"Outlined"},null,8,["modelValue"]),C(i,{modelValue:l.properties.borderless,"onUpdate:modelValue":a[7]||(a[7]=e=>l.properties.borderless=e),label:"Borderless"},null,8,["modelValue"]),C(i,{modelValue:l.properties.standout,"onUpdate:modelValue":a[8]||(a[8]=e=>l.properties.standout=e),label:"Standout"},null,8,["modelValue"]),C(i,{modelValue:l.properties[l.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":a[9]||(a[9]=e=>l.properties[l.ATTRIBUTES.HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),C(i,{modelValue:l.properties.rounded,"onUpdate:modelValue":a[10]||(a[10]=e=>l.properties.rounded=e),label:"Rounded"},null,8,["modelValue"]),C(i,{modelValue:l.properties.square,"onUpdate:modelValue":a[11]||(a[11]=e=>l.properties.square=e),label:"Square"},null,8,["modelValue"]),C(i,{modelValue:l.properties.dense,"onUpdate:modelValue":a[12]||(a[12]=e=>l.properties.dense=e),label:"Dense"},null,8,["modelValue"]),C(i,{modelValue:l.properties[l.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":a[13]||(a[13]=e=>l.properties[l.ATTRIBUTES.ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}]]),xe=S({name:"HTextFieldPanel",components:{HExpansionItem:ve,HSwitch:ue,HTextField:ie},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:_e,properties:A(()=>e.schema.attrs),models:A(()=>e.schema.models)})}),Fe={class:"q-gutter-y-sm column"},Pe={class:"q-gutter-y-sm column"};const Ne=/* @__PURE__ */Ve(xe,[["render",function(l,a,o,t,n,d){const r=O("h-text-field"),s=ve,i=O("h-switch"),u=e;return w(),B(u,{bordered:""},{default:R(()=>[C(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:R(()=>[C(r,{modelValue:l.models.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.models.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),C(r,{modelValue:l.properties.label,"onUpdate:modelValue":a[1]||(a[1]=e=>l.properties.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),C(s,{icon:"mdi-eject-circle",label:"状态"},{default:R(()=>[D("div",Fe,[C(i,{modelValue:l.properties.disable,"onUpdate:modelValue":a[2]||(a[2]=e=>l.properties.disable=e),label:"Disable"},null,8,["modelValue"]),C(i,{modelValue:l.properties.readonly,"onUpdate:modelValue":a[3]||(a[3]=e=>l.properties.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),C(s,{icon:"mdi-image-edit",label:"外观"},{default:R(()=>[D("div",Pe,[C(i,{modelValue:l.properties.dark,"onUpdate:modelValue":a[4]||(a[4]=e=>l.properties.dark=e),label:"Dark"},null,8,["modelValue"]),C(i,{modelValue:l.properties.filled,"onUpdate:modelValue":a[5]||(a[5]=e=>l.properties.filled=e),label:"Filled"},null,8,["modelValue"]),C(i,{modelValue:l.properties.outlined,"onUpdate:modelValue":a[6]||(a[6]=e=>l.properties.outlined=e),label:"Outlined"},null,8,["modelValue"]),C(i,{modelValue:l.properties.borderless,"onUpdate:modelValue":a[7]||(a[7]=e=>l.properties.borderless=e),label:"Borderless"},null,8,["modelValue"]),C(i,{modelValue:l.properties.standout,"onUpdate:modelValue":a[8]||(a[8]=e=>l.properties.standout=e),label:"Standout"},null,8,["modelValue"]),C(i,{modelValue:l.properties[l.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":a[9]||(a[9]=e=>l.properties[l.ATTRIBUTES.HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),C(i,{modelValue:l.properties.rounded,"onUpdate:modelValue":a[10]||(a[10]=e=>l.properties.rounded=e),label:"Rounded"},null,8,["modelValue"]),C(i,{modelValue:l.properties.square,"onUpdate:modelValue":a[11]||(a[11]=e=>l.properties.square=e),label:"Square"},null,8,["modelValue"]),C(i,{modelValue:l.properties.dense,"onUpdate:modelValue":a[12]||(a[12]=e=>l.properties.dense=e),label:"Dense"},null,8,["modelValue"]),C(i,{modelValue:l.properties[l.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":a[13]||(a[13]=e=>l.properties[l.ATTRIBUTES.ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}]]),je=S({name:"HTimePanel",components:{HExpansionItem:ve,HSwitch:ue,HTextField:ie},props:{schema:{type:Object,required:!0}},setup:e=>({ATTRIBUTES:_e,properties:A(()=>e.schema.attrs),models:A(()=>e.schema.models)})}),Le={class:"q-gutter-y-sm column"},We={class:"q-gutter-y-sm column"};const Ge=/* @__PURE__ */Ve({name:"HGeneratorLayout",components:{HSheetPanel:Ee,HFormInformation:be,DATE_PICKER:we,PASSWORD:Ae,TEXT_AREA:Oe,TEXT_FIELD:Ne,TIME_PICKER:/* @__PURE__ */Ve(je,[["render",function(l,a,o,t,n,d){const r=O("h-text-field"),s=ve,i=O("h-switch"),u=e;return w(),B(u,{bordered:""},{default:R(()=>[C(s,{icon:"mdi-information",label:"常规","default-opened":""},{default:R(()=>[C(r,{modelValue:l.models.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.models.modelValue.name=e),dense:"",label:"名称"},null,8,["modelValue"]),C(r,{modelValue:l.properties.label,"onUpdate:modelValue":a[1]||(a[1]=e=>l.properties.label=e),dense:"",label:"Label"},null,8,["modelValue"])]),_:1}),C(s,{icon:"mdi-eject-circle",label:"状态"},{default:R(()=>[D("div",Le,[C(i,{modelValue:l.properties.disable,"onUpdate:modelValue":a[2]||(a[2]=e=>l.properties.disable=e),label:"Disable"},null,8,["modelValue"]),C(i,{modelValue:l.properties.readonly,"onUpdate:modelValue":a[3]||(a[3]=e=>l.properties.readonly=e),label:"Readonly"},null,8,["modelValue"])])]),_:1}),C(s,{icon:"mdi-image-edit",label:"外观"},{default:R(()=>[D("div",We,[C(i,{modelValue:l.properties.dark,"onUpdate:modelValue":a[4]||(a[4]=e=>l.properties.dark=e),label:"Dark"},null,8,["modelValue"]),C(i,{modelValue:l.properties.filled,"onUpdate:modelValue":a[5]||(a[5]=e=>l.properties.filled=e),label:"Filled"},null,8,["modelValue"]),C(i,{modelValue:l.properties.outlined,"onUpdate:modelValue":a[6]||(a[6]=e=>l.properties.outlined=e),label:"Outlined"},null,8,["modelValue"]),C(i,{modelValue:l.properties.borderless,"onUpdate:modelValue":a[7]||(a[7]=e=>l.properties.borderless=e),label:"Borderless"},null,8,["modelValue"]),C(i,{modelValue:l.properties.standout,"onUpdate:modelValue":a[8]||(a[8]=e=>l.properties.standout=e),label:"Standout"},null,8,["modelValue"]),C(i,{modelValue:l.properties[l.ATTRIBUTES.HideBottomSpace],"onUpdate:modelValue":a[9]||(a[9]=e=>l.properties[l.ATTRIBUTES.HideBottomSpace]=e),label:"Hide Bottom Space"},null,8,["modelValue"]),C(i,{modelValue:l.properties.rounded,"onUpdate:modelValue":a[10]||(a[10]=e=>l.properties.rounded=e),label:"Rounded"},null,8,["modelValue"]),C(i,{modelValue:l.properties.square,"onUpdate:modelValue":a[11]||(a[11]=e=>l.properties.square=e),label:"Square"},null,8,["modelValue"]),C(i,{modelValue:l.properties.dense,"onUpdate:modelValue":a[12]||(a[12]=e=>l.properties.dense=e),label:"Dense"},null,8,["modelValue"]),C(i,{modelValue:l.properties[l.ATTRIBUTES.ItemAligned],"onUpdate:modelValue":a[13]||(a[13]=e=>l.properties[l.ATTRIBUTES.ItemAligned]=e),label:"Item Aligned"},null,8,["modelValue"])])]),_:1})]),_:1})}]])},setup(){const e=pe(),{isInformationPanel:l,currentSchema:a,currentPanel:o}=J(e);return{formTab:H("info"),elementTab:H("display"),isInformationPanel:l,currentSchema:a,currentPanel:o}}},[["render",function(e,l,a,t,n,d){const r=f,s=b,i=h,u=be,m=U,p=v,c=o,V=Ee;return t.isInformationPanel?(w(),B(c,{key:0},{default:R(()=>[C(s,{modelValue:t.formTab,"onUpdate:modelValue":l[0]||(l[0]=e=>t.formTab=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:R(()=>[C(r,{name:"info",label:"信息"})]),_:1},8,["modelValue"]),C(i),C(p,{modelValue:t.formTab,"onUpdate:modelValue":l[1]||(l[1]=e=>t.formTab=e),animated:""},{default:R(()=>[C(m,{name:"info"},{default:R(()=>[C(u)]),_:1})]),_:1},8,["modelValue"])]),_:1})):(w(),B(c,{key:1},{default:R(()=>[C(s,{modelValue:t.elementTab,"onUpdate:modelValue":l[2]||(l[2]=e=>t.elementTab=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:R(()=>[C(r,{name:"display",label:"显示"}),C(r,{name:"sheet",label:"表单"})]),_:1},8,["modelValue"]),C(i),C(p,{modelValue:t.elementTab,"onUpdate:modelValue":l[3]||(l[3]=e=>t.elementTab=e),animated:""},{default:R(()=>[C(m,{name:"display",class:"q-pa-none"},{default:R(()=>[(w(),B(L(t.currentPanel),{schema:t.currentSchema},null,8,["schema"]))]),_:1}),C(m,{name:"sheet",class:"q-pa-none"},{default:R(()=>[C(V)]),_:1})]),_:1},8,["modelValue"])]),_:1}))}]]),Me=S({name:"HWidgetPanel",components:{Draggable:me},setup(){const e=ne,l=pe(),a=e=>de.create(e);return{widgetGroups:e,cloneWidget:a,addWidget:e=>{const o=a(e);l.addElement(o)}}}}),$e={class:"widget-list"},Ke={class:"widget-title"},ze=["onClick"],Xe={class:"widget-body"};const Je=/* @__PURE__ */Ve(Me,[["render",function(e,l,a,o,t,n){const d=g,r=O("draggable");return w(),W("div",$e,[(w(!0),W(G,null,M(e.widgetGroups,(l,a)=>(w(),W("div",{key:a},[D("div",Ke,j(l.title),1),C(r,{modelValue:l.list,"onUpdate:modelValue":e=>l.list=e,"item-key":"schemaName",draggable:".widget-item",sort:!1,group:{name:"widgetGroup",pull:"clone",put:!1},clone:e.cloneWidget},{item:R(({element:l})=>[D("div",{class:"widget-item",onClick:a=>e.addWidget(l)},[D("div",Xe,[C(d,{name:l.icon},null,8,["name"]),N(" "+j(l.title),1)])],8,ze)]),_:1},8,["modelValue","onUpdate:modelValue","clone"])]))),128))])}],["__scopeId","data-v-ae3d4bd2"]]);const Qe=/* @__PURE__ */Ve(S({name:"HDynamicForms",components:{HWidgetPanel:Je,HPropertyPanel:Ge,HCanvasContainer:Te,HFormPreviewDialog:Ue,HFormUploadDialog:fe},props:{instance:{type:Object,required:!0},title:{type:String,default:"Dante Cloud Form Designer"},container:{type:Boolean,default:!1},height:{type:String,default:"90vh"},item:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:l}){const a=H(!1),o=H(!1),t=H(!1),n=H(!1),d=ce(),r=pe();return $(()=>e.item,l=>{d.init(e.instance),r.loading(l)},{deep:!0,immediate:!0}),$(()=>r.isClosed,e=>{e&&l("close")}),K(()=>{d.$reset(),r.$reset()}),{leftDrawerOpen:a,toggleLeftDrawer(){a.value=!a.value},rightDrawerOpen:o,toggleRightDrawer(){o.value=!o.value},openPreview:t,openUpload:n}}}),[["render",function(e,l,a,o,t,n){const r=d,s=_,i=E,u=y,m=Je,p=I,c=Ge,V=Te,b=Ue,f=fe,h=T;return w(),B(h,{view:"lHr LpR lfr",container:e.container,class:"bg-grey-2",style:z(`height: ${e.height}`)},{default:R(()=>[C(u,{bordered:"",class:"text-primary bg-white"},{default:R(()=>[C(i,null,{default:R(()=>[C(r,{dense:"",flat:"",round:"",icon:"menu",onClick:l[0]||(l[0]=l=>e.leftDrawerOpen=!e.leftDrawerOpen)}),C(s,null,{default:R(()=>[N(j(e.title),1)]),_:1}),C(r,{flat:"",round:"",dense:"",icon:"mdi-eye",class:"q-mr-xs",onClick:l[1]||(l[1]=l=>e.openPreview=!0)}),C(r,{flat:"",round:"",dense:"",icon:"mdi-cloud-upload",onClick:l[2]||(l[2]=l=>e.openUpload=!0)})]),_:1})]),_:1}),C(p,{"show-if-above":"",modelValue:e.leftDrawerOpen,"onUpdate:modelValue":l[3]||(l[3]=l=>e.leftDrawerOpen=l),side:"left",behavior:"desktop",bordered:""},{default:R(()=>[C(m)]),_:1},8,["modelValue"]),C(p,{"show-if-above":"",modelValue:e.rightDrawerOpen,"onUpdate:modelValue":l[4]||(l[4]=l=>e.rightDrawerOpen=l),side:"right",behavior:"desktop",bordered:""},{default:R(()=>[C(c)]),_:1},8,["modelValue"]),C(V),C(b,{modelValue:e.openPreview,"onUpdate:modelValue":l[5]||(l[5]=l=>e.openPreview=l)},null,8,["modelValue"]),C(f,{modelValue:e.openUpload,"onUpdate:modelValue":l[6]||(l[6]=l=>e.openUpload=l)},null,8,["modelValue"])]),_:1},8,["container","style"])}]]);Qe.install=e=>{e.component(Qe.name,Qe)};const Ye=[Qe],Ze={install:e=>{Ye.map(l=>e.component(l.name,l))}};export{_e as Attributes,re as ElementUtils,Qe as HDynamicForms,le as Swal,se as WIDGET_DEFINITIONS,Ze as default,ae as toast};
